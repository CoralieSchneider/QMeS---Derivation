(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 12.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[    458618,       9937]
NotebookOptionsPosition[    442974,       9683]
NotebookOutlinePosition[    443350,       9699]
CellTagsIndexPosition[    443307,       9696]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Summation over Indices which gives superindex diagrams", "Chapter",
 CellChangeTimes->{{3.755946492910046*^9, 3.755946500824215*^9}, {
  3.755946680612664*^9, 3.7559466815788717`*^9}, {3.75603980949984*^9, 
  3.7560398148908653`*^9}, {3.7560406963084908`*^9, 3.7560406995491886`*^9}, {
  3.7561913770158415`*^9, 3.7561913796470623`*^9}, {3.7561955783773932`*^9, 
  3.756195584272127*^9}, {3.7562073445334387`*^9, 3.756207347443736*^9}, {
  3.756627373857559*^9, 3.75662738055461*^9}, {3.756635616565727*^9, 
  3.7566356277808156`*^9}, {3.7570524303250065`*^9, 3.757052433988364*^9}, {
  3.7752097677674046`*^9, 
  3.7752097725802507`*^9}},ExpressionUUID->"b98c3e8f-4eca-40ff-806f-\
3ea81a0e7196"],

Cell[CellGroupData[{

Cell["Aux Functions that are not used", "Subsection",
 CellChangeTimes->{{3.7570711494889107`*^9, 3.7570711701855297`*^9}, {
   3.757403065278137*^9, 3.7574030754031305`*^9}, {3.7580156044556265`*^9, 
   3.758015629606991*^9}, {3.758092357194866*^9, 3.7580923752568913`*^9}, 
   3.7589721539855156`*^9, {3.759041432871893*^9, 3.759041435844462*^9}, {
   3.7713128280000668`*^9, 
   3.7713128319738503`*^9}},ExpressionUUID->"ff81d31d-0933-4ab3-9c86-\
254d62257156"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "sorts", " ", "the", " ", "fields", " ", "into", " ", "two", " ", "groups",
     " ", "with", " ", "bosonic", " ", "and", " ", "fermionic", " ", 
    "commutation", " ", "relations"}], "*)"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"Clear", "[", "GetFieldCommutator", "]"}], " ", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"GetFieldCommutator", "[", "Allfields_", "]"}], " ", ":=", " ", 
    RowBox[{"GetFieldCommutator", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", "}"}], ",", 
        RowBox[{"{", "}"}]}], "}"}], ",", "Allfields"}], "]"}]}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"GetFieldCommutator", "[", 
     RowBox[{"TypeList_", ",", "Allfields_"}], "]"}], " ", ":=", " ", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"dummyTypeList", " ", "=", " ", "TypeList"}], ",", " ", 
        RowBox[{"ReducedAllfields", " ", "=", " ", "Allfields"}]}], "}"}], 
      ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"myEcho", "[", 
        RowBox[{"\"\<GetFieldCommutator\>\"", ",", "1"}], "]"}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"Switch", "[", 
        RowBox[{
         RowBox[{"Allfields", "[", 
          RowBox[{"[", 
           RowBox[{"1", ",", "\"\<commutator\>\""}], "]"}], "]"}], ",", 
         "\[IndentingNewLine]", "\[IndentingNewLine]", "\"\<bosonic\>\"", ",",
          " ", 
         RowBox[{
          RowBox[{
           RowBox[{"dummyTypeList", "[", 
            RowBox[{"[", "1", "]"}], "]"}], " ", "=", " ", 
           RowBox[{"Join", "[", 
            RowBox[{
             RowBox[{"dummyTypeList", "[", 
              RowBox[{"[", "1", "]"}], "]"}], ",", 
             RowBox[{"{", 
              RowBox[{"Allfields", "[", 
               RowBox[{"[", 
                RowBox[{"1", ",", "\"\<name\>\""}], "]"}], "]"}], "}"}]}], 
            "]"}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"myEcho", "[", 
           RowBox[{"\"\<bosonic commutator\>\"", ",", "1"}], "]"}], ";"}], 
         ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
         "\[IndentingNewLine]", "\"\<fermionic\>\"", ",", " ", 
         RowBox[{
          RowBox[{
           RowBox[{"dummyTypeList", "[", 
            RowBox[{"[", "2", "]"}], "]"}], " ", "=", " ", 
           RowBox[{"Join", "[", 
            RowBox[{
             RowBox[{"dummyTypeList", "[", 
              RowBox[{"[", "2", "]"}], "]"}], ",", 
             RowBox[{"{", 
              RowBox[{"Allfields", "[", 
               RowBox[{"[", 
                RowBox[{"1", ",", "\"\<name\>\""}], "]"}], "]"}], "}"}]}], 
            "]"}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"myEcho", "[", 
           RowBox[{"\"\<fermionic commutator\>\"", ",", "1"}], "]"}], ";"}]}],
         "\[IndentingNewLine]", "\[IndentingNewLine]", "]"}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"ReducedAllfields", " ", "=", " ", 
        RowBox[{"Drop", "[", 
         RowBox[{"ReducedAllfields", ",", "1"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"GetFieldCommutator", "[", 
        RowBox[{"dummyTypeList", ",", "ReducedAllfields"}], "]"}]}]}], 
     "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"GetFieldCommutator", "[", 
     RowBox[{"TypeList_", ",", 
      RowBox[{"{", "}"}]}], "]"}], " ", ":=", " ", "TypeList"}], 
   "\[IndentingNewLine]"}]}]], "Input",
 CellChangeTimes->{{3.7595624869638844`*^9, 3.7595625193723855`*^9}, {
  3.759562566792014*^9, 3.759562746943043*^9}, {3.7595629670042496`*^9, 
  3.759563021991863*^9}, {3.759563250184437*^9, 3.759563306551078*^9}, {
  3.7595633530416727`*^9, 3.7595637073772545`*^9}, {3.7595637384118433`*^9, 
  3.7595637390098553`*^9}, {3.7618968407050486`*^9, 3.7618968724885244`*^9}, {
  3.7644818331325355`*^9, 3.764481893127324*^9}, {3.7644821613533306`*^9, 
  3.764482212218627*^9}, {3.7712251555964737`*^9, 3.7712251664857216`*^9}, {
  3.7712343022130938`*^9, 3.7712343024630365`*^9}, {3.771312267803276*^9, 
  3.771312317120158*^9}, {3.7713123626887245`*^9, 3.771312394452594*^9}, {
  3.7713124566493454`*^9, 3.7713125201730423`*^9}},
 Background->GrayLevel[0.85],
 CellLabel->"In[27]:=",ExpressionUUID->"506542bd-6226-4c34-a8b3-dfa43db88e24"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TestFieldTypes", " ", "=", " ", 
  RowBox[{"GetFieldCommutator", "[", "fields", "]"}]}]], "Input",
 CellChangeTimes->{{3.764482169611538*^9, 3.7644821763209724`*^9}, 
   3.7713124038563604`*^9, {3.771312962355543*^9, 3.7713129651992702`*^9}},
 CellLabel->"In[31]:=",ExpressionUUID->"cbfa4478-3a2c-4bd0-980f-858832c39f07"],

Cell[CellGroupData[{

Cell[BoxData["\<\"GetFieldCommutator\"\>"], "Echo",
 CellChangeTimes->{
  3.7735504312558823`*^9},ExpressionUUID->"234bee79-1c1f-43ae-b614-\
2f0fd3584dc5"],

Cell[BoxData["\<\"bosonic commutator\"\>"], "Echo",
 CellChangeTimes->{
  3.7735504312558823`*^9},ExpressionUUID->"a04a8868-595e-48f0-bd81-\
47f90e025814"],

Cell[BoxData["\<\"GetFieldCommutator\"\>"], "Echo",
 CellChangeTimes->{
  3.773550431328407*^9},ExpressionUUID->"4c24b048-7ca1-41b7-8343-\
3dce9fd08337"],

Cell[BoxData["\<\"fermionic commutator\"\>"], "Echo",
 CellChangeTimes->{
  3.773550431344122*^9},ExpressionUUID->"6d0d0558-04e9-4074-a0df-\
94f0c05d914c"],

Cell[BoxData["\<\"GetFieldCommutator\"\>"], "Echo",
 CellChangeTimes->{
  3.7735504314089775`*^9},ExpressionUUID->"1ecc0cee-11a1-434f-987c-\
489ee9e70022"],

Cell[BoxData["\<\"fermionic commutator\"\>"], "Echo",
 CellChangeTimes->{
  3.773550431421934*^9},ExpressionUUID->"b1ff7401-6775-48bd-8e65-\
04736a98ff8c"],

Cell[BoxData["\<\"GetFieldCommutator\"\>"], "Echo",
 CellChangeTimes->{
  3.7735504314742427`*^9},ExpressionUUID->"85ebd1f5-a186-4b71-bbb1-\
6543afc67231"],

Cell[BoxData["\<\"fermionic commutator\"\>"], "Echo",
 CellChangeTimes->{
  3.773550431491071*^9},ExpressionUUID->"5c692e84-9c8a-4493-a843-\
ddddd982d5bf"],

Cell[BoxData["\<\"GetFieldCommutator\"\>"], "Echo",
 CellChangeTimes->{
  3.7735504315600204`*^9},ExpressionUUID->"3616237d-462b-4d40-bdeb-\
4ec049837f79"],

Cell[BoxData["\<\"bosonic commutator\"\>"], "Echo",
 CellChangeTimes->{
  3.773550431574575*^9},ExpressionUUID->"e0cd46d3-578c-4d2b-8967-\
fcb6444ca952"],

Cell[BoxData["\<\"GetFieldCommutator\"\>"], "Echo",
 CellChangeTimes->{
  3.773550431662244*^9},ExpressionUUID->"e19c49c9-3773-4d95-974e-\
163777c8811e"],

Cell[BoxData["\<\"bosonic commutator\"\>"], "Echo",
 CellChangeTimes->{
  3.773550431673856*^9},ExpressionUUID->"af116a0a-ab06-488d-8345-\
65c2cd4e4fc4"]
}, Open  ]],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"A", ",", "L", ",", "Lbar"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"c", ",", "cbar", ",", "K"}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.764482176666893*^9, 3.764482214293887*^9}, 
   3.765180289002178*^9, 3.7652656711207595`*^9, {3.765530991304291*^9, 
   3.765531016568334*^9}, 3.7656074930844116`*^9, 3.7661265149966316`*^9, 
   3.766210433888274*^9, 3.7662955376325946`*^9, 3.766488975980216*^9, 
   3.766742413521617*^9, 3.7674406029908113`*^9, 3.767505787659953*^9, 
   3.7679355129534636`*^9, 3.768544575956767*^9, 3.7686341517806425`*^9, 
   3.768803947617697*^9, 3.76881539129417*^9, 3.768887402729967*^9, 
   3.7705387408113565`*^9, 3.7706306511555157`*^9, 3.7710594339170017`*^9, 
   3.77122390377307*^9, {3.771234294089752*^9, 3.771234304635127*^9}, 
   3.771312217666437*^9, {3.77131239782436*^9, 3.771312404796406*^9}, 
   3.771312479041781*^9, 3.771312966571692*^9, 3.772954766071469*^9, 
   3.7730369422311172`*^9, 3.773123557829054*^9, 3.7733822562474585`*^9, 
   3.773462949442492*^9, 3.7735504317606773`*^9},
 CellLabel->"Out[31]=",ExpressionUUID->"d0a4d59c-e9ee-47c7-9b5c-800068d7f6c6"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "define", " ", "the", " ", "possible", " ", "propagators", " ", "for", " ",
     "fields"}], "*)"}], " ", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
    "Adjust", " ", "such", " ", "that", " ", "one", " ", "can", " ", "insert",
      " ", "a", " ", "truncation", " ", 
     RowBox[{"(", "done", ")"}], " ", "and", " ", "vertex", " ", "ordering"}],
     "..."}], "*)"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"Clear", "[", "GetPossibleProps", "]"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"GetPossibleProps", "[", 
     RowBox[{"fieldtypes_", ",", "fields_"}], "]"}], ":=", " ", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"testPosition", ",", " ", 
        RowBox[{"bosonicfields", " ", "=", " ", 
         RowBox[{"{", "}"}]}], ",", "testbosonicfield", ",", " ", 
        RowBox[{"fermionicfields", " ", "=", 
         RowBox[{"{", "}"}]}], ",", "testfermionicfield", ",", 
        RowBox[{"PossibleProps", " ", "=", " ", 
         RowBox[{"{", "}"}]}], ",", 
        RowBox[{"TruncatedPossibleProps", " ", "=", " ", 
         RowBox[{"{", "}"}]}], ",", " ", "PossibleBosonProps", ",", " ", 
        "PossibleFermionProps", ",", "PossibleFermionPropsdummy"}], "}"}], 
      ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"myEcho", "[", 
        RowBox[{"\"\<GetPossibleProps\>\"", ",", "1"}], "]"}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"(*", " ", 
        RowBox[{
        "remove", " ", "BRST", " ", "sources", " ", "from", " ", "possible", 
         " ", "props"}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{
           RowBox[{"testPosition", " ", "=", " ", 
            RowBox[{"Flatten", "@", 
             RowBox[{"Position", "[", 
              RowBox[{
               RowBox[{"fields", "[", 
                RowBox[{"[", 
                 RowBox[{"All", ",", "\"\<name\>\""}], "]"}], "]"}], ",", 
               RowBox[{"fieldtypes", "[", 
                RowBox[{"[", 
                 RowBox[{"1", ",", "#"}], "]"}], "]"}]}], "]"}]}]}], ";", 
           "\[IndentingNewLine]", "\[IndentingNewLine]", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{
              RowBox[{"StringMatchQ", "[", 
               RowBox[{
                RowBox[{"fields", "[", 
                 RowBox[{"[", 
                  RowBox[{
                  "testPosition", ",", "\"\<specs\>\"", ",", 
                   "\"\<fieldtype\>\""}], "]"}], "]"}], ",", 
                RowBox[{"\"\<BRST\>\"", "~~", "___"}]}], "]"}], " ", 
              "\[Equal]", " ", 
              RowBox[{"{", "True", "}"}]}], ",", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"myEcho", "[", 
               RowBox[{"\"\<BRST gives no prop\>\"", ",", "4"}], "]"}], ";"}],
              ",", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"bosonicfields", " ", "=", " ", 
               RowBox[{"Join", "[", 
                RowBox[{"bosonicfields", ",", 
                 RowBox[{"{", 
                  RowBox[{"fieldtypes", "[", 
                   RowBox[{"[", 
                    RowBox[{"1", ",", "#"}], "]"}], "]"}], "}"}]}], "]"}]}], 
              ";", "\[IndentingNewLine]", 
              RowBox[{"myEcho", "[", 
               RowBox[{"\"\<field gives prop\>\"", ",", "4"}], "]"}], ";"}]}],
             "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", ")"}], 
         "&"}], "/@", 
        RowBox[{"Table", "[", 
         RowBox[{"i", ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "1", ",", 
            RowBox[{"Length", "@", 
             RowBox[{"fieldtypes", "[", 
              RowBox[{"[", "1", "]"}], "]"}]}]}], "}"}]}], "]"}]}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{
           RowBox[{"testPosition", " ", "=", " ", 
            RowBox[{"Flatten", "@", 
             RowBox[{"Position", "[", 
              RowBox[{
               RowBox[{"fields", "[", 
                RowBox[{"[", 
                 RowBox[{"All", ",", "\"\<name\>\""}], "]"}], "]"}], ",", 
               RowBox[{"fieldtypes", "[", 
                RowBox[{"[", 
                 RowBox[{"2", ",", "#"}], "]"}], "]"}]}], "]"}]}]}], ";", 
           "\[IndentingNewLine]", "\[IndentingNewLine]", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{
              RowBox[{"StringMatchQ", "[", 
               RowBox[{
                RowBox[{"fields", "[", 
                 RowBox[{"[", 
                  RowBox[{
                  "testPosition", ",", "\"\<specs\>\"", ",", 
                   "\"\<fieldtype\>\""}], "]"}], "]"}], ",", 
                RowBox[{"\"\<BRST\>\"", "~~", "___"}]}], "]"}], " ", 
              "\[Equal]", " ", 
              RowBox[{"{", "True", "}"}]}], ",", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"myEcho", "[", 
               RowBox[{"\"\<BRST gives no prop\>\"", ",", "4"}], "]"}], ";"}],
              ",", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"fermionicfields", " ", "=", " ", 
               RowBox[{"Join", "[", 
                RowBox[{"fermionicfields", ",", 
                 RowBox[{"{", 
                  RowBox[{"fieldtypes", "[", 
                   RowBox[{"[", 
                    RowBox[{"2", ",", "#"}], "]"}], "]"}], "}"}]}], "]"}]}], 
              ";", "\[IndentingNewLine]", 
              RowBox[{"myEcho", "[", 
               RowBox[{"\"\<field gives prop\>\"", ",", "4"}], "]"}], ";"}]}],
             "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", ")"}], 
         "&"}], "/@", 
        RowBox[{"Table", "[", 
         RowBox[{"i", ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "1", ",", 
            RowBox[{"Length", "@", 
             RowBox[{"fieldtypes", "[", 
              RowBox[{"[", "2", "]"}], "]"}]}]}], "}"}]}], "]"}]}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"PossibleBosonProps", " ", "=", " ", 
        RowBox[{"Permutations", "[", 
         RowBox[{
          RowBox[{"Join", "[", 
           RowBox[{"bosonicfields", ",", "bosonicfields"}], "]"}], ",", 
          RowBox[{"{", "2", "}"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"myEcho", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"\"\<Possible Boson Props\>\"", ",", "PossibleBosonProps"}],
           "}"}], ",", "3"}], "]"}], ";", "\[IndentingNewLine]", 
       RowBox[{"PossibleFermionProps", " ", "=", " ", 
        RowBox[{"Permutations", "[", 
         RowBox[{
          RowBox[{"Join", "[", 
           RowBox[{"fermionicfields", ",", "fermionicfields"}], "]"}], ",", 
          RowBox[{"{", "2", "}"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"myEcho", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
          "\"\<Possible Fermion Props\>\"", ",", "PossibleFermionProps"}], 
          "}"}], ",", "3"}], "]"}], ";", "\[IndentingNewLine]", 
       RowBox[{
       "PossibleFermionPropsdummy", " ", "=", " ", "PossibleFermionProps"}], 
       ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{
           RowBox[{"myEcho", "[", 
            RowBox[{
             RowBox[{"{", 
              RowBox[{"\"\<fermion number\>\"", ",", 
               RowBox[{
                RowBox[{"Normal", "[", 
                 RowBox[{
                  RowBox[{"fields", "[", 
                   RowBox[{"[", 
                    RowBox[{
                    RowBox[{"Flatten", "@", 
                    RowBox[{"Position", "[", 
                    RowBox[{
                    RowBox[{"fields", "[", 
                    RowBox[{"[", 
                    RowBox[{"All", ",", "\"\<name\>\""}], "]"}], "]"}], ",", 
                    RowBox[{"PossibleFermionPropsdummy", "[", 
                    RowBox[{"[", 
                    RowBox[{"#", ",", "1"}], "]"}], "]"}]}], "]"}]}], ",", 
                    "\"\<specs\>\"", ",", "\"\<fermionnumber\>\""}], "]"}], 
                   "]"}], "+", 
                  RowBox[{"fields", "[", 
                   RowBox[{"[", 
                    RowBox[{
                    RowBox[{"Flatten", "@", 
                    RowBox[{"Position", "[", 
                    RowBox[{
                    RowBox[{"fields", "[", 
                    RowBox[{"[", 
                    RowBox[{"All", ",", "\"\<name\>\""}], "]"}], "]"}], ",", 
                    RowBox[{"PossibleFermionPropsdummy", "[", 
                    RowBox[{"[", 
                    RowBox[{"#", ",", "2"}], "]"}], "]"}]}], "]"}]}], ",", 
                    "\"\<specs\>\"", ",", "\"\<fermionnumber\>\""}], "]"}], 
                   "]"}]}], "]"}], "[", 
                RowBox[{"[", "1", "]"}], "]"}]}], "}"}], ",", "4"}], "]"}], 
           ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{
                RowBox[{"Normal", "[", 
                 RowBox[{
                  RowBox[{"fields", "[", 
                   RowBox[{"[", 
                    RowBox[{
                    RowBox[{"Flatten", "@", 
                    RowBox[{"Position", "[", 
                    RowBox[{
                    RowBox[{"fields", "[", 
                    RowBox[{"[", 
                    RowBox[{"All", ",", "\"\<name\>\""}], "]"}], "]"}], ",", 
                    RowBox[{"PossibleFermionPropsdummy", "[", 
                    RowBox[{"[", 
                    RowBox[{"#", ",", "1"}], "]"}], "]"}]}], "]"}]}], ",", 
                    "\"\<specs\>\"", ",", "\"\<fermionnumber\>\""}], "]"}], 
                   "]"}], "+", 
                  RowBox[{"fields", "[", 
                   RowBox[{"[", 
                    RowBox[{
                    RowBox[{"Flatten", "@", 
                    RowBox[{"Position", "[", 
                    RowBox[{
                    RowBox[{"fields", "[", 
                    RowBox[{"[", 
                    RowBox[{"All", ",", "\"\<name\>\""}], "]"}], "]"}], ",", 
                    RowBox[{"PossibleFermionPropsdummy", "[", 
                    RowBox[{"[", 
                    RowBox[{"#", ",", "2"}], "]"}], "]"}]}], "]"}]}], ",", 
                    "\"\<specs\>\"", ",", "\"\<fermionnumber\>\""}], "]"}], 
                   "]"}]}], "]"}], "[", 
                RowBox[{"[", "1", "]"}], "]"}], ")"}], "\[Equal]", "0"}], ",",
              "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"myEcho", "[", 
               RowBox[{
                RowBox[{"{", 
                 RowBox[{"\"\<possible prop\>\"", ",", 
                  RowBox[{"PossibleFermionPropsdummy", "[", 
                   RowBox[{"[", "#", "]"}], "]"}]}], "}"}], ",", "4"}], "]"}],
               ";", "\[IndentingNewLine]", "Nothing"}], "\[IndentingNewLine]",
              ",", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"myEcho", "[", 
               RowBox[{
                RowBox[{"{", 
                 RowBox[{"\"\<impossible prop\>\"", ",", 
                  RowBox[{"PossibleFermionPropsdummy", "[", 
                   RowBox[{"[", "#", "]"}], "]"}]}], "}"}], ",", "4"}], "]"}],
               ";", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{"PossibleFermionProps", "[", 
                RowBox[{"[", "#", "]"}], "]"}], " ", "=", " ", 
               "Nothing"}]}]}], "\[IndentingNewLine]", "]"}]}], ")"}], "&"}], 
        "/@", 
        RowBox[{"Table", "[", 
         RowBox[{"i", ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "1", ",", 
            RowBox[{"Length", "@", "PossibleFermionPropsdummy"}]}], "}"}]}], 
         "]"}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"PossibleProps", " ", "=", " ", 
        RowBox[{"Join", "[", 
         RowBox[{"PossibleBosonProps", ",", "PossibleFermionProps"}], "]"}]}],
        ";", "\[IndentingNewLine]", "        ", 
       RowBox[{"(*", 
        RowBox[{"do", " ", "we", " ", "need", " ", "the", " ", "fieldNames", 
         RowBox[{"??", 
          RowBox[{"??", "??"}]}]}], "*)"}], "\[IndentingNewLine]", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"(*", " ", 
        RowBox[{
         RowBox[{
         "if", " ", "a", " ", "Truncation", " ", "is", " ", "specified"}], 
         ",", " ", 
         RowBox[{
         "the", " ", "other", " ", "props", " ", "are", " ", "removed"}]}], 
        " ", "*)"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "@", "Truncation"}], ">", "0"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"myEcho", "[", 
           RowBox[{"\"\<Truncate possible props\>\"", ",", "3"}], "]"}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{
            RowBox[{"(", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"MemberQ", "[", 
                RowBox[{"Truncation", ",", 
                 RowBox[{"{", 
                  RowBox[{"OrderlessPatternSequence", "[", 
                   RowBox[{
                    RowBox[{"PossibleProps", "[", 
                    RowBox[{"[", 
                    RowBox[{"#", ",", "1"}], "]"}], "]"}], ",", 
                    RowBox[{"PossibleProps", "[", 
                    RowBox[{"[", 
                    RowBox[{"#", ",", "2"}], "]"}], "]"}]}], "]"}], "}"}]}], 
                "]"}], ",", "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{"TruncatedPossibleProps", " ", "=", " ", 
                 RowBox[{"Join", "[", 
                  RowBox[{"TruncatedPossibleProps", ",", 
                   RowBox[{"{", 
                    RowBox[{"PossibleProps", "[", 
                    RowBox[{"[", "#", "]"}], "]"}], "}"}]}], "]"}]}], ";"}], 
               "\[IndentingNewLine]", ",", "\[IndentingNewLine]", "Nothing"}],
               "\[IndentingNewLine]", "]"}], ")"}], "&"}], "/@", 
           RowBox[{"Table", "[", 
            RowBox[{"i", ",", 
             RowBox[{"{", 
              RowBox[{"i", ",", "1", ",", 
               RowBox[{"Length", "@", "PossibleProps"}]}], "}"}]}], "]"}]}], 
          ";", "\[IndentingNewLine]", 
          RowBox[{"PossibleProps", " ", "=", " ", "TruncatedPossibleProps"}], 
          ";"}], "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
         "Nothing"}], "\[IndentingNewLine]", "]"}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"Return", "[", "PossibleProps", "]"}], ";"}]}], 
     "\[IndentingNewLine]", "]"}], 
    "                                                                         \
              "}]}]}]], "Input",
 CellChangeTimes->{{3.757758775544303*^9, 3.7577588491209183`*^9}, {
   3.757758924109059*^9, 3.7577589285688343`*^9}, {3.757837288859415*^9, 
   3.757837306638197*^9}, {3.7618967298180857`*^9, 3.761896737796794*^9}, {
   3.7644809691640496`*^9, 3.764480987658299*^9}, {3.7644810216392965`*^9, 
   3.7644810677033896`*^9}, {3.764481118853177*^9, 3.7644811510138454`*^9}, {
   3.764481665150499*^9, 3.764481704044935*^9}, {3.7710595842786922`*^9, 
   3.7710596257426467`*^9}, {3.7710596698257236`*^9, 3.771059670287486*^9}, {
   3.771060045524273*^9, 3.771060051734665*^9}, {3.7712250454942093`*^9, 
   3.771225048869852*^9}, {3.7712334925890684`*^9, 3.7712335156047716`*^9}, 
   3.7713128509051476`*^9, {3.7713129371405315`*^9, 3.7713129399169855`*^9}, {
   3.771312999808451*^9, 3.77131300044154*^9}, {3.7713130347678547`*^9, 
   3.771313043276432*^9}, {3.7713130881081805`*^9, 3.771313089393016*^9}, {
   3.771313262973568*^9, 3.7713133269813786`*^9}, {3.771313375327058*^9, 
   3.771313420393298*^9}, {3.771319079106498*^9, 3.771319107150669*^9}, {
   3.7713192328557205`*^9, 3.771319396142473*^9}, {3.771319427990281*^9, 
   3.7713195384607763`*^9}, {3.7713196044362907`*^9, 3.771319623298833*^9}, {
   3.771319720889779*^9, 3.7713197588851423`*^9}, {3.7713198300585203`*^9, 
   3.77132012236112*^9}, {3.7713201713788557`*^9, 3.771320179963893*^9}, {
   3.7713202656456933`*^9, 3.7713203323013897`*^9}, {3.7729558704264636`*^9, 
   3.7729561211101217`*^9}, {3.7729565177505903`*^9, 
   3.7729565752498407`*^9}, {3.7729566190888753`*^9, 3.772956620561391*^9}, 
   3.772957756075116*^9, {3.7730393548179045`*^9, 3.7730395067325306`*^9}, {
   3.7730398405983286`*^9, 3.773039841152749*^9}, {3.7730398762434597`*^9, 
   3.773040190979291*^9}, {3.7730422232819896`*^9, 3.773042226894036*^9}},
 Background->GrayLevel[0.85],
 CellLabel->
  "In[131]:=",ExpressionUUID->"099d0674-c1cf-4a2d-9a40-bf9935dcd066"],

Cell[BoxData[{
 RowBox[{"Clear", "[", "GetPossBRSTConfigs", "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"GetPossBRSTConfigs", "[", 
    RowBox[{"diagram_", ",", "fields_", ",", "positionBRST_"}], "]"}], " ", ":=",
    " ", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"testPosition", ",", 
       RowBox[{"BRSTfieldNames", " ", "=", " ", 
        RowBox[{"{", "}"}]}], ",", "correspondingFieldReplace", ",", 
       RowBox[{"BRSTIndexSummation", " ", "=", " ", 
        RowBox[{"{", "}"}]}], ",", "RunningIndex1", ",", "BRSTIndexPosition", 
       ",", "indexBRST", ",", " ", "upperIndexReplace", ",", 
       "upperIndexSummation", ",", "TotalBRSTIndexSummation"}], "}"}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"myEcho", "[", 
       RowBox[{"\"\<GetPossBRSTConfigs\>\"", ",", "1"}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"testPosition", " ", "=", " ", 
       RowBox[{"Flatten", "@", 
        RowBox[{"Position", "[", 
         RowBox[{
          RowBox[{"StringMatchQ", "[", 
           RowBox[{
            RowBox[{"fields", "[", 
             RowBox[{"[", 
              RowBox[{"All", ",", "\"\<specs\>\"", ",", "\"\<fieldtype\>\""}],
               "]"}], "]"}], ",", 
            RowBox[{"\"\<BRST\>\"", "~~", "___"}]}], "]"}], ",", "True"}], 
         "]"}]}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"BRSTfieldNames", " ", "=", " ", 
       RowBox[{"fields", "[", 
        RowBox[{"[", 
         RowBox[{"testPosition", ",", "\"\<name\>\""}], "]"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"correspondingFieldReplace", " ", "=", " ", 
       RowBox[{"Flatten", "@", 
        RowBox[{"ArrayReshape", "[", 
         RowBox[{
          RowBox[{"MapThread", "[", 
           RowBox[{"IndexProjection", ",", 
            RowBox[{"{", 
             RowBox[{"BRSTfieldNames", ",", 
              RowBox[{"fields", "[", 
               RowBox[{"[", 
                RowBox[{
                "testPosition", ",", "\"\<specs\>\"", ",", 
                 "\"\<BRSTsource\>\""}], "]"}], "]"}]}], "}"}]}], "]"}], ",", 
          RowBox[{"{", 
           RowBox[{"1", ",", 
            RowBox[{"Length", "@", "BRSTfieldNames"}]}], "}"}]}], "]"}]}]}], 
      ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"myEcho", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
         "\"\<BRST to fields: \>\"", ",", " ", "correspondingFieldReplace"}], 
         "}"}], ",", "3"}], "]"}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"BRSTIndexPosition", " ", "=", " ", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"First", "@", 
           RowBox[{"Flatten", "@", 
            RowBox[{"Position", "[", 
             RowBox[{
              RowBox[{"StringMatchQ", "[", 
               RowBox[{
                RowBox[{"Map", "[", 
                 RowBox[{"ToString", ",", 
                  RowBox[{"diagram", "[", 
                   RowBox[{"[", 
                    RowBox[{
                    RowBox[{"positionBRST", "[", 
                    RowBox[{"[", "#", "]"}], "]"}], ",", "\"\<indices\>\"", 
                    ",", "1"}], "]"}], "]"}]}], "]"}], ",", 
                RowBox[{"_", "~~", "\"\<BRST\>\""}]}], "]"}], ",", "True"}], 
             "]"}]}]}], ")"}], "&"}], "/@", 
        RowBox[{"Table", "[", 
         RowBox[{"i", ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "1", ",", 
            RowBox[{"Length", "@", "positionBRST"}]}], "}"}]}], "]"}]}]}], 
      ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"indexBRST", " ", "=", " ", 
       RowBox[{
        RowBox[{
         RowBox[{"diagram", "[", 
          RowBox[{"[", 
           RowBox[{
            RowBox[{"positionBRST", "[", 
             RowBox[{"[", "#", "]"}], "]"}], ",", "\"\<indices\>\"", ",", "1",
             ",", 
            RowBox[{"BRSTIndexPosition", "[", 
             RowBox[{"[", "#", "]"}], "]"}]}], "]"}], "]"}], "&"}], "/@", 
        RowBox[{"Table", "[", 
         RowBox[{"i", ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "1", ",", 
            RowBox[{"Length", "@", "positionBRST"}]}], "}"}]}], "]"}]}]}], 
      ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "gives", " ", "possibilities", " ", "for", " ", "BRST", " ", "field", 
        " ", "summation"}], "*)"}], "\[IndentingNewLine]", 
      RowBox[{"BRSTIndexSummation", " ", "=", " ", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"ArrayReshape", "[", 
           RowBox[{
            RowBox[{"MapThread", "[", 
             RowBox[{"IndexProjection", ",", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"Table", "[", 
                 RowBox[{
                  RowBox[{"diagram", "[", 
                   RowBox[{"[", 
                    RowBox[{
                    RowBox[{"positionBRST", "[", 
                    RowBox[{"[", "#", "]"}], "]"}], ",", "\"\<indices\>\"", 
                    ",", "1", ",", 
                    RowBox[{"BRSTIndexPosition", "[", 
                    RowBox[{"[", "#", "]"}], "]"}]}], "]"}], "]"}], ",", 
                  RowBox[{"Length", "@", "BRSTfieldNames"}]}], "]"}], ",", 
                "BRSTfieldNames"}], "}"}]}], "]"}], ",", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"Length", "@", "BRSTfieldNames"}], ",", "1"}], "}"}]}], 
           "]"}], ")"}], "&"}], "/@", 
        RowBox[{"Table", "[", 
         RowBox[{"i", ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "1", ",", 
            RowBox[{"Length", "@", "positionBRST"}]}], "}"}]}], "]"}]}]}], 
      ";", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Length", "@", "BRSTIndexSummation"}], ">", "1"}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"BRSTIndexSummation", " ", "=", " ", 
          RowBox[{"ArrayReshape", "[", 
           RowBox[{
            RowBox[{"Tuples", "[", "BRSTIndexSummation", "]"}], ",", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{
               RowBox[{"Length", "@", 
                RowBox[{"BRSTIndexSummation", "[", 
                 RowBox[{"[", "1", "]"}], "]"}]}], "^", "2"}], ",", 
              RowBox[{"2", "*", 
               RowBox[{"Length", "@", "BRSTIndexSummation"}]}]}], "}"}]}], 
           "]"}]}], ";"}], "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
        "Nothing"}], "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"myEcho", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"\"\<BRST Possibilities: \>\"", ",", "BRSTIndexSummation"}], 
         "}"}], ",", "3"}], "]"}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "give", " ", "the", " ", "corresponding", " ", "field", " ", 
        "possibilities", " ", "for", " ", "the", " ", "upper", " ", "index", 
        " ", "which", " ", "belongs", " ", "to", " ", "_BRST"}], "*)"}], 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"upperIndexReplace", " ", "=", " ", 
       RowBox[{"Flatten", "@", 
        RowBox[{"ArrayReshape", "[", 
         RowBox[{
          RowBox[{"MapThread", "[", 
           RowBox[{"IndexProjection", ",", 
            RowBox[{"{", 
             RowBox[{"indexBRST", ",", 
              RowBox[{"ToExpression", "[", 
               RowBox[{"StringDelete", "[", 
                RowBox[{
                 RowBox[{"Map", "[", 
                  RowBox[{"ToString", ",", "indexBRST"}], "]"}], ",", 
                 "\"\<BRST\>\""}], "]"}], "]"}]}], "}"}]}], "]"}], ",", 
          RowBox[{"{", 
           RowBox[{"1", ",", 
            RowBox[{"Length", "@", "indexBRST"}]}], "}"}]}], "]"}]}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"Echo", "[", "upperIndexReplace", "]"}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"upperIndexSummation", " ", "=", " ", 
       RowBox[{
        RowBox[{"BRSTIndexSummation", "/.", "upperIndexReplace"}], "/.", 
        "correspondingFieldReplace"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"myEcho", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
         "\"\<upper Index Possibilities: \>\"", ",", " ", 
          "upperIndexSummation"}], "}"}], ",", "3"}], "]"}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"TotalBRSTIndexSummation", " ", "=", " ", 
       RowBox[{"ArrayReshape", "[", 
        RowBox[{
         RowBox[{"MapThread", "[", 
          RowBox[{"Join", ",", 
           RowBox[{"{", 
            RowBox[{"BRSTIndexSummation", ",", "upperIndexSummation"}], "}"}],
            ",", "2"}], "]"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"Length", "@", 
             RowBox[{"BRSTIndexSummation", "[", 
              RowBox[{"[", "1", "]"}], "]"}]}], "*", 
            RowBox[{"Length", "@", "BRSTIndexSummation"}]}], ",", "2"}], 
          "}"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"myEcho", "[", 
       RowBox[{"{", 
        RowBox[{
        "\"\<total Index Possibilities: \>\"", ",", 
         "TotalBRSTIndexSummation"}], "}"}], "]"}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"Return", "[", "TotalBRSTIndexSummation", "]"}]}]}], 
    "\[IndentingNewLine]", "]"}]}], 
  "                             "}], "\[IndentingNewLine]"}], "Input",
 CellChangeTimes->{{3.7577601604703484`*^9, 3.7577604405272007`*^9}, {
   3.7577620491897955`*^9, 3.7577620507885294`*^9}, {3.758450666751647*^9, 
   3.758450685175504*^9}, {3.7584507461765604`*^9, 3.758450805395933*^9}, {
   3.758450870594549*^9, 3.758450880345656*^9}, {3.765784965193626*^9, 
   3.7657850074960127`*^9}, {3.7657850660116863`*^9, 
   3.7657851118654084`*^9}, {3.765785466188833*^9, 3.7657854958463326`*^9}, {
   3.765785526817211*^9, 3.7657855573329887`*^9}, {3.765785612601758*^9, 
   3.7657856129929457`*^9}, {3.7657895963916817`*^9, 3.765789612315548*^9}, {
   3.765790478709752*^9, 3.7657906159561143`*^9}, {3.7657907090109053`*^9, 
   3.765790711002688*^9}, {3.7657907456663976`*^9, 3.765790770234191*^9}, {
   3.765791169412567*^9, 3.765791181666499*^9}, {3.7657914499645996`*^9, 
   3.765791455135186*^9}, {3.771225104952245*^9, 3.771225114687318*^9}, {
   3.773041032638293*^9, 3.773041059599394*^9}, {3.7730416205233583`*^9, 
   3.7730418230676064`*^9}, {3.7730419120024004`*^9, 3.773042146523861*^9}, {
   3.773042299554874*^9, 3.7730423436368504`*^9}, {3.7730424083242435`*^9, 
   3.7730424285909195`*^9}, {3.773042501381665*^9, 3.773042513750887*^9}, {
   3.7730458782472253`*^9, 3.773046023861928*^9}, {3.7730460639255605`*^9, 
   3.773046082349971*^9}, {3.7730461187348576`*^9, 3.7730461211220903`*^9}, {
   3.7730461558784013`*^9, 3.773046160029862*^9}, {3.7731244722162466`*^9, 
   3.773124495527889*^9}, {3.7731249683929834`*^9, 3.773124978952838*^9}, {
   3.773125368701049*^9, 3.7731253895832605`*^9}, {3.773125425791855*^9, 
   3.773125440479904*^9}, {3.7731258491449127`*^9, 3.773125876481126*^9}, {
   3.7731259865499287`*^9, 3.7731260102708006`*^9}, {3.7731260800503397`*^9, 
   3.7731261097136087`*^9}, {3.773126151596346*^9, 3.7731262061887274`*^9}, {
   3.7731262466414194`*^9, 3.773126300813407*^9}, {3.7731263899790697`*^9, 
   3.7731263902645473`*^9}, {3.77312660838768*^9, 3.773126618884323*^9}, {
   3.7731267557257986`*^9, 3.773126782965834*^9}, {3.773126816366644*^9, 
   3.773126863617676*^9}, {3.773126894122677*^9, 3.7731269616234016`*^9}, {
   3.773127003395808*^9, 3.7731270630033092`*^9}, {3.7731271184252872`*^9, 
   3.7731271208587437`*^9}, {3.7731271810220857`*^9, 3.773127357123968*^9}, {
   3.7731278349715385`*^9, 3.7731278642329507`*^9}, {3.773128048164779*^9, 
   3.773128176862212*^9}, 3.773128214365234*^9, {3.7735558668549123`*^9, 
   3.773555867093518*^9}},
 Background->GrayLevel[0.85],
 CellLabel->
  "In[271]:=",ExpressionUUID->"39be3c02-01d6-440c-ae02-96a7d2b9648e"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TestBRSTIndexSummation", " ", "=", " ", 
  RowBox[{"GetPossBRSTConfigs", "[", 
   RowBox[{
    RowBox[{"AcmSTI", "[", 
     RowBox[{"[", "1", "]"}], "]"}], ",", "fields", ",", " ", 
    "TestpositionBRST"}], "]"}]}]], "Input",
 CellChangeTimes->{{3.7730415373786125`*^9, 3.7730416078889227`*^9}, {
  3.7731270940200624`*^9, 3.7731270948339615`*^9}, {3.7731281478741055`*^9, 
  3.7731281486531796`*^9}, {3.7731281999553204`*^9, 3.773128201708*^9}},
 CellLabel->"In[41]:=",ExpressionUUID->"a73cc2b8-7a25-46f5-9ac9-ad5441920d9f"],

Cell[CellGroupData[{

Cell[BoxData["\<\"GetPossBRSTConfigs\"\>"], "Echo",
 CellChangeTimes->{
  3.7735504483084555`*^9},ExpressionUUID->"b00d1612-a103-4c9f-b5d2-\
d7879830b949"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"4", ",", "5", ",", "6"}], "}"}]], "Echo",
 CellChangeTimes->{
  3.773550448325141*^9},ExpressionUUID->"1cffe5b8-0e11-4993-84bd-\
ef6f8605a89f"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"\<\"BRST to fields: \"\>", ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"K", "\[Rule]", "A"}], ",", 
     RowBox[{"L", "\[Rule]", "c"}], ",", 
     RowBox[{"Lbar", "\[Rule]", "cbar"}]}], "}"}]}], "}"}]], "Echo",
 CellChangeTimes->{
  3.773550448391736*^9},ExpressionUUID->"a57c4229-588b-4709-8386-\
d3fea429b3fd"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"\<\"BRST Possibilities: \"\>", ",", 
   RowBox[{"{", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"iBRST", "\[Rule]", "K"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"iBRST", "\[Rule]", "L"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"iBRST", "\[Rule]", "Lbar"}], "}"}]}], "}"}], "}"}]}], 
  "}"}]], "Echo",
 CellChangeTimes->{
  3.7735504484531093`*^9},ExpressionUUID->"0291fc72-fa85-4ec4-8488-\
931bd13a8afa"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"iBRST", "\[Rule]", "i"}], "}"}]], "Echo",
 CellChangeTimes->{
  3.7735504484531093`*^9},ExpressionUUID->"ae8911e4-4e2d-4ea0-a645-\
fd87db48dee5"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"\<\"upper Index Possibilities: \"\>", ",", 
   RowBox[{"{", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"i", "\[Rule]", "A"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"i", "\[Rule]", "c"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"i", "\[Rule]", "cbar"}], "}"}]}], "}"}], "}"}]}], 
  "}"}]], "Echo",
 CellChangeTimes->{
  3.773550448533473*^9},ExpressionUUID->"b43886e6-ab6b-466a-a60a-\
c10561bcf49e"]
}, Open  ]],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{"iBRST", "\[Rule]", "K"}], ",", 
     RowBox[{"i", "\[Rule]", "A"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"iBRST", "\[Rule]", "L"}], ",", 
     RowBox[{"i", "\[Rule]", "c"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"iBRST", "\[Rule]", "Lbar"}], ",", 
     RowBox[{"i", "\[Rule]", "cbar"}]}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.773128136108572*^9, 3.773128202642366*^9}, 
   3.773382307429017*^9, 3.773462964707966*^9, 3.773550448533473*^9},
 CellLabel->"Out[41]=",ExpressionUUID->"34c1e3ca-18d9-4d0d-bf3e-b700f53232e5"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"This", " ", "function", " ", "is", " ", "not", " ", "used"}], 
   "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"Clear", "[", "BRSTTransformedFields", "]"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"BRSTTransformedFields", "[", 
     RowBox[{"Index_", ",", "fields_"}], "]"}], " ", ":=", " ", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", "dummyIndex", " ", "}"}], ",", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"myEcho", "[", 
        RowBox[{"\"\<BRSTTransformedFields\>\"", ",", "1"}], "]"}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"fields", "[", 
              RowBox[{"[", "#", "]"}], "]"}], "[", 
             RowBox[{"[", "\"\<name\>\"", "]"}], "]"}], " ", "\[Equal]", " ", 
            "Index"}], ",", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"dummyIndex", " ", "=", " ", 
             RowBox[{
              RowBox[{"fields", "[", 
               RowBox[{"[", "#", "]"}], "]"}], "[", 
              RowBox[{"[", "\"\<BRSTsource\>\"", "]"}], "]"}]}], ";"}], 
           "\[IndentingNewLine]", ",", "\[IndentingNewLine]", "Nothing"}], 
          "\[IndentingNewLine]", "]"}], "&"}], "/@", 
        RowBox[{"Table", "[", 
         RowBox[{"runfields", ",", 
          RowBox[{"{", 
           RowBox[{"runfields", ",", "1", ",", 
            RowBox[{"Length", "@", "fields"}]}], "}"}]}], "]"}]}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"Return", "[", "dummyIndex", "]"}]}]}], "\[IndentingNewLine]", 
     "]"}], "                            ", 
    RowBox[{"(*", 
     RowBox[{
     "insert", " ", "this", " ", "into", " ", "the", " ", "check", " ", "for",
       " ", "BRST", " ", "nPoints", " ", "below"}], "*)"}]}]}]}]], "Input",
 CellChangeTimes->{{3.757420440623377*^9, 3.75742044765259*^9}, {
  3.771059360709859*^9, 3.771059422700009*^9}, {3.7710596895020895`*^9, 
  3.7710596901373925`*^9}, {3.771225056042141*^9, 3.771225067918014*^9}, {
  3.77123322402731*^9, 3.7712332258074684`*^9}, {3.7712332572458715`*^9, 
  3.7712332663689685`*^9}},
 Background->RGBColor[
  0.87, 0.94, 1],ExpressionUUID->"2c2b94e8-ca16-4d3e-9d66-0e715494b2ea"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"This", " ", "function", " ", "is", " ", "not", " ", "used"}], 
   "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
   "extracts", " ", "indices", " ", "from", " ", "every", " ", "Diagram"}], 
   "*)"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"Clear", "[", "ExtractIndices", "]"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"ExtractIndices", "[", 
     RowBox[{"RHS_", ",", "externalfields_"}], "]"}], " ", ":=", " ", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"IndicesRHS", ",", "RunningIndex", ",", "externalToNothing"}], 
       "}"}], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"myEcho", "[", 
        RowBox[{"\"\<ExtractIndices\>\"", ",", "1"}], "]"}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"IndicesRHS", " ", "=", " ", 
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{"{", "}"}], ",", 
          RowBox[{"Length", "@", "RHS"}]}], "]"}]}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"Do", "[", "\[IndentingNewLine]", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{
          RowBox[{"IndicesRHS", "[", 
           RowBox[{"[", "RunningIndex", "]"}], "]"}], " ", "=", " ", 
          RowBox[{"(", 
           RowBox[{"Union", "[", 
            RowBox[{
             RowBox[{"Flatten", "@", 
              RowBox[{"IndicesRHS", "[", 
               RowBox[{"[", "RunningIndex", "]"}], "]"}]}], ",", 
             RowBox[{"Flatten", "@", 
              RowBox[{"(", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{
                   RowBox[{
                    RowBox[{"RHS", "[", 
                    RowBox[{"[", "RunningIndex", "]"}], "]"}], "[", 
                    RowBox[{"[", "#", "]"}], "]"}], "[", 
                   RowBox[{"[", "\"\<indices\>\"", "]"}], "]"}], "[", 
                  RowBox[{"[", "1", "]"}], "]"}], "&"}], "/@", 
                RowBox[{"Table", "[", 
                 RowBox[{
                  RowBox[{"i", "+", "1"}], ",", 
                  RowBox[{"{", 
                   RowBox[{"i", ",", 
                    RowBox[{
                    RowBox[{"Length", "@", 
                    RowBox[{"RHS", "[", 
                    RowBox[{"[", "RunningIndex", "]"}], "]"}]}], "-", "1"}]}],
                    "}"}]}], "]"}]}], ")"}]}]}], "]"}], ")"}]}], 
         "\[IndentingNewLine]", "\[IndentingNewLine]", ",", 
         RowBox[{"{", 
          RowBox[{"RunningIndex", ",", "1", ",", 
           RowBox[{"Length", "@", "RHS"}]}], "}"}]}], "\[IndentingNewLine]", 
        "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "@", "externalfields"}], ">", "0"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"externalToNothing", " ", "=", " ", 
           RowBox[{"Evaluate", "[", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{
                RowBox[{"externalfields", "[", 
                 RowBox[{"[", "#", "]"}], "]"}], "\[Rule]", " ", "Nothing"}], 
               ")"}], "&"}], "/@", 
             RowBox[{"Table", "[", 
              RowBox[{"i", ",", 
               RowBox[{"{", 
                RowBox[{"i", ",", 
                 RowBox[{"Length", "@", "externalfields"}]}], "}"}]}], 
              "]"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"IndicesRHS", " ", "=", " ", 
           RowBox[{"IndicesRHS", "/.", 
            RowBox[{"(*", 
             RowBox[{"Evaluate", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"(", 
                 RowBox[{
                  RowBox[{"externalfields", "[", 
                   RowBox[{"[", "#", "]"}], "]"}], "\[Rule]", " ", 
                  "Nothing"}], ")"}], "&"}], "/@", 
               RowBox[{"Table", "[", 
                RowBox[{"i", ",", 
                 RowBox[{"{", 
                  RowBox[{"i", ",", 
                   RowBox[{"Length", "@", "externalfields"}]}], "}"}]}], 
                "]"}]}], "]"}], "*)"}], "externalToNothing"}]}], ";"}], 
         "\[IndentingNewLine]", ",", "\[IndentingNewLine]", "Nothing"}], 
        "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
       RowBox[{"Return", "[", "IndicesRHS", "]"}]}]}], "\[IndentingNewLine]", 
     "]"}], "                                                                 \
                                                                              \
            "}]}]}]], "Input",
 CellChangeTimes->{{3.757757509678093*^9, 3.75775760683538*^9}, {
   3.757758230161667*^9, 3.7577582566892204`*^9}, {3.7577582895527115`*^9, 
   3.7577583162618313`*^9}, 3.757758700501758*^9, {3.757837256348858*^9, 
   3.757837277339321*^9}, {3.757837320024483*^9, 3.75783732190609*^9}, {
   3.757933164113634*^9, 3.757933198287983*^9}, {3.758441173131298*^9, 
   3.758441325732339*^9}, {3.7584413624758844`*^9, 3.7584413682642326`*^9}, {
   3.758441502807454*^9, 3.758441507421568*^9}, {3.7584415471773167`*^9, 
   3.7584415508969593`*^9}, {3.7584415839638004`*^9, 
   3.7584415893760962`*^9}, {3.758441654211401*^9, 3.7584417123896894`*^9}, {
   3.758441996957856*^9, 3.758442075904843*^9}, {3.7584421486413264`*^9, 
   3.758442148901642*^9}, {3.7584423454758825`*^9, 3.7584423496388693`*^9}, {
   3.7584423813508577`*^9, 3.7584424106902714`*^9}, {3.758442466465008*^9, 
   3.758442488214306*^9}, {3.758442552754842*^9, 3.758442638173088*^9}, {
   3.7584477303891926`*^9, 3.7584477883919477`*^9}, {3.7584486623077946`*^9, 
   3.758448666518886*^9}, 3.758449036555721*^9, {3.758449796336102*^9, 
   3.758449819310729*^9}, {3.75845037227977*^9, 3.758450462146598*^9}, {
   3.7597391037221923`*^9, 3.7597391041302357`*^9}, {3.7597391391930447`*^9, 
   3.759739223710322*^9}, {3.7710594803471317`*^9, 3.7710595123596177`*^9}, {
   3.7710596771740646`*^9, 3.771059685308305*^9}, {3.7710600869644213`*^9, 
   3.771060097072481*^9}, {3.771060202782833*^9, 3.7710602696519594`*^9}, {
   3.7712250354620113`*^9, 3.771225040134705*^9}, {3.7712333647460957`*^9, 
   3.7712333721211634`*^9}, {3.771312700183864*^9, 3.7713127036107984`*^9}, {
   3.771312792424161*^9, 3.771312798318242*^9}},
 Background->RGBColor[
  0.87, 0.94, 1],ExpressionUUID->"74d864cf-6ccd-4aff-b04b-bc762855f443"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"ExtractIndices", "[", 
  RowBox[{"AcWettEq", ",", 
   RowBox[{"DerivativeList", "[", 
    RowBox[{"[", 
     RowBox[{"All", ",", "0"}], "]"}], "]"}]}], "]"}]], "Input",
 CellChangeTimes->{{3.758441690800116*^9, 3.7584416980996065`*^9}, {
  3.7712334473067255`*^9, 3.7712334570256147`*^9}, {3.7713126698354235`*^9, 
  3.7713126756936455`*^9}},ExpressionUUID->"93b4efa5-5c8a-41a6-84fc-\
f5e5850b2368"],

Cell[BoxData["\<\"ExtractIndices\"\>"], "Echo",
 CellChangeTimes->{
  3.771233457447364*^9},ExpressionUUID->"996dc7e4-195b-4bff-9b56-\
8f4cdbdb8a6e"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
    "i", ",", "i$99672", ",", "i$99673", ",", "i$99676", ",", "i$99677", ",", 
     "j", ",", "k", ",", "l"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
    "i", ",", "i$99672", ",", "i$99673", ",", "j", ",", "k", ",", "l"}], 
    "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
    "i", ",", "i$99672", ",", "i$99673", ",", "i$99678", ",", "i$99679", ",", 
     "j", ",", "k", ",", "l"}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.7584420230666227`*^9, 3.758442082709772*^9}, 
   3.75844215255019*^9, 3.75844235316671*^9, 3.7584424133533573`*^9, 
   3.7584424915867424`*^9, {3.7584425642129183`*^9, 3.758442574996386*^9}, {
   3.758442612809718*^9, 3.7584426268519506`*^9}, 3.7584477941826553`*^9, 
   3.7584504681194067`*^9, 3.7585188294269886`*^9, 3.7588735988484187`*^9, 
   3.7590570693449697`*^9, 3.759131438053364*^9, 3.759150651365375*^9, 
   3.7592170534920588`*^9, 3.759221946114581*^9, 3.759484903834405*^9, 
   3.759495264041092*^9, 3.759562447351787*^9, 3.7596444539558535`*^9, 
   3.759654525309513*^9, 3.7597360355482826`*^9, 3.7610380653970747`*^9, 
   3.7612826900923986`*^9, 3.7613053235053606`*^9, 3.761386018033313*^9, 
   3.7614552937453613`*^9, 3.7618965976824017`*^9, {3.76276874761512*^9, 
   3.762768762740144*^9}, 3.764479427289032*^9, 3.7651802871193647`*^9, 
   3.7652656689676275`*^9, 3.7655309846901417`*^9, 3.7656074901342974`*^9, 
   3.7661265122304864`*^9, 3.7662104313520546`*^9, 3.7662955354753647`*^9, 
   3.7664889746829467`*^9, 3.7667424112307477`*^9, 3.7674406007677393`*^9, 
   3.7675057813890247`*^9, 3.767935511010038*^9, 3.768544572006044*^9, 
   3.768634149433078*^9, 3.768803943019346*^9, 3.7688153889106073`*^9, 
   3.7688874008669157`*^9, 3.770538738305396*^9, 3.7706306500315228`*^9, 
   3.7710594327531147`*^9, 3.771223901694604*^9, 3.7712334574630175`*^9},
 CellLabel->
  "Out[415]=",ExpressionUUID->"6721aa39-28f4-4629-b1df-5b6e4c7b31d9"]
}, Closed]],

Cell[BoxData[{
 RowBox[{"Clear", "[", "GetFieldNames", "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"GetFieldNames", "[", "fields_", "]"}], ":=", " ", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"fieldNames", " ", "=", " ", 
      RowBox[{"{", "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"myEcho", "[", 
      RowBox[{"\"\<GetFieldNames\>\"", ",", "1"}], "]"}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"fieldNames", " ", "=", " ", 
      RowBox[{"Join", "[", 
       RowBox[{"fieldNames", ",", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"fields", "[", 
            RowBox[{"[", "#", "]"}], "]"}], "[", 
           RowBox[{"[", "\"\<name\>\"", "]"}], "]"}], "&"}], "/@", 
         RowBox[{"Table", "[", 
          RowBox[{"i", ",", 
           RowBox[{"{", 
            RowBox[{"i", ",", 
             RowBox[{"Length", "@", "fields"}]}], "}"}]}], "]"}]}]}], "]"}]}],
      ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"Return", "[", "fieldNames", "]"}], ";"}]}], 
   "\[IndentingNewLine]", "]"}], 
  "                                                                           \
          "}]}], "Input",
 CellChangeTimes->{{3.7578519139858723`*^9, 3.7578519966094456`*^9}, {
   3.7584505422243614`*^9, 3.7584506037731256`*^9}, {3.771059666854669*^9, 
   3.771059667488974*^9}, {3.7710600347869954`*^9, 3.771060040536615*^9}, {
   3.7712250797471027`*^9, 3.7712250850910215`*^9}, 3.7712340545117874`*^9},
 Background->RGBColor[
  0.87, 0.94, 1],ExpressionUUID->"eb6b065e-1663-42b0-ade1-c4314369aa08"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"GetFieldNames", "[", "fields", "]"}]], "Input",
 CellChangeTimes->{{3.758450534874349*^9, 3.7584505390107994`*^9}},
 CellLabel->
  "In[421]:=",ExpressionUUID->"19c736c7-d160-4113-9429-9ee054ca837a"],

Cell[BoxData["\<\"GetFieldNames\"\>"], "Echo",
 CellChangeTimes->{
  3.771234049636429*^9},ExpressionUUID->"3ffd430a-8da4-413c-a320-\
2ce8ba43fd12"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"A", ",", "c", ",", "cbar"}], "}"}]], "Output",
 CellChangeTimes->{
  3.7584505393130198`*^9, {3.7584505882692027`*^9, 3.75845059757158*^9}, 
   3.75845358673005*^9, {3.7590397188879995`*^9, 3.759039721233057*^9}, 
   3.759057069549314*^9, 3.7591314382378407`*^9, 3.759150651586585*^9, 
   3.7592170536037335`*^9, 3.7592219463176637`*^9, 3.7594849040218306`*^9, 
   3.759495264161767*^9, 3.7595624475517735`*^9, 3.75964445427536*^9, 
   3.7596545254970026`*^9, 3.7597360358138437`*^9, 3.761038065490802*^9, 
   3.761282690311096*^9, 3.7613053236469817`*^9, 3.761386018161969*^9, 
   3.761455293964059*^9, 3.761896597838643*^9, {3.762768747840303*^9, 
   3.762768762951441*^9}, 3.7644794275360394`*^9, 3.7651802872795725`*^9, 
   3.765265669469081*^9, 3.7655309854400916`*^9, 3.7656074903257856`*^9, 
   3.7661265124491844`*^9, 3.7662104315056458`*^9, 3.7662955356538877`*^9, 
   3.7664889747923245`*^9, 3.7667424115469007`*^9, 3.7674406010370665`*^9, 
   3.7675057818666744`*^9, 3.7679355111889954`*^9, 3.768544572381543*^9, 
   3.768634149727229*^9, 3.7688039435666175`*^9, 3.768815389152936*^9, 
   3.768887401096301*^9, 3.7705387385686903`*^9, 3.77063065035067*^9, 
   3.7710594330034447`*^9, 3.771223901866435*^9, 3.771234049652048*^9},
 CellLabel->
  "Out[421]=",ExpressionUUID->"e4164094-ac8a-4c5f-905c-710fb400883d"]
}, Open  ]],

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", "\[IndentingNewLine]"}]], "Input",
 CellChangeTimes->{{3.7578375913534775`*^9, 3.757837591483509*^9}},
 CellLabel->"In[22]:=",ExpressionUUID->"35ac357d-41d6-4c8a-ad35-b212bc951c8b"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "kick", " ", "out", " ", "all", " ", "impossible", " ", "regulator", " ", 
    "AND", " ", "BRST", " ", "index", " ", "configurations"}], "*)"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"Clear", "[", "CheckbothConfig", "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"CheckbothConfig", "[", 
     RowBox[{
     "RunningIndex_", ",", "RegulatorIndices_", ",", " ", "BRSTIndices_", ",",
       "VertexIndices_", ",", "CombinedIndexConfigs_", ",", 
      "PossibleRegulators_"}], "]"}], " ", ":=", " ", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "TestIndices", ",", " ", "BRSTTestIndices", ",", "TestVertexIndices", 
        ",", " ", "RunningIndex1", ",", " ", "RunningIndex2", ",", 
        RowBox[{"Combineddummy", "=", "CombinedIndexConfigs"}], ",", 
        "dummyEntry", ",", " ", "seq", ",", "seq2", ",", " ", "TestConfig"}], 
       "}"}], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"myEcho", "[", 
        RowBox[{"\"\<CheckbothConfigs\>\"", ",", "1"}], "]"}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"For", "[", 
        RowBox[{
         RowBox[{"RunningIndex1", " ", "=", " ", "1"}], ",", " ", 
         RowBox[{"RunningIndex1", " ", "\[LessEqual]", " ", 
          RowBox[{"Length", "@", 
           RowBox[{"CombinedIndexConfigs", "[", 
            RowBox[{"[", "RunningIndex", "]"}], "]"}]}]}], ",", " ", 
         RowBox[{"RunningIndex1", "++"}], ",", "\[IndentingNewLine]", 
         "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"BRSTTestIndices", " ", "=", " ", 
           RowBox[{"BRSTIndices", "[", 
            RowBox[{"[", 
             RowBox[{"RunningIndex", ",", "RunningIndex1"}], "]"}], "]"}]}], 
          ";", "\[IndentingNewLine]", 
          RowBox[{"TestVertexIndices", " ", "=", " ", 
           RowBox[{"VertexIndices", "[", 
            RowBox[{"[", 
             RowBox[{"RunningIndex", ",", "RunningIndex1"}], "]"}], "]"}]}], 
          ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
          "\[IndentingNewLine]", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"TestVertexIndices", " ", "\[NotEqual]", " ", 
             RowBox[{"{", "}"}]}], ",", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"For", "[", 
              RowBox[{
               RowBox[{"RunningIndex2", "=", "1"}], ",", " ", 
               RowBox[{"RunningIndex2", "\[LessEqual]", 
                RowBox[{"Length", "@", "TestVertexIndices"}]}], ",", " ", 
               RowBox[{"RunningIndex2", "++"}], ",", "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{
                 RowBox[{"TestVertexIndices", "[", 
                  RowBox[{"[", "RunningIndex2", "]"}], "]"}], " ", "=", " ", 
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{"TestVertexIndices", "[", 
                    RowBox[{"[", "RunningIndex2", "]"}], "]"}], "/.", 
                   RowBox[{
                    RowBox[{"{", "seq2___", "}"}], "\[Rule]", " ", 
                    RowBox[{
                    "OrderlessPatternSequence", "[", "seq2", "]"}]}]}], 
                  "}"}]}], ";"}]}], "\[IndentingNewLine]", "]"}], ";", 
             "\[IndentingNewLine]", "\[IndentingNewLine]", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"Length", "@", 
                 RowBox[{"RegulatorIndices", "[", 
                  RowBox[{"[", "RunningIndex", "]"}], "]"}]}], ">", "0"}], 
               ",", "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{"TestIndices", " ", "=", " ", 
                 RowBox[{"RegulatorIndices", "[", 
                  RowBox[{"[", 
                   RowBox[{"RunningIndex", ",", " ", "RunningIndex1"}], "]"}],
                   "]"}]}], ";", "\[IndentingNewLine]", 
                RowBox[{"TestConfig", " ", "=", " ", 
                 RowBox[{"Join", "[", 
                  RowBox[{
                   RowBox[{"{", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{"PossibleRegulators", ",", "TestIndices"}], " ", 
                    "]"}], ",", 
                    RowBox[{"MemberQ", "[", 
                    RowBox[{"SymbolicBRSTVertices", ",", 
                    RowBox[{"{", 
                    RowBox[{"BRSTTestIndices", "/.", 
                    RowBox[{
                    RowBox[{"{", "seq___", "}"}], "\[Rule]", 
                    RowBox[{"OrderlessPatternSequence", "[", "seq", "]"}]}]}],
                     "}"}]}], "]"}]}], "}"}], ",", 
                   RowBox[{"MapThread", "[", 
                    RowBox[{"MemberQ", ",", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"Table", "[", 
                    RowBox[{"SymbolicVertices", ",", 
                    RowBox[{"Length", "@", "TestVertexIndices"}]}], "]"}], 
                    ",", " ", "TestVertexIndices"}], "}"}]}], "]"}]}], 
                  "]"}]}], ";"}], "\[IndentingNewLine]", ",", 
               "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{"TestConfig", " ", "=", " ", 
                 RowBox[{"Join", "[", 
                  RowBox[{
                   RowBox[{"{", 
                    RowBox[{"MemberQ", "[", 
                    RowBox[{"SymbolicBRSTVertices", ",", 
                    RowBox[{"{", 
                    RowBox[{"BRSTTestIndices", "/.", 
                    RowBox[{
                    RowBox[{"{", "seq___", "}"}], "\[Rule]", 
                    RowBox[{"OrderlessPatternSequence", "[", "seq", "]"}]}]}],
                     "}"}]}], "]"}], "}"}], ",", 
                   RowBox[{"MapThread", "[", 
                    RowBox[{"MemberQ", ",", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"Table", "[", 
                    RowBox[{"SymbolicVertices", ",", 
                    RowBox[{"Length", "@", "TestVertexIndices"}]}], "]"}], 
                    ",", " ", "TestVertexIndices"}], "}"}]}], "]"}]}], 
                  "]"}]}], ";"}]}], "\[IndentingNewLine]", 
              "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
             "\[IndentingNewLine]", "\[IndentingNewLine]", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"TestConfig", " ", "\[Equal]", " ", 
                RowBox[{"Table", "[", 
                 RowBox[{"True", ",", 
                  RowBox[{"Length", "@", "TestConfig"}]}], "]"}]}], ",", 
               "\[IndentingNewLine]", 
               RowBox[{"Nothing", ";"}], "\[IndentingNewLine]", 
               "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
               "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{
                 RowBox[{"Combineddummy", "[", 
                  RowBox[{"[", 
                   RowBox[{"RunningIndex", ",", "RunningIndex1"}], "]"}], 
                  "]"}], " ", "=", " ", "\"\<dummyEntry\>\""}], ";"}]}], 
              "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", ",", 
            "\[IndentingNewLine]", "\[IndentingNewLine]", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"MemberQ", "[", 
                RowBox[{"PossibleRegulators", ",", "TestIndices"}], " ", 
                "]"}], "&&", 
               RowBox[{"MemberQ", "[", 
                RowBox[{"SymbolicBRSTVertices", ",", 
                 RowBox[{"{", 
                  RowBox[{"BRSTTestIndices", "/.", 
                   RowBox[{
                    RowBox[{"{", "seq___", "}"}], "\[Rule]", 
                    RowBox[{"OrderlessPatternSequence", "[", "seq", "]"}]}]}],
                   "}"}]}], "]"}]}], ",", "\[IndentingNewLine]", 
              RowBox[{"Nothing", ";"}], "\[IndentingNewLine]", 
              "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
              "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{
                RowBox[{"Combineddummy", "[", 
                 RowBox[{"[", 
                  RowBox[{"RunningIndex", ",", "RunningIndex1"}], "]"}], 
                 "]"}], " ", "=", " ", "\"\<dummyEntry\>\""}], ";"}]}], 
             "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", "]"}]}]}],
         "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"Return", "[", 
        RowBox[{
         RowBox[{"Combineddummy", "[", 
          RowBox[{"[", "RunningIndex", "]"}], "]"}], "/.", 
         RowBox[{"dummyEntry", "\[Rule]", "Nothing"}]}], "]"}]}]}], 
     "\[IndentingNewLine]", "]"}]}]}]}]], "Input",
 CellChangeTimes->{{3.7577608534408455`*^9, 3.7577610561160173`*^9}, {
   3.757761778511882*^9, 3.757761784394025*^9}, {3.757761927019028*^9, 
   3.757761954364153*^9}, {3.7577625073471613`*^9, 3.7577625529002905`*^9}, {
   3.757762617434273*^9, 3.757762631394833*^9}, {3.7577626784537916`*^9, 
   3.7577626866406126`*^9}, {3.7577627780334935`*^9, 
   3.7577627886250205`*^9}, {3.757836123186236*^9, 3.7578361284617357`*^9}, {
   3.757836248732407*^9, 3.7578362517026625`*^9}, {3.7578364715058413`*^9, 
   3.7578364967275453`*^9}, {3.757836572417348*^9, 3.7578366035938663`*^9}, {
   3.757836687278533*^9, 3.7578366988804684`*^9}, 3.757836740849797*^9, {
   3.7578367758306007`*^9, 3.757836798435089*^9}, {3.7578371858780518`*^9, 
   3.7578372043893814`*^9}, 3.7578373436576633`*^9, {3.7578382608678713`*^9, 
   3.757838272962781*^9}, {3.7578534709540033`*^9, 3.7578534874323807`*^9}, 
   3.7579332006806116`*^9, 3.7579332344162436`*^9, {3.757933315229732*^9, 
   3.7579333174542894`*^9}, {3.757933381745676*^9, 3.7579333999741364`*^9}, {
   3.757935202463704*^9, 3.757935229398782*^9}, {3.757937555716342*^9, 
   3.757937720611619*^9}, {3.7579384756091347`*^9, 3.757938516038378*^9}, {
   3.7579385608851833`*^9, 3.757938615036069*^9}, {3.757938923885192*^9, 
   3.7579390997647405`*^9}, {3.75793915434179*^9, 3.7579391670678496`*^9}, {
   3.7579392726747065`*^9, 3.757939325322998*^9}, {3.7579395816215663`*^9, 
   3.7579396253509083`*^9}, {3.7579405891463194`*^9, 
   3.7579406839482126`*^9}, {3.757940890408815*^9, 3.757940902145547*^9}, {
   3.7579409823103127`*^9, 3.7579409900554504`*^9}, {3.7579411118088946`*^9, 
   3.7579411136999226`*^9}, {3.7579414307379217`*^9, 
   3.7579414691238585`*^9}, {3.757941545589282*^9, 3.757941587383749*^9}, {
   3.757941691944214*^9, 3.7579417009550033`*^9}, {3.7579419424696975`*^9, 
   3.75794194354491*^9}, {3.7579419981577044`*^9, 3.7579420014722385`*^9}, {
   3.765792870090479*^9, 3.7657929425719466`*^9}, {3.7657935570776787`*^9, 
   3.765793564739852*^9}, {3.7657936549537363`*^9, 3.7657938229211006`*^9}, {
   3.765793903974888*^9, 3.765794095476761*^9}, {3.7657941656034517`*^9, 
   3.7657942734443064`*^9}, 3.7657943165668507`*^9, {3.76579466931239*^9, 
   3.765794676985325*^9}, {3.771225117906441*^9, 3.7712251262974887`*^9}, {
   3.7712342266352434`*^9, 3.771234229807266*^9}, {3.771234648275079*^9, 
   3.771234653807211*^9}},
 Background->RGBColor[0.87, 0.94, 1],
 CellLabel->
  "In[436]:=",ExpressionUUID->"d9beed58-23ef-46f2-8786-bd232f7ca50b"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "kick", " ", "out", " ", "all", " ", "impossible", " ", "regulator", " ", 
    "index", " ", "configurations"}], "*)"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"Clear", "[", "CheckRegConfig", "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"CheckRegConfig", "[", 
     RowBox[{
     "RunningIndex_", ",", "RegulatorIndices_", ",", " ", "VertexIndices_", 
      ",", " ", "CombinedIndexConfigs_", ",", "PossibleRegulators_"}], "]"}], 
    " ", ":=", " ", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "TestIndices", ",", "TestVertexIndices", ",", " ", "RunningIndex2", 
        ",", 
        RowBox[{"Combineddummy", "=", "CombinedIndexConfigs"}], ",", 
        "dummyEntry", ",", " ", "TestConfig", ",", " ", "seq2"}], "}"}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"myEcho", "[", 
        RowBox[{"\"\<CheckRegConfig\>\"", ",", "1"}], "]"}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{
           RowBox[{"TestIndices", " ", "=", " ", 
            RowBox[{"RegulatorIndices", "[", 
             RowBox[{"[", 
              RowBox[{"RunningIndex", ",", " ", "#"}], "]"}], "]"}]}], ";", 
           "\[IndentingNewLine]", 
           RowBox[{"TestVertexIndices", " ", "=", " ", 
            RowBox[{"VertexIndices", "[", 
             RowBox[{"[", 
              RowBox[{"RunningIndex", ",", "#"}], "]"}], "]"}]}], ";", 
           "\[IndentingNewLine]", "\[IndentingNewLine]", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"TestVertexIndices", " ", "\[NotEqual]", " ", 
              RowBox[{"{", "}"}]}], ",", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"For", "[", 
               RowBox[{
                RowBox[{"RunningIndex2", "=", "1"}], ",", " ", 
                RowBox[{"RunningIndex2", "\[LessEqual]", 
                 RowBox[{"Length", "@", "TestVertexIndices"}]}], ",", " ", 
                RowBox[{"RunningIndex2", "++"}], ",", "\[IndentingNewLine]", 
                "\[IndentingNewLine]", 
                RowBox[{
                 RowBox[{
                  RowBox[{"TestVertexIndices", "[", 
                   RowBox[{"[", "RunningIndex2", "]"}], "]"}], " ", "=", " ", 
                  RowBox[{"{", 
                   RowBox[{
                    RowBox[{"TestVertexIndices", "[", 
                    RowBox[{"[", "RunningIndex2", "]"}], "]"}], "/.", 
                    RowBox[{
                    RowBox[{"{", "seq2___", "}"}], "\[Rule]", " ", 
                    RowBox[{
                    "OrderlessPatternSequence", "[", "seq2", "]"}]}]}], 
                   "}"}]}], ";"}]}], "\[IndentingNewLine]", "]"}], ";", 
              "\[IndentingNewLine]", "\[IndentingNewLine]", 
              "\[IndentingNewLine]", 
              RowBox[{"TestConfig", " ", "=", " ", 
               RowBox[{"Join", "[", 
                RowBox[{
                 RowBox[{"{", 
                  RowBox[{"MemberQ", "[", 
                   RowBox[{"PossibleRegulators", ",", "TestIndices"}], " ", 
                   "]"}], "}"}], ",", 
                 RowBox[{"MapThread", "[", 
                  RowBox[{"MemberQ", ",", 
                   RowBox[{"{", 
                    RowBox[{
                    RowBox[{"Table", "[", 
                    RowBox[{"SymbolicVertices", ",", 
                    RowBox[{"Length", "@", "TestVertexIndices"}]}], "]"}], 
                    ",", " ", "TestVertexIndices"}], "}"}]}], "]"}]}], 
                "]"}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
              RowBox[{"If", "[", 
               RowBox[{
                RowBox[{"TestConfig", " ", "\[Equal]", " ", 
                 RowBox[{"Table", "[", 
                  RowBox[{"True", ",", 
                   RowBox[{"Length", "@", "TestConfig"}]}], "]"}]}], ",", 
                "\[IndentingNewLine]", 
                RowBox[{"Nothing", ";"}], "\[IndentingNewLine]", ",", 
                "\[IndentingNewLine]", 
                RowBox[{
                 RowBox[{
                  RowBox[{"Combineddummy", "[", 
                   RowBox[{"[", 
                    RowBox[{"RunningIndex", ",", "#"}], "]"}], "]"}], " ", 
                  "=", " ", "\"\<dummyEntry\>\""}], ";"}]}], 
               "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", ",", 
             "\[IndentingNewLine]", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"MemberQ", "[", 
                 RowBox[{"PossibleRegulators", ",", "TestIndices"}], " ", 
                 "]"}], "\[Equal]", " ", "True"}], ",", "\[IndentingNewLine]",
                "\[IndentingNewLine]", 
               RowBox[{"Nothing", ";"}], "\[IndentingNewLine]", ",", 
               "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{
                 RowBox[{"Combineddummy", "[", 
                  RowBox[{"[", 
                   RowBox[{"RunningIndex", ",", "#"}], "]"}], "]"}], " ", "=",
                  " ", "\"\<dummyEntry\>\""}], ";"}]}], "\[IndentingNewLine]",
               "]"}]}], "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]",
           ")"}], "&"}], "/@", 
        RowBox[{"Table", "[", 
         RowBox[{"i", ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "1", ",", 
            RowBox[{"Length", "@", 
             RowBox[{"RegulatorIndices", "[", 
              RowBox[{"[", "RunningIndex", "]"}], "]"}]}]}], "}"}]}], "]"}]}],
        ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", 
       RowBox[{"Return", "[", 
        RowBox[{
         RowBox[{"Combineddummy", "[", 
          RowBox[{"[", "RunningIndex", "]"}], "]"}], "/.", 
         RowBox[{"dummyEntry", "\[Rule]", "Nothing"}]}], "]"}]}]}], 
     "\[IndentingNewLine]", "]"}]}]}]}]], "Input",
 CellChangeTimes->{{3.7578382768980384`*^9, 3.757838304817624*^9}, {
   3.7579333197930126`*^9, 3.75793332254041*^9}, {3.7579357710695124`*^9, 
   3.7579357754259777`*^9}, 3.7579358998348703`*^9, {3.757942208051463*^9, 
   3.757942343944494*^9}, {3.7584509145853834`*^9, 3.7584509572425776`*^9}, {
   3.7584509955513277`*^9, 3.758451000447939*^9}, {3.758451033806485*^9, 
   3.758451041650913*^9}, {3.7584536150698023`*^9, 3.758453615721856*^9}, {
   3.7584538276425104`*^9, 3.758453852970664*^9}, 3.758453919151597*^9, {
   3.7584542202779675`*^9, 3.758454247744144*^9}, {3.7710597142050076`*^9, 
   3.7710597652695117`*^9}, {3.7710599810349197`*^9, 3.77105998705247*^9}, {
   3.771225130704296*^9, 3.7712251330477495`*^9}, {3.7712342457755136`*^9, 
   3.7712342484948072`*^9}, {3.7712346589797015`*^9, 3.771234664511074*^9}},
 Background->RGBColor[0.87, 0.94, 1],
 CellLabel->
  "In[438]:=",ExpressionUUID->"fec8847d-9c91-4a70-bf8c-aecd1804fa00"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"Clear", "[", "SortBRSTVertices", "]"}], " ", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
     RowBox[{
     "This", " ", "works", " ", "so", " ", "far", " ", "only", " ", "for", 
      " ", "one", " ", "BRST", " ", "vertex", " ", "in", " ", "each", " ", 
      "diagram"}], "..."}], "."}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SortBRSTVertices", "[", 
   RowBox[{
   "RHS_", ",", "RunningIndex_", ",", "CombinedIndexConfigs_", ",", " ", 
    "PositionBRST_", ",", "NewBRSTVertexIndices_", ",", "FieldTypes_", ",", 
    "fields_", ",", "BRSTfields___"}], "]"}], " ", ":=", " ", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"RHSdummy", " ", ",", " ", 
      RowBox[{"OrderedIndexConfigs", " ", "=", " ", 
       RowBox[{"Table", "[", 
        RowBox[{"Null", ",", 
         RowBox[{"Length", "@", "CombinedIndexConfigs"}]}], "]"}]}], ",", 
      "Sign", ",", " ", "TotalSign", ",", "  ", "RunningIndex1", ",", 
      "RunningIndex2", ",", "  ", 
      RowBox[{"dummyNewBRSTVert", " ", "=", " ", "NewBRSTVertexIndices"}], 
      ",", " ", "OldOrderingBRST", ",", " ", "NewOrderingBRST", ",", 
      "BRSTIndiceszero"}], "}"}], ",", "\[IndentingNewLine]", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"myEcho", "[", 
      RowBox[{"\"\<SortBRSTVertices\>\"", ",", "1"}], "]"}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"TotalSign", " ", "=", " ", 
      RowBox[{"Table", "[", 
       RowBox[{"1", ",", 
        RowBox[{"Length", "@", "RHS"}]}], "]"}]}], ";", "\[IndentingNewLine]",
      "\[IndentingNewLine]", 
     RowBox[{"RHSdummy", " ", "=", " ", 
      RowBox[{"RHS", "[", 
       RowBox[{"[", "RunningIndex", "]"}], "]"}]}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
       RowBox[{"Echo", "[", "RHSdummy", "]"}], ";", "\[IndentingNewLine]", 
       RowBox[{"Echo", "[", 
        RowBox[{"CombinedIndexConfigs", "[", 
         RowBox[{"[", "RunningIndex", "]"}], "]"}], "]"}], ";"}], "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"dummyNewBRSTVert", "[", 
       RowBox[{"[", "RunningIndex", "]"}], "]"}], " ", "=", " ", 
      RowBox[{"Table", "[", 
       RowBox[{"Null", ",", 
        RowBox[{"Length", "@", 
         RowBox[{"CombinedIndexConfigs", "[", 
          RowBox[{"[", "RunningIndex", "]"}], "]"}]}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"For", "[", 
      RowBox[{
       RowBox[{"RunningIndex1", "=", "1"}], ",", " ", 
       RowBox[{"RunningIndex1", "\[LessEqual]", 
        RowBox[{"Length", "@", 
         RowBox[{"CombinedIndexConfigs", "[", 
          RowBox[{"[", "RunningIndex", "]"}], "]"}]}]}], ",", " ", 
       RowBox[{"RunningIndex1", "++"}], ",", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"BRSTIndiceszero", " ", "=", "  ", 
         RowBox[{"RHSdummy", "[", 
          RowBox[{"[", 
           RowBox[{"1", ",", 
            RowBox[{"PositionBRST", "[", 
             RowBox[{"[", "RunningIndex", "]"}], "]"}], ",", 
            "\"\<indices\>\""}], "]"}], "]"}]}], ";", " ", 
        RowBox[{"(*", 
         RowBox[{"RunningIndex", "\[Rule]", "1"}], "*)"}], 
        "\[IndentingNewLine]", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"dummyNewBRSTVert", "[", 
          RowBox[{"[", 
           RowBox[{"RunningIndex", ",", "RunningIndex1"}], "]"}], "]"}], " ", 
         "=", " ", 
         RowBox[{
          RowBox[{"RHSdummy", "[", 
           RowBox[{"[", 
            RowBox[{"1", ",", 
             RowBox[{"PositionBRST", "[", 
              RowBox[{"[", "RunningIndex", "]"}], "]"}], ",", 
             "\"\<indices\>\""}], 
            RowBox[{"(*", 
             RowBox[{",", "1"}], "*)"}], "]"}], "]"}], "/.", 
          RowBox[{"CombinedIndexConfigs", "[", 
           RowBox[{"[", 
            RowBox[{"RunningIndex", ",", " ", "RunningIndex1"}], "]"}], 
           "]"}]}]}], ";", " ", 
        RowBox[{"(*", 
         RowBox[{"RunningIndex", "\[Rule]", "1"}], "*)"}], 
        "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
        "\[IndentingNewLine]", "\[IndentingNewLine]", 
        RowBox[{"OldOrderingBRST", " ", "=", " ", 
         RowBox[{"Ordering", "[", 
          RowBox[{"dummyNewBRSTVert", "[", 
           RowBox[{"[", 
            RowBox[{"RunningIndex", ",", "RunningIndex1", ",", "1"}], "]"}], 
           "]"}], "]"}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
        "\[IndentingNewLine]", 
        RowBox[{"Echo", "[", 
         RowBox[{"dummyNewBRSTVert", "[", 
          RowBox[{"[", 
           RowBox[{"RunningIndex", ",", "RunningIndex1", ",", "1"}], "]"}], 
          "]"}], "]"}], ";", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"Sign", ",", " ", 
           RowBox[{"dummyNewBRSTVert", "[", 
            RowBox[{"[", 
             RowBox[{"RunningIndex", ",", "RunningIndex1", ",", "1"}], "]"}], 
            "]"}]}], "}"}], " ", "=", " ", 
         RowBox[{"DefaultVertexOrdering", "[", 
          RowBox[{
           RowBox[{"dummyNewBRSTVert", "[", 
            RowBox[{"[", 
             RowBox[{"RunningIndex", ",", "RunningIndex1", ",", "1"}], "]"}], 
            "]"}], ",", "FieldTypes", ",", "fields", ",", "BRSTfields"}], 
          "]"}]}], ";", " ", "\[IndentingNewLine]", 
        RowBox[{"Echo", "[", 
         RowBox[{"{", 
          RowBox[{"Sign", ",", " ", 
           RowBox[{"dummyNewBRSTVert", "[", 
            RowBox[{"[", 
             RowBox[{"RunningIndex", ",", "RunningIndex1", ",", "1"}], "]"}], 
            "]"}]}], "}"}], "]"}], ";", "\[IndentingNewLine]", 
        "\[IndentingNewLine]", 
        RowBox[{"NewOrderingBRST", " ", "=", " ", 
         RowBox[{"Ordering", "[", 
          RowBox[{"dummyNewBRSTVert", "[", 
           RowBox[{"[", 
            RowBox[{"RunningIndex", ",", "RunningIndex1", ",", "1"}], "]"}], 
           "]"}], "]"}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
        RowBox[{"(*", 
         RowBox[{
         "now", " ", "we", " ", "want", " ", "to", " ", "order", " ", "the", 
          " ", "indices", " ", "in", " ", "our", " ", "terms", " ", "in", " ",
           "canonical", " ", "ordering"}], "*)"}], "\[IndentingNewLine]", 
        RowBox[{"(*", 
         RowBox[{"For", "[", 
          RowBox[{
           RowBox[{"RunningIndex2", "=", "1"}], ",", " ", 
           RowBox[{"RunningIndex2", " ", "\[LessEqual]", 
            RowBox[{"Length", "@", 
             RowBox[{"BRSTIndiceszero", "[", 
              RowBox[{"[", "1", "]"}], "]"}]}]}], ",", " ", 
           RowBox[{"RunningIndex2", "++"}], ","}], " "}], "*)"}], 
        "\[IndentingNewLine]", "\[IndentingNewLine]", 
        RowBox[{"(*", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"(", 
             RowBox[{
              RowBox[{"dummyNewBRSTVert", "[", 
               RowBox[{"[", 
                RowBox[{"RunningIndex", ",", "RunningIndex1", ",", "1", ",", 
                 RowBox[{"NewOrderingBRST", "[", 
                  RowBox[{"[", "#", "]"}], "]"}]}], "]"}], "]"}], " ", "=", 
              " ", 
              RowBox[{"BRSTIndiceszero", "[", 
               RowBox[{"[", 
                RowBox[{"OldOrderingBRST", "[", 
                 RowBox[{"[", "#", "]"}], "]"}], "]"}], "]"}]}], ")"}], "&"}],
            "/@", 
           RowBox[{"Table", "[", 
            RowBox[{"i", ",", 
             RowBox[{"{", 
              RowBox[{"i", ",", "1", ",", 
               RowBox[{"Length", "@", 
                RowBox[{"dummyNewBRSTVert", "[", 
                 RowBox[{"[", 
                  RowBox[{"RunningIndex", ",", "RunningIndex1", ",", "1"}], 
                  "]"}], "]"}]}]}], "}"}]}], "]"}]}], ";"}], " ", 
         RowBox[{"(*", 
          RowBox[{"I", " ", "have", " ", "changed", " ", "this"}], "*)"}], 
         "*)"}], "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{
            RowBox[{"dummyNewBRSTVert", "[", 
             RowBox[{"[", 
              RowBox[{"RunningIndex", ",", "RunningIndex1", ",", "2", ",", 
               RowBox[{"NewOrderingBRST", "[", 
                RowBox[{"[", "#", "]"}], "]"}]}], "]"}], "]"}], " ", "=", " ", 
            RowBox[{"BRSTIndiceszero", "[", 
             RowBox[{"[", 
              RowBox[{"2", ",", 
               RowBox[{"OldOrderingBRST", "[", 
                RowBox[{"[", "#", "]"}], "]"}]}], "]"}], "]"}]}], ")"}], 
          "&"}], "/@", 
         RowBox[{"Table", "[", 
          RowBox[{"i", ",", 
           RowBox[{"{", 
            RowBox[{"i", ",", "1", ",", 
             RowBox[{"Length", "@", 
              RowBox[{"dummyNewBRSTVert", "[", 
               RowBox[{"[", 
                RowBox[{"RunningIndex", ",", "RunningIndex1", ",", "2"}], 
                "]"}], "]"}]}]}], "}"}]}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"(*", 
         RowBox[{
          RowBox[{
           RowBox[{"dummyNewBRSTVert", "[", 
            RowBox[{"[", 
             RowBox[{"RunningIndex", ",", "RunningIndex1", ",", "2", ",", 
              RowBox[{"NewOrderingBRST", "[", 
               RowBox[{"[", "RunningIndex2", "]"}], "]"}]}], "]"}], "]"}], 
           " ", "=", " ", 
           RowBox[{"BRSTIndiceszero", "[", 
            RowBox[{"[", 
             RowBox[{"2", ",", 
              RowBox[{"OldOrderingBRST", "[", 
               RowBox[{"[", "RunningIndex2", "]"}], "]"}]}], "]"}], "]"}]}], 
          ";"}], "*)"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
        RowBox[{"(*", 
         RowBox[{"]", ";"}], "*)"}], "\[IndentingNewLine]", 
        RowBox[{"Echo", "[", 
         RowBox[{"{", 
          RowBox[{"\"\<brst sign:\>\"", ",", "Sign"}], "}"}], "]"}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"TotalSign", "[", 
          RowBox[{"[", "RunningIndex", "]"}], "]"}], " ", "=", " ", 
         RowBox[{
          RowBox[{"TotalSign", "[", 
           RowBox[{"[", "RunningIndex", "]"}], "]"}], "*", "Sign"}]}], ";", 
        "             ", 
        RowBox[{"(*", 
         RowBox[{
         "this", " ", "looks", " ", "like", " ", "the", " ", "wrong", " ", 
          "runningindex"}], "*)"}], "\[IndentingNewLine]", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"RHSdummy", "[", 
          RowBox[{"[", 
           RowBox[{"(*", 
            RowBox[{"RunningIndex", ","}], "*)"}], 
           RowBox[{"RunningIndex1", ",", "1"}], "]"}], "]"}], " ", "=", " ", 
         RowBox[{"Sort", "@", 
          RowBox[{"Join", "[", 
           RowBox[{
            RowBox[{"RHSdummy", "[", 
             RowBox[{"[", 
              RowBox[{"(*", 
               RowBox[{"RunningIndex", ","}], "*)"}], 
              RowBox[{"RunningIndex1", ",", "1"}], "]"}], "]"}], ",", 
            RowBox[{"{", 
             RowBox[{"TotalSign", "[", 
              RowBox[{"[", "RunningIndex", "]"}], "]"}], "}"}]}], "]"}]}]}], 
        ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
        RowBox[{
        "Echo", "[", 
         "\"\<Total BRSTsign might still be wrong!!!!!!!!!!!!!!!\>\"", "]"}], 
        ";"}]}], "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"Return", "[", 
      RowBox[{"{", 
       RowBox[{"RHSdummy", ",", " ", "dummyNewBRSTVert"}], "}"}], "]"}], 
     ";"}]}], "\[IndentingNewLine]", "]"}], " ", 
  RowBox[{"(*", " ", 
   RowBox[{
   "we", " ", "want", " ", "to", " ", "get", " ", "the", " ", "swapped", " ", 
    "superindices", " ", "as", " ", "well", " ", "as", " ", "the", " ", 
    "possible", " ", "configs", " ", "as", " ", "a", " ", "list"}], " ", 
   "*)"}]}]}], "Input",
 CellChangeTimes->{{3.7585194687498827`*^9, 3.758519474190692*^9}, {
   3.7585195218005886`*^9, 3.7585195717147875`*^9}, {3.758519696961162*^9, 
   3.758519770060876*^9}, {3.7585370153111553`*^9, 3.7585370283828*^9}, {
   3.7585371827783785`*^9, 3.758537252012085*^9}, {3.758537397815342*^9, 
   3.7585375014921584`*^9}, {3.758537558915535*^9, 3.7585377209582915`*^9}, {
   3.758538271911298*^9, 3.7585383071095333`*^9}, {3.758539606250202*^9, 
   3.7585396165007277`*^9}, {3.758545699301676*^9, 3.758545720521447*^9}, {
   3.758545778162793*^9, 3.758545781469372*^9}, {3.7585461644713697`*^9, 
   3.7585462265890684`*^9}, {3.758546294327919*^9, 3.7585462952411256`*^9}, {
   3.758546351980849*^9, 3.758546417905476*^9}, {3.7588745487727795`*^9, 
   3.7588745889994717`*^9}, {3.7588819244044333`*^9, 
   3.7588819684994392`*^9}, {3.7588820981471815`*^9, 
   3.7588821706491656`*^9}, {3.758882251407427*^9, 3.758882326478389*^9}, {
   3.7588824120016108`*^9, 3.7588824554664373`*^9}, {3.7588825088983173`*^9, 
   3.758882527847273*^9}, {3.758882606243435*^9, 3.75888261217362*^9}, {
   3.758882647679389*^9, 3.7588826861853514`*^9}, {3.7588827169730816`*^9, 
   3.7588827332478027`*^9}, {3.758882770386999*^9, 3.7588827910343323`*^9}, {
   3.758882840125824*^9, 3.7588828478287115`*^9}, {3.758882884356254*^9, 
   3.758882952735154*^9}, {3.7588829893853817`*^9, 3.7588830404291534`*^9}, {
   3.7588830740228176`*^9, 3.7588831154825134`*^9}, {3.7588831487515903`*^9, 
   3.758883156779101*^9}, {3.758883303189583*^9, 3.7588833183949027`*^9}, {
   3.7588833727655544`*^9, 3.758883382621981*^9}, {3.758883454602075*^9, 
   3.758883461966303*^9}, {3.7588835231905794`*^9, 3.758883523488859*^9}, {
   3.758885655794016*^9, 3.758885660171888*^9}, {3.7588864020559354`*^9, 
   3.7588864492458954`*^9}, {3.7588911955222673`*^9, 3.758891197303633*^9}, {
   3.7588912345093665`*^9, 3.758891236592605*^9}, {3.758967797971202*^9, 
   3.7589677989909945`*^9}, {3.75913212972237*^9, 3.759132134460105*^9}, 
   3.7591333849824934`*^9, {3.7591384700897384`*^9, 3.7591384703548684`*^9}, {
   3.7591385365508623`*^9, 3.7591385534799547`*^9}, {3.7592179659359813`*^9, 
   3.759217971830219*^9}, {3.7592182860134387`*^9, 3.7592182959858065`*^9}, {
   3.759565612821061*^9, 3.7595656350653358`*^9}, {3.7595737731146126`*^9, 
   3.7595737896952553`*^9}, 3.759574362871768*^9, {3.7596511685066123`*^9, 
   3.7596511686315703`*^9}, {3.7596598463969574`*^9, 
   3.7596598898209686`*^9}, {3.7596599633241487`*^9, 
   3.7596599637146797`*^9}, {3.765533526043262*^9, 3.7655335302245903`*^9}, {
   3.765533598181567*^9, 3.765533777999813*^9}, {3.7655338121584945`*^9, 
   3.765533831026718*^9}, {3.765534757815184*^9, 3.7655347741007347`*^9}, {
   3.7655348312283125`*^9, 3.7655348633538136`*^9}, {3.765534897523934*^9, 
   3.7655349947967854`*^9}, {3.765535043338549*^9, 3.765535049953227*^9}, {
   3.765607640759362*^9, 3.765607644836944*^9}, {3.765607705806959*^9, 
   3.7656077114467287`*^9}, {3.7656077715117936`*^9, 
   3.7656077767660093`*^9}, {3.7656079094888434`*^9, 3.765608038842098*^9}, {
   3.76560808355993*^9, 3.76560813737304*^9}, {3.765608221464182*^9, 
   3.765608253123884*^9}, {3.7656082964431543`*^9, 3.7656083812571726`*^9}, {
   3.7656088822824554`*^9, 3.765608933958477*^9}, {3.765609025721165*^9, 
   3.7656091190489388`*^9}, {3.765609213420635*^9, 3.765609217758876*^9}, {
   3.765609253650382*^9, 3.765609261841484*^9}, {3.765609588453767*^9, 
   3.7656096216355486`*^9}, {3.765609673483677*^9, 3.7656096903648033`*^9}, {
   3.765609876714537*^9, 3.7656099537498217`*^9}, {3.771225318853846*^9, 
   3.771225331026389*^9}, 3.7733987221750317`*^9},
 Background->RGBColor[0.87, 0.94, 1],
 CellLabel->
  "In[223]:=",ExpressionUUID->"b412ee83-8b76-43d3-ab8f-58215d9f45ef"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
   "multiply", " ", "all", " ", "the", " ", "numbers", " ", "in", " ", "the", 
    " ", "prefactor", " ", "of", " ", "a", " ", "single", " ", "diagram"}], 
   " ", "*)"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"Clear", "[", "GetSign", "]"}], " ", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"GetSign", "[", 
     RowBox[{"appliedDiagPref_", ",", "fields_"}], "]"}], " ", ":=", " ", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"newappliedDiagPref", " ", "=", " ", 
         RowBox[{"appliedDiagPref", "[", 
          RowBox[{"[", "\"\<Prefactor\>\"", "]"}], "]"}]}], ",", "testfield1",
         ",", " ", "testfield2", ",", " ", "positionTestfield1", ",", " ", 
        "positionTestfield2", ",", " ", "totalDiagPref"}], "}"}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"myEcho", "[", 
        RowBox[{"\"\<GetSign\>\"", ",", "1"}], "]"}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"(", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"Switch", "[", 
            RowBox[{
             RowBox[{"Head", "[", 
              RowBox[{"newappliedDiagPref", "[", 
               RowBox[{"[", "#", "]"}], "]"}], "]"}], ",", 
             "\[IndentingNewLine]", "Integer", ",", "\[IndentingNewLine]", 
             "\t\t", 
             RowBox[{
              RowBox[{"myEcho", "[", 
               RowBox[{"\"\<Integer\>\"", ",", "4"}], "]"}], ";", 
              "\[IndentingNewLine]", "\t\t ", "Nothing"}], ",", 
             "\[IndentingNewLine]", "List", ",", "\[IndentingNewLine]", 
             "\t\t", 
             RowBox[{
              RowBox[{"myEcho", "[", 
               RowBox[{"\"\<Metric factor\>\"", ",", "4"}], "]"}], ";", 
              "\[IndentingNewLine]", "\t\t", 
              RowBox[{"testfield1", " ", "=", "  ", 
               RowBox[{"newappliedDiagPref", "[", 
                RowBox[{"[", 
                 RowBox[{"#", ",", "1"}], "]"}], "]"}]}], ";", 
              "\[IndentingNewLine]", "\t\t", 
              RowBox[{"testfield2", " ", "=", "  ", 
               RowBox[{"newappliedDiagPref", "[", 
                RowBox[{"[", 
                 RowBox[{"#", ",", "2"}], "]"}], "]"}]}], ";", 
              "\[IndentingNewLine]", "\t\t", 
              RowBox[{"positionTestfield1", " ", "=", " ", 
               RowBox[{
                RowBox[{"Position", "[", 
                 RowBox[{
                  RowBox[{"fields", "[", 
                   RowBox[{"[", 
                    RowBox[{"All", ",", "\"\<name\>\""}], "]"}], "]"}], ",", 
                  "testfield1"}], "]"}], "[", 
                RowBox[{"[", 
                 RowBox[{"1", ",", "1"}], "]"}], "]"}]}], ";", 
              "\[IndentingNewLine]", "\t\t", 
              RowBox[{"positionTestfield2", " ", "=", " ", 
               RowBox[{
                RowBox[{"Position", "[", 
                 RowBox[{
                  RowBox[{"fields", "[", 
                   RowBox[{"[", 
                    RowBox[{"All", ",", "\"\<name\>\""}], "]"}], "]"}], ",", 
                  "testfield2"}], "]"}], "[", 
                RowBox[{"[", 
                 RowBox[{"1", ",", "1"}], "]"}], "]"}]}], ";", 
              "\[IndentingNewLine]", "\t\t", "\[IndentingNewLine]", "\t\t", 
              RowBox[{"If", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{"fields", "[", 
                   RowBox[{"[", 
                    RowBox[{
                    "positionTestfield1", ",", "\"\<specs\>\"", ",", 
                    "\"\<fermionnumber\>\""}], "]"}], "]"}], " ", 
                  "\[NotEqual]", " ", "0"}], " ", "&&", " ", 
                 RowBox[{
                  RowBox[{"fields", "[", 
                   RowBox[{"[", 
                    RowBox[{
                    "positionTestfield2", ",", "\"\<specs\>\"", ",", 
                    "\"\<fermionnumber\>\""}], "]"}], "]"}], "\[NotEqual]", 
                  " ", "0"}]}], ",", "\[IndentingNewLine]", "\t\t\t", 
                RowBox[{
                 RowBox[{"myEcho", "[", 
                  RowBox[{"\"\<both fermions\>\"", ",", "4"}], "]"}], ";", 
                 "\[IndentingNewLine]", "\t\t\t", 
                 RowBox[{
                  RowBox[{"newappliedDiagPref", "[", 
                   RowBox[{"[", "#", "]"}], "]"}], " ", "=", " ", 
                  RowBox[{"-", "1"}]}], ";"}], "\[IndentingNewLine]", 
                "\t\t\t", ",", "\[IndentingNewLine]", "\t\t\t", 
                RowBox[{
                 RowBox[{"myEcho", "[", 
                  RowBox[{"\"\<one or no fermion\>\"", ",", "4"}], "]"}], ";",
                  "\[IndentingNewLine]", "\t\t\t", 
                 RowBox[{
                  RowBox[{"newappliedDiagPref", "[", 
                   RowBox[{"[", "#", "]"}], "]"}], " ", "=", " ", "1"}], 
                 ";"}]}], "\[IndentingNewLine]", "\t\t", "]"}], ";"}]}], 
            "\[IndentingNewLine]", "]"}], ";"}], "\[IndentingNewLine]", ")"}],
          "&"}], "/@", 
        RowBox[{"Table", "[", 
         RowBox[{"i", ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "1", ",", 
            RowBox[{"Length", "@", "newappliedDiagPref"}]}], "}"}]}], "]"}]}],
        ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"totalDiagPref", " ", "=", " ", 
        RowBox[{"Apply", "[", 
         RowBox[{"Times", ",", "newappliedDiagPref"}], "]"}]}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"Return", "[", 
        RowBox[{"{", "totalDiagPref", "}"}], "]"}], ";"}]}], 
     "\[IndentingNewLine]", "]"}]}]}]}]], "Input",
 CellChangeTimes->{{3.757928164181446*^9, 3.7579282668172026`*^9}, {
   3.757928345718856*^9, 3.757928410070036*^9}, {3.7579284497504416`*^9, 
   3.7579284519714575`*^9}, {3.7579305594991083`*^9, 3.757930696957777*^9}, {
   3.7579307426884065`*^9, 3.7579307585346107`*^9}, {3.7579308384081492`*^9, 
   3.7579309004220715`*^9}, {3.757930936458558*^9, 3.757931219488427*^9}, {
   3.7579313259030695`*^9, 3.7579313555608697`*^9}, 3.757931442333407*^9, {
   3.7579315784683695`*^9, 3.757931588059868*^9}, {3.757931900777718*^9, 
   3.757931916178588*^9}, {3.7579319684588866`*^9, 3.7579320386394067`*^9}, {
   3.757932098720648*^9, 3.7579321464505587`*^9}, {3.7580158624125338`*^9, 
   3.7580158693140793`*^9}, {3.7580162178492327`*^9, 
   3.7580162355008535`*^9}, {3.7584397004721904`*^9, 3.758439701540366*^9}, {
   3.758874504111397*^9, 3.75887451966426*^9}, {3.758874730659176*^9, 
   3.758874827639474*^9}, {3.7588748813642063`*^9, 3.7588749244214*^9}, {
   3.7588757452622943`*^9, 3.7588757878527718`*^9}, {3.7588758232510777`*^9, 
   3.758875838781451*^9}, 3.7588810967175503`*^9, {3.7588811668649855`*^9, 
   3.758881191816064*^9}, {3.75888186506286*^9, 3.758881881558365*^9}, 
   3.7589591215984106`*^9, {3.7589680767615013`*^9, 3.758968240950734*^9}, {
   3.7589682798529196`*^9, 3.7589682920991497`*^9}, {3.7589683780031013`*^9, 
   3.758968391863698*^9}, {3.758968592685649*^9, 3.758968597536742*^9}, {
   3.7589686357662582`*^9, 3.758968644612426*^9}, {3.75896887289489*^9, 
   3.758968885105089*^9}, {3.758969010476185*^9, 3.75896901327005*^9}, {
   3.758969055118206*^9, 3.758969162894318*^9}, {3.7589692733970327`*^9, 
   3.7589694061863375`*^9}, {3.7589694886334314`*^9, 
   3.7589696719003687`*^9}, {3.75896971300392*^9, 3.7589697172922764`*^9}, {
   3.758969842645565*^9, 3.758969847845999*^9}, {3.758970267143893*^9, 
   3.7589702672718773`*^9}, {3.7589704474081593`*^9, 
   3.7589705634746437`*^9}, {3.7589705934971466`*^9, 
   3.7589705978040786`*^9}, {3.7589706766042433`*^9, 
   3.7589708199655676`*^9}, {3.7589708931028104`*^9, 3.758970913278686*^9}, {
   3.7589709835442944`*^9, 3.758971028453807*^9}, {3.7589711340792446`*^9, 
   3.758971149511724*^9}, {3.75897157528251*^9, 3.7589717017186327`*^9}, {
   3.75897178741895*^9, 3.7589717905904655`*^9}, {3.7589718625571156`*^9, 
   3.7589719003103614`*^9}, {3.7591521809039164`*^9, 
   3.7591521825565214`*^9}, {3.759226158953079*^9, 3.75922615931178*^9}, {
   3.761897227001663*^9, 3.7618972524465427`*^9}, {3.7618972891436625`*^9, 
   3.7618972914178667`*^9}, {3.76448082693433*^9, 3.7644808529058084`*^9}, {
   3.771225349652772*^9, 3.7712253593318596`*^9}, {3.7712344353335133`*^9, 
   3.7712344423700495`*^9}, {3.7735531666356497`*^9, 3.773553189954975*^9}, {
   3.773553250895048*^9, 3.7735533211405725`*^9}, {3.773553359849555*^9, 
   3.773553597825307*^9}, {3.773553671492922*^9, 3.773553787750779*^9}, {
   3.7735538361724854`*^9, 3.77355384326884*^9}, {3.7735539537247863`*^9, 
   3.7735541426904354`*^9}, {3.7735542368310275`*^9, 
   3.7735542406018195`*^9}, {3.7735543760834994`*^9, 3.7735543778997846`*^9}},
 Background->GrayLevel[0.85],
 CellLabel->
  "In[314]:=",ExpressionUUID->"14c92292-4ba9-4503-b73f-2ac1e1da7c6c"]
}, Closed]],

Cell[CellGroupData[{

Cell["Aux Functions (done :) )", "Subsection",
 CellChangeTimes->{{3.7570711494889107`*^9, 3.7570711701855297`*^9}, {
   3.757403065278137*^9, 3.7574030754031305`*^9}, {3.7580156044556265`*^9, 
   3.758015629606991*^9}, {3.758092357194866*^9, 3.7580923752568913`*^9}, 
   3.7589721539855156`*^9, {3.759041432871893*^9, 3.759041435844462*^9}, {
   3.773564267167207*^9, 
   3.7735642713549337`*^9}},ExpressionUUID->"05e14ca4-7b78-4f36-9534-\
7b1fb9fdf540"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"IndexProjection", "[", 
    RowBox[{"i_", ",", "j_"}], "]"}], " ", ":=", " ", 
   RowBox[{"i", "\[Rule]", "j"}]}], ";"}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.757759358981065*^9, 3.7577593713226423`*^9}, {
  3.757759731892332*^9, 3.7577597336269484`*^9}, {3.757837237321251*^9, 
  3.7578372392658896`*^9}, {3.7752109706267276`*^9, 3.7752109723454304`*^9}},
 CellLabel->"In[31]:=",ExpressionUUID->"6d592817-2f3f-4f53-89b7-7b4f2c840ea4"],

Cell[BoxData["\[IndentingNewLine]"], "Input",
 CellChangeTimes->{3.7584504988239746`*^9},
 CellLabel->"In[32]:=",ExpressionUUID->"f0806a16-4b86-4fcb-883d-e679d2f60582"],

Cell[BoxData[{
 RowBox[{"Clear", "[", "GetFieldsList", "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"GetFieldsList", "[", "fields_", "]"}], " ", ":=", " ", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "keys", ",", "bosons", ",", " ", "fermions", ",", " ", "BRSTs", ",", " ",
       "BRSTbosons", ",", " ", "BRSTfermions", ",", "fullList"}], "}"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"myEcho", "[", 
      RowBox[{"\"\<GetFieldsList\>\"", ",", "1"}], "]"}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"keys", " ", "=", " ", 
      RowBox[{"Keys", "[", "fields", "]"}]}], ";", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"MemberQ", "[", 
         RowBox[{"keys", ",", "\"\<bosonic\>\""}], "]"}], " ", "\[Equal]", 
        " ", "True"}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"bosons", " ", "=", " ", 
         RowBox[{"Map", "[", 
          RowBox[{"Head", ",", 
           RowBox[{"fields", "[", 
            RowBox[{"[", "\"\<bosonic\>\"", "]"}], "]"}]}], "]"}]}], ";"}], 
       "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"bosons", " ", "=", " ", 
         RowBox[{"{", "}"}]}], ";"}]}], "\[IndentingNewLine]", "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"MemberQ", "[", 
         RowBox[{"keys", ",", "\"\<fermionic\>\""}], "]"}], " ", "\[Equal]", 
        " ", "True"}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"fermions", " ", "=", " ", 
         RowBox[{"Map", "[", 
          RowBox[{"Head", ",", 
           RowBox[{"fields", "[", 
            RowBox[{"[", "\"\<fermionic\>\"", "]"}], "]"}], ",", 
           RowBox[{"{", "2", "}"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
       ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"fermions", " ", "=", " ", 
         RowBox[{"{", "}"}]}], ";"}]}], "\[IndentingNewLine]", "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"MemberQ", "[", 
         RowBox[{"keys", ",", "\"\<BRSTsources\>\""}], "]"}], "\[Equal]", " ",
         "True"}], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{"Switch", "[", 
            RowBox[{
             RowBox[{"fields", "[", 
              RowBox[{"[", 
               RowBox[{"\"\<BRSTsources\>\"", ",", "#", ",", "2"}], "]"}], 
              "]"}], ",", "\[IndentingNewLine]", "\"\<bosonic\>\"", ",", " ", 
             "\[IndentingNewLine]", "\t", 
             RowBox[{
              RowBox[{"bosons", " ", "=", " ", 
               RowBox[{"Join", "[", 
                RowBox[{"bosons", ",", 
                 RowBox[{"{", 
                  RowBox[{"fields", "[", 
                   RowBox[{"[", 
                    RowBox[{"\"\<BRSTsources\>\"", ",", "#", ",", "1"}], 
                    "]"}], "]"}], "}"}]}], "]"}]}], ";"}], ",", 
             "\[IndentingNewLine]", "\"\<fermionic\>\"", ",", 
             "\[IndentingNewLine]", "\t", 
             RowBox[{
              RowBox[{"fermions", " ", "=", " ", 
               RowBox[{"Join", "[", 
                RowBox[{"fermions", ",", 
                 RowBox[{"{", 
                  RowBox[{"fields", "[", 
                   RowBox[{"[", 
                    RowBox[{"\"\<BRSTsources\>\"", ",", "#", ",", "1"}], 
                    "]"}], "]"}], "}"}]}], "]"}]}], ";"}]}], 
            "\[IndentingNewLine]", "]"}], "\[IndentingNewLine]", ")"}], "&"}],
          "/@", 
         RowBox[{"Table", "[", 
          RowBox[{"i", ",", 
           RowBox[{"{", 
            RowBox[{"i", ",", "1", ",", 
             RowBox[{"Length", "@", 
              RowBox[{"fields", "[", 
               RowBox[{"[", "\"\<BRSTsources\>\"", "]"}], "]"}]}]}], "}"}]}], 
          "]"}]}], ";"}], "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
       "Nothing"}], "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"fullList", " ", "=", " ", 
      RowBox[{"{", 
       RowBox[{"bosons", ",", "fermions"}], "}"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"Return", "[", "fullList", "]"}]}]}], "\[IndentingNewLine]", 
   "]"}]}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.757759358981065*^9, 3.7577593713226423`*^9}, {
  3.757759731892332*^9, 3.7577597336269484`*^9}, {3.757837237321251*^9, 
  3.7578372392658896`*^9}, {3.774590726022547*^9, 3.774590800992384*^9}, {
  3.774590840786217*^9, 3.774591040959339*^9}, {3.7745911010674267`*^9, 
  3.7745912838217773`*^9}, {3.7745913230243044`*^9, 3.7745914275083823`*^9}, {
  3.7745915120603237`*^9, 3.7745916597396283`*^9}},
 CellLabel->"In[33]:=",ExpressionUUID->"3c70af3b-c21b-4e6b-aac4-1813fc851a8a"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"GetFieldsList", "[", "fields", "]"}]], "Input",
 CellChangeTimes->{{3.774590945584533*^9, 3.774590949016741*^9}},
 CellLabel->"In[35]:=",ExpressionUUID->"936d58b4-a0db-46ec-9413-38b5e343a36f"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"A", ",", 
     RowBox[{"Q", "[", "cbar", "]"}], ",", 
     RowBox[{"Q", "[", "c", "]"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"cbar", ",", "c"}], "}"}], ",", 
     RowBox[{"Q", "[", "A", "]"}]}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{
  3.7745909492810307`*^9, {3.774591260141094*^9, 3.7745912849846673`*^9}, {
   3.7745913499464245`*^9, 3.774591370336609*^9}, {3.774591404003722*^9, 
   3.7745914308214893`*^9}, 3.774591515857954*^9, {3.7745915459594064`*^9, 
   3.7745915625601625`*^9}, {3.7745916070290985`*^9, 3.7745916629052615`*^9}, 
   3.7751957643666277`*^9, 3.775209723819067*^9, 3.775279786525983*^9, 
   3.7753644063371353`*^9},
 CellLabel->"Out[35]=",ExpressionUUID->"e6604e20-876e-4ce7-b3c9-fabbb6b34d2c"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData["fields"], "Input",
 CellLabel->"In[36]:=",ExpressionUUID->"e548e78b-d5af-4eca-8492-7b3c5d038298"],

Cell[BoxData[
 RowBox[{"\[LeftAssociation]", 
  RowBox[{
   RowBox[{"\<\"bosonic\"\>", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"A", "[", 
      RowBox[{"p", ",", 
       RowBox[{"{", 
        RowBox[{"mu", ",", "i"}], "}"}]}], "]"}], "}"}]}], ",", 
   RowBox[{"\<\"fermionic\"\>", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"cbar", "[", 
        RowBox[{"p", ",", "i"}], "]"}], ",", 
       RowBox[{"c", "[", 
        RowBox[{"p", ",", "i"}], "]"}]}], "}"}], "}"}]}], ",", 
   RowBox[{"\<\"BRSTsources\"\>", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"Q", "[", "A", "]"}], ",", "\<\"fermionic\"\>"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"Q", "[", "cbar", "]"}], ",", "\<\"bosonic\"\>"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"Q", "[", "c", "]"}], ",", "\<\"bosonic\"\>"}], "}"}]}], 
     "}"}]}]}], "\[RightAssociation]"}]], "Output",
 CellChangeTimes->{3.7745917397090855`*^9, 3.7751957661562366`*^9, 
  3.775209723865899*^9, 3.775279786588464*^9, 3.775364406477728*^9},
 CellLabel->"Out[36]=",ExpressionUUID->"9172509e-759c-4e5a-8307-cae960e2d946"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "define", " ", "the", " ", "possible", " ", "propagators", " ", "for", " ",
     "fields"}], "*)"}], " ", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
    "Adjust", " ", "such", " ", "that", " ", "one", " ", "can", " ", "insert",
      " ", "a", " ", "truncation", " ", 
     RowBox[{"(", "done", ")"}], " ", "and", " ", "vertex", " ", "ordering"}],
     "..."}], "*)"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"Clear", "[", "GetPossibleProps", "]"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"GetPossibleProps", "[", 
     RowBox[{"fields_", ",", "truncation___"}], "]"}], ":=", " ", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "keys", ",", "bosonicfields", ",", "testbosonicfield", ",", " ", 
        "fermionicfields", ",", 
        RowBox[{"PossibleProps", " ", "=", " ", 
         RowBox[{"{", "}"}]}], ",", 
        RowBox[{"TruncatedPossibleProps", " ", "=", " ", 
         RowBox[{"{", "}"}]}], ",", " ", "PossibleBosonProps", ",", " ", 
        "PossibleFermionProps"}], "}"}], ",", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"myEcho", "[", 
        RowBox[{"\"\<GetPossibleProps\>\"", ",", "1"}], "]"}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"keys", " ", "=", " ", 
        RowBox[{"Keys", "[", "fields", "]"}]}], ";", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"MemberQ", "[", 
           RowBox[{"keys", ",", "\"\<bosonic\>\""}], "]"}], " ", "\[Equal]", 
          " ", "True"}], ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"bosonicfields", " ", "=", " ", 
           RowBox[{"Map", "[", 
            RowBox[{"Head", ",", 
             RowBox[{"fields", "[", 
              RowBox[{"[", "\"\<bosonic\>\"", "]"}], "]"}]}], "]"}]}], ";"}], 
         "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"bosonicfields", " ", "=", " ", 
           RowBox[{"{", "}"}]}], ";"}]}], "\[IndentingNewLine]", "]"}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"MemberQ", "[", 
           RowBox[{"keys", ",", "\"\<fermionic\>\""}], "]"}], " ", "\[Equal]",
           " ", "True"}], ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"fermionicfields", " ", "=", " ", 
           RowBox[{"Map", "[", 
            RowBox[{"Head", ",", 
             RowBox[{"fields", "[", 
              RowBox[{"[", "\"\<fermionic\>\"", "]"}], "]"}], ",", 
             RowBox[{"{", "2", "}"}]}], "]"}]}], ";"}], "\[IndentingNewLine]",
          ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"fermionicfields", " ", "=", " ", 
           RowBox[{"{", "}"}]}], ";"}]}], "\[IndentingNewLine]", "]"}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", 
       RowBox[{"PossibleBosonProps", " ", "=", " ", 
        RowBox[{"Permutations", "[", 
         RowBox[{
          RowBox[{"Join", "[", 
           RowBox[{"bosonicfields", ",", "bosonicfields"}], "]"}], ",", 
          RowBox[{"{", "2", "}"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"myEcho", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"\"\<Possible Boson Props\>\"", ",", "PossibleBosonProps"}],
           "}"}], ",", "3"}], "]"}], ";", "\[IndentingNewLine]", 
       RowBox[{"PossibleFermionProps", " ", "=", " ", 
        RowBox[{"Join", "[", 
         RowBox[{
          RowBox[{"Tuples", "[", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"fermionicfields", "[", 
              RowBox[{"[", 
               RowBox[{"All", ",", "1"}], "]"}], "]"}], ",", 
             RowBox[{"fermionicfields", "[", 
              RowBox[{"[", 
               RowBox[{"All", ",", "2"}], "]"}], "]"}]}], "}"}], "]"}], ",", 
          RowBox[{"Map", "[", 
           RowBox[{"Reverse", ",", 
            RowBox[{"Tuples", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"fermionicfields", "[", 
                RowBox[{"[", 
                 RowBox[{"All", ",", "1"}], "]"}], "]"}], ",", 
               RowBox[{"fermionicfields", "[", 
                RowBox[{"[", 
                 RowBox[{"All", ",", "2"}], "]"}], "]"}]}], "}"}], "]"}], ",",
             "1"}], "]"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"myEcho", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
          "\"\<Possible Fermion Props\>\"", ",", "PossibleFermionProps"}], 
          "}"}], ",", "3"}], "]"}], ";", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"PossibleProps", " ", "=", " ", 
        RowBox[{"Join", "[", 
         RowBox[{"PossibleBosonProps", ",", "PossibleFermionProps"}], "]"}]}],
        ";", "\[IndentingNewLine]", "        ", 
       RowBox[{"(*", 
        RowBox[{"do", " ", "we", " ", "need", " ", "the", " ", "fieldNames", 
         RowBox[{"??", 
          RowBox[{"??", "??"}]}]}], "*)"}], "\[IndentingNewLine]", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"(*", " ", 
        RowBox[{
         RowBox[{
         "if", " ", "a", " ", "Truncation", " ", "is", " ", "specified"}], 
         ",", " ", 
         RowBox[{
         "the", " ", "other", " ", "props", " ", "are", " ", "removed"}]}], 
        " ", "*)"}], "\[IndentingNewLine]", 
       RowBox[{"(*", " ", 
        RowBox[{"!!", 
         RowBox[{"!!", 
          RowBox[{"!!", 
           RowBox[{"!!", 
            RowBox[{"!!", 
             RowBox[{"!!", 
              RowBox[{"!!", 
               RowBox[{"!!", 
                RowBox[{"!!", 
                 RowBox[{"!!", 
                  RowBox[{"!", " ", 
                   RowBox[{"does", " ", "this", " ", "still", " ", "work", 
                    RowBox[{"??", 
                    RowBox[{"??", 
                    RowBox[{"?", 
                    RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{"!!", "!"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}], 
        "*)"}], "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "@", "truncation"}], ">", "0"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"myEcho", "[", 
           RowBox[{"\"\<Truncate possible props\>\"", ",", "3"}], "]"}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{
            RowBox[{"(", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"MemberQ", "[", 
                RowBox[{"truncation", ",", 
                 RowBox[{"{", 
                  RowBox[{"OrderlessPatternSequence", "[", 
                   RowBox[{
                    RowBox[{"PossibleProps", "[", 
                    RowBox[{"[", 
                    RowBox[{"#", ",", "1"}], "]"}], "]"}], ",", 
                    RowBox[{"PossibleProps", "[", 
                    RowBox[{"[", 
                    RowBox[{"#", ",", "2"}], "]"}], "]"}]}], "]"}], "}"}]}], 
                "]"}], ",", "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{"TruncatedPossibleProps", " ", "=", " ", 
                 RowBox[{"Join", "[", 
                  RowBox[{"TruncatedPossibleProps", ",", 
                   RowBox[{"{", 
                    RowBox[{"PossibleProps", "[", 
                    RowBox[{"[", "#", "]"}], "]"}], "}"}]}], "]"}]}], ";"}], 
               "\[IndentingNewLine]", ",", "\[IndentingNewLine]", "Nothing"}],
               "\[IndentingNewLine]", "]"}], ")"}], "&"}], "/@", 
           RowBox[{"Table", "[", 
            RowBox[{"i", ",", 
             RowBox[{"{", 
              RowBox[{"i", ",", "1", ",", 
               RowBox[{"Length", "@", "PossibleProps"}]}], "}"}]}], "]"}]}], 
          ";", "\[IndentingNewLine]", 
          RowBox[{"PossibleProps", " ", "=", " ", "TruncatedPossibleProps"}], 
          ";", "\[IndentingNewLine]", 
          RowBox[{"myEcho", "[", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"\"\<poss props\>\"", ",", "PossibleProps"}], "}"}], ",",
             "3"}], "]"}], ";"}], "\[IndentingNewLine]", ",", 
         "\[IndentingNewLine]", "Nothing"}], "\[IndentingNewLine]", "]"}], 
       ";", "\[IndentingNewLine]", 
       RowBox[{"Return", "[", "PossibleProps", "]"}], ";"}]}], 
     "\[IndentingNewLine]", "]"}], 
    "                                                                         \
              "}]}]}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.757758775544303*^9, 3.7577588491209183`*^9}, {
   3.757758924109059*^9, 3.7577589285688343`*^9}, {3.757837288859415*^9, 
   3.757837306638197*^9}, {3.7618967298180857`*^9, 3.761896737796794*^9}, {
   3.7644809691640496`*^9, 3.764480987658299*^9}, {3.7644810216392965`*^9, 
   3.7644810677033896`*^9}, {3.764481118853177*^9, 3.7644811510138454`*^9}, {
   3.764481665150499*^9, 3.764481704044935*^9}, {3.7710595842786922`*^9, 
   3.7710596257426467`*^9}, {3.7710596698257236`*^9, 3.771059670287486*^9}, {
   3.771060045524273*^9, 3.771060051734665*^9}, {3.7712250454942093`*^9, 
   3.771225048869852*^9}, {3.7712334925890684`*^9, 3.7712335156047716`*^9}, 
   3.7713128509051476`*^9, {3.7713129371405315`*^9, 3.7713129399169855`*^9}, {
   3.771312999808451*^9, 3.77131300044154*^9}, {3.7713130347678547`*^9, 
   3.771313043276432*^9}, {3.7713130881081805`*^9, 3.771313089393016*^9}, {
   3.771313262973568*^9, 3.7713133269813786`*^9}, {3.771313375327058*^9, 
   3.771313420393298*^9}, {3.771319079106498*^9, 3.771319107150669*^9}, {
   3.7713192328557205`*^9, 3.771319396142473*^9}, {3.771319427990281*^9, 
   3.7713195384607763`*^9}, {3.7713196044362907`*^9, 3.771319623298833*^9}, {
   3.771319720889779*^9, 3.7713197588851423`*^9}, {3.7713198300585203`*^9, 
   3.77132012236112*^9}, {3.7713201713788557`*^9, 3.771320179963893*^9}, {
   3.7713202656456933`*^9, 3.7713203323013897`*^9}, {3.7729558704264636`*^9, 
   3.7729561211101217`*^9}, {3.7729565177505903`*^9, 
   3.7729565752498407`*^9}, {3.7729566190888753`*^9, 3.772956620561391*^9}, 
   3.772957756075116*^9, {3.7730393548179045`*^9, 3.7730395067325306`*^9}, {
   3.7730398405983286`*^9, 3.773039841152749*^9}, {3.7730398762434597`*^9, 
   3.773040190979291*^9}, {3.7730422232819896`*^9, 3.773042226894036*^9}, {
   3.774591782602824*^9, 3.7745919078910446`*^9}, {3.774591979106219*^9, 
   3.7745919923706017`*^9}, {3.7745920437624226`*^9, 3.774592080311291*^9}, {
   3.774592122081044*^9, 3.774592203476336*^9}, {3.7745932317247705`*^9, 
   3.7745932492559185`*^9}, {3.774595316803241*^9, 3.7745953238045516`*^9}, {
   3.774595413396645*^9, 3.774595417756502*^9}, {3.7752095359445257`*^9, 
   3.7752095474882274`*^9}},
 CellLabel->"In[37]:=",ExpressionUUID->"35362821-2334-48fa-9e14-c2da48684ffe"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TestPossibleProps", " ", "=", " ", 
  RowBox[{"GetPossibleProps", "[", 
   RowBox[{"fields", ",", "Truncation"}], "]"}]}]], "Input",
 CellChangeTimes->{{3.771312972734173*^9, 3.771312983046794*^9}, {
  3.7713133364488735`*^9, 3.77131333767632*^9}, {3.7713203530010185`*^9, 
  3.771320357739834*^9}, {3.774591912454221*^9, 3.77459191259481*^9}, {
  3.774593276285647*^9, 3.774593277912298*^9}, {3.7745952843903074`*^9, 
  3.7745952855197134`*^9}},
 CellLabel->"In[39]:=",ExpressionUUID->"cc855bba-c356-4e2f-9918-648967a39e22"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"A", ",", "A"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"cbar", ",", "c"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"c", ",", "cbar"}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.7729561118527827`*^9, 3.7729561236382303`*^9}, 
   3.772956537844529*^9, {3.7729565779882565`*^9, 3.772956602811102*^9}, 
   3.7730369695227876`*^9, {3.7730400499533925`*^9, 3.773040063424849*^9}, {
   3.7730401030988736`*^9, 3.7730401378494587`*^9}, 3.7730401958431196`*^9, 
   3.7731235651034737`*^9, 3.7733822814947186`*^9, 3.7734629556130543`*^9, 
   3.773550437518687*^9, 3.774591913251265*^9, 3.7745919455566945`*^9, 
   3.7745919945111055`*^9, 3.774592053478077*^9, 3.7745920846824093`*^9, 
   3.774592123233961*^9, 3.774592208610608*^9, {3.7745932512824984`*^9, 
   3.7745932785505905`*^9}, 3.774595286419404*^9, 3.774595327196205*^9, 
   3.774595419053367*^9, 3.775195770370611*^9, 3.775209723990903*^9, 
   3.775279786697813*^9, 3.7753644066942697`*^9},
 CellLabel->"Out[39]=",ExpressionUUID->"e715fa31-c257-4e9e-bcf8-1a69ba01d1bc"]
}, Open  ]],

Cell[BoxData["\[IndentingNewLine]"], "Input",
 CellChangeTimes->{3.75845050711677*^9},
 CellLabel->"In[40]:=",ExpressionUUID->"2187b319-0424-43ba-80bc-cce940c9979d"],

Cell[BoxData[
 RowBox[{" ", 
  RowBox[{"(*", 
   RowBox[{
   "get", " ", "possible", " ", "index", " ", "configs", " ", "for", " ", 
    "prop", " ", "and", " ", "get", " ", "position", " ", "of", " ", 
    "regulator", " ", "and", " ", "brst", " ", "term"}], "*)"}], " ", 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"Clear", "[", "GetPossPropConfigs", "]"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"GetPossPropConfigs", "[", 
     RowBox[{"diagram_", ",", "possibleProps_"}], "]"}], ":=", " ", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"positionReg", " ", "=", " ", 
         RowBox[{"{", "}"}]}], " ", ",", 
        RowBox[{"positionBRST", " ", "=", 
         RowBox[{"{", "}"}]}], ",", " ", 
        RowBox[{"positionClassical", " ", "=", " ", 
         RowBox[{"{", "}"}]}], ",", 
        RowBox[{"positionProps", " ", "=", " ", 
         RowBox[{"{", "}"}]}], " ", ",", " ", 
        RowBox[{"positionVertex", " ", "=", " ", 
         RowBox[{"{", "}"}]}], ",", 
        RowBox[{"possibleIndexConfigs", " ", "=", " ", 
         RowBox[{"{", "}"}]}], " ", ",", "mappingOfIndices", " ", ",", 
        RowBox[{"numberOfProps", " ", "=", " ", "0"}], ",", " ", 
        "propCombinations"}], "}"}], ",", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"myEcho", "[", 
        RowBox[{"\"\<GetPossiblePropConfigs\>\"", ",", "1"}], "]"}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{
        "starts", " ", "at", " ", "2", " ", "bc", " ", "first", " ", "entry", 
         " ", "are", " ", "the", " ", "signs"}], "*)"}], 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{
              RowBox[{"diagram", "[", 
               RowBox[{"[", 
                RowBox[{"#", ",", "\"\<type\>\""}], "]"}], "]"}], " ", "==", 
              " ", "\"\<Propagator\>\""}], ",", "                   ", 
             RowBox[{"(*", 
              RowBox[{"get", " ", "position", " ", "of", " ", "props"}], 
              "*)"}], "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"myEcho", "[", 
               RowBox[{"\"\<Propagator Position\>\"", ",", "3"}], "]"}], ";", 
              "\[IndentingNewLine]", "\[IndentingNewLine]", 
              RowBox[{"possibleIndexConfigs", " ", "=", " ", 
               RowBox[{"Union", "[", 
                RowBox[{"possibleIndexConfigs", ",", " ", 
                 RowBox[{"{", 
                  RowBox[{"diagram", "[", 
                   RowBox[{"[", 
                    RowBox[{"#", ",", "\"\<indices\>\""}], "]"}], "]"}], 
                  RowBox[{"(*", 
                   RowBox[{"[", 
                    RowBox[{"[", "1", "]"}], "]"}], "*)"}], "}"}]}], "]"}]}], 
              ";", "\[IndentingNewLine]", 
              RowBox[{"positionProps", " ", "=", " ", 
               RowBox[{"Join", "[", 
                RowBox[{"positionProps", ",", 
                 RowBox[{"{", "#", "}"}]}], "]"}]}], ";", 
              "\[IndentingNewLine]", 
              RowBox[{"numberOfProps", "++"}], ";"}], "\[IndentingNewLine]", 
             "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"If", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{"diagram", "[", 
                   RowBox[{"[", 
                    RowBox[{"#", ",", "\"\<type\>\""}], "]"}], "]"}], " ", "==",
                   " ", "\"\<Regulator\>\""}], " ", "||", " ", 
                 RowBox[{
                  RowBox[{"diagram", "[", 
                   RowBox[{"[", 
                    RowBox[{"#", ",", "\"\<type\>\""}], "]"}], "]"}], " ", "==",
                   " ", "\"\<Regulatordot\>\""}]}], " ", ",", "          ", 
                RowBox[{"(*", 
                 RowBox[{
                 "get", " ", "position", " ", "of", " ", "regulator"}], 
                 "*)"}], "\[IndentingNewLine]", 
                RowBox[{
                 RowBox[{"myEcho", "[", 
                  RowBox[{"\"\<Reg/Regdot Position\>\"", ",", "3"}], "]"}], 
                 ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
                 RowBox[{"positionReg", " ", "=", " ", 
                  RowBox[{"Join", "[", 
                   RowBox[{"positionReg", ",", 
                    RowBox[{"{", "#", "}"}]}], "]"}]}], ";"}], 
                "\[IndentingNewLine]", "\[IndentingNewLine]", ",", 
                "\[IndentingNewLine]", 
                RowBox[{"Nothing", ";"}]}], "\[IndentingNewLine]", "]"}], ";",
               "\[IndentingNewLine]", "                       ", 
              "\[IndentingNewLine]", 
              RowBox[{"If", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{"diagram", "[", 
                  RowBox[{"[", 
                   RowBox[{"#", ",", "\"\<type\>\""}], "]"}], "]"}], " ", "==",
                  " ", "\"\<nPoint\>\""}], " ", ",", "            ", 
                RowBox[{"(*", 
                 RowBox[{"get", " ", "position", " ", "of", " ", 
                  RowBox[{"BRST", "/", "lower"}], " ", "index", " ", "and", 
                  " ", "of", " ", "normal", " ", "nPoint", " ", "vertices"}], 
                 "*)"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
                RowBox[{"Switch", "[", 
                 RowBox[{
                  RowBox[{"diagram", "[", 
                   RowBox[{"[", 
                    RowBox[{"#", ",", "\"\<spec\>\""}], "]"}], "]"}], ",", 
                  "\[IndentingNewLine]", "\"\<none\>\"", " ", ",", 
                  RowBox[{
                   RowBox[{"positionVertex", " ", "=", " ", 
                    RowBox[{"Join", "[", 
                    RowBox[{"positionVertex", ",", 
                    RowBox[{"{", "#", "}"}]}], "]"}]}], ";", " ", 
                   RowBox[{"myEcho", "[", 
                    RowBox[{"\"\<nPoint Position\>\"", ",", "3"}], "]"}], 
                   ";"}], ",", "\[IndentingNewLine]", "\"\<BRST\>\"", ",", 
                  " ", 
                  RowBox[{
                   RowBox[{"positionBRST", " ", "=", " ", 
                    RowBox[{"Join", "[", 
                    RowBox[{"positionBRST", ",", 
                    RowBox[{"{", "#", "}"}]}], "]"}]}], ";", 
                   RowBox[{"myEcho", "[", 
                    RowBox[{"\"\<BRST Position\>\"", ",", "3"}], "]"}], ";"}],
                   ",", "\[IndentingNewLine]", "\"\<classical\>\"", ",", " ", 
                  RowBox[{
                   RowBox[{"positionClassical", " ", "=", " ", 
                    RowBox[{"Join", "[", 
                    RowBox[{"positionClassical", ",", 
                    RowBox[{"{", "#", "}"}]}], "]"}]}], ";", 
                   RowBox[{"myEcho", "[", 
                    RowBox[{"\"\<Classical Position\>\"", ",", "3"}], "]"}], 
                   ";"}]}], "\[IndentingNewLine]", "]"}]}], "            ", 
               RowBox[{"(*", 
                RowBox[{
                "get", " ", "position", " ", "of", " ", "BRST", " ", "nPoint",
                  " ", "and", " ", "vertices"}], "*)"}], 
               "\[IndentingNewLine]", "]"}], ";"}]}], "\[IndentingNewLine]", 
            "]"}], ";"}], "\[IndentingNewLine]", ")"}], "&"}], "/@", 
        RowBox[{"Table", "[", 
         RowBox[{"i", ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "2", ",", 
            RowBox[{"Length", "@", "diagram"}]}], "}"}]}], "]"}]}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", 
       RowBox[{"propCombinations", " ", "=", " ", 
        RowBox[{"Tuples", "[", 
         RowBox[{"possibleProps", ",", "numberOfProps"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"myEcho", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"\"\<Prop Combinations: \>\"", ",", "propCombinations"}], 
          "}"}], ",", "5"}], "]"}], ";", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "@", "propCombinations"}], " ", "\[Equal]", " ", 
          "1"}], ",", "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"Length", "@", 
             RowBox[{"Flatten", "@", "propCombinations"}]}], ">", "0"}], ",", 
           "\[IndentingNewLine]", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"mappingOfIndices", " ", "=", " ", 
             RowBox[{"MapThread", "[", 
              RowBox[{"IndexProjection", ",", 
               RowBox[{"{", 
                RowBox[{"possibleIndexConfigs", ",", 
                 RowBox[{"Flatten", "[", 
                  RowBox[{"propCombinations", ",", "1"}], "]"}]}], "}"}], ",", 
               RowBox[{"(*", "3", "*)"}], "2"}], "]"}]}], ";"}], 
           "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"mappingOfIndices", " ", "=", " ", 
             RowBox[{"{", "}"}]}], ";"}]}], "\[IndentingNewLine]", "]"}], 
         "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
         "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"mappingOfIndices", " ", "=", " ", 
           RowBox[{"MapThread", "[", 
            RowBox[{"IndexProjection", ",", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"Table", "[", 
                RowBox[{"possibleIndexConfigs", ",", 
                 RowBox[{"Length", "@", "propCombinations"}]}], "]"}], ",", 
               "propCombinations"}], "}"}], ",", "3"}], 
            RowBox[{"(*", 
             RowBox[{"Length", "@", "PossibleProps"}], "*)"}], "]"}]}], 
          ";"}]}], "\[IndentingNewLine]", 
        RowBox[{"(*", 
         RowBox[{
         "How", " ", "do", " ", "we", " ", "get", " ", "the", " ", "3", " ", 
          RowBox[{"here", "?", " ", "Just"}], " ", "the", " ", "list", " ", 
          "dimension", " ", "where", " ", "indexproj", " ", "shoud", " ", 
          "be", " ", "applied"}], "*)"}], "\[IndentingNewLine]", "]"}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "@", "mappingOfIndices"}], " ", ">", "0"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"mappingOfIndices", " ", "=", " ", 
           RowBox[{"ArrayReshape", "[", 
            RowBox[{"mappingOfIndices", ",", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{
                RowBox[{"Length", "@", 
                 RowBox[{"(", 
                  RowBox[{"Union", "[", 
                   RowBox[{"Flatten", "[", "possibleProps", "]"}], "]"}], 
                  ")"}]}], "^", 
                RowBox[{"(", "numberOfProps", ")"}]}], ",", 
               RowBox[{"2", "*", "numberOfProps"}]}], "}"}]}], "]"}]}], 
          ";"}]}], "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"Return", "[", 
        RowBox[{"{", 
         RowBox[{
         "positionProps", ",", "positionReg", ",", "positionBRST", ",", " ", 
          "positionVertex", ",", " ", "mappingOfIndices", ",", " ", 
          "numberOfProps"}], "}"}], "]"}], ";"}]}], "\[IndentingNewLine]", 
     "]"}], "                                                      "}]}]}]], \
"Input",
 InitializationCell->True,
 CellChangeTimes->{{3.757759305985113*^9, 3.7577595858679*^9}, {
   3.757759669338529*^9, 3.7577596765622063`*^9}, {3.7577597635345592`*^9, 
   3.7577597762025304`*^9}, {3.7577601644204826`*^9, 3.757760169226779*^9}, 
   3.757760603519226*^9, {3.757837209598236*^9, 3.757837233573993*^9}, 
   3.7578376972452602`*^9, {3.757852842372918*^9, 3.7578528665569077`*^9}, {
   3.7579242825030155`*^9, 3.7579243502339787`*^9}, {3.757924391787095*^9, 
   3.757924415495479*^9}, {3.757924544760768*^9, 3.7579245594088683`*^9}, {
   3.7579246359524775`*^9, 3.7579246780363455`*^9}, {3.7579247333192377`*^9, 
   3.757924745802395*^9}, {3.757924828492358*^9, 3.757924830249547*^9}, {
   3.7579249422421737`*^9, 3.757924944084676*^9}, {3.757925042649578*^9, 
   3.757925060503856*^9}, {3.757925252268304*^9, 3.7579252858670692`*^9}, {
   3.7579253453748093`*^9, 3.7579253780151825`*^9}, 3.757925531506323*^9, {
   3.757926100468871*^9, 3.7579261193864856`*^9}, {3.7579263956284447`*^9, 
   3.7579264490647345`*^9}, {3.7579265214496326`*^9, 
   3.7579265342482615`*^9}, {3.7579342440429583`*^9, 3.757934327225622*^9}, {
   3.7579344260142736`*^9, 3.7579344300596347`*^9}, {3.7579344625456333`*^9, 
   3.7579345217262263`*^9}, {3.757934572955572*^9, 3.7579345803603706`*^9}, {
   3.7579346425325546`*^9, 3.7579346486493263`*^9}, {3.759656175806028*^9, 
   3.7596562065646367`*^9}, {3.7596562625582657`*^9, 3.759656265896097*^9}, {
   3.7596563022036076`*^9, 3.759656339260494*^9}, {3.7596563970597134`*^9, 
   3.7596563973252754`*^9}, {3.765784457684078*^9, 3.765784505408221*^9}, {
   3.765784540207429*^9, 3.7657845508349776`*^9}, {3.7657845876698637`*^9, 
   3.7657846529838085`*^9}, {3.7657847006515675`*^9, 
   3.7657847588296933`*^9}, {3.7657848245939894`*^9, 3.7657848836053553`*^9}, 
   3.765784983433568*^9, {3.765786002807413*^9, 3.7657860060670667`*^9}, {
   3.7712250896697893`*^9, 3.7712250992483964`*^9}, {3.7712340808073263`*^9, 
   3.7712340844955645`*^9}, {3.7730370287708435`*^9, 3.77303713017157*^9}, {
   3.7730371681937904`*^9, 3.773037292415783*^9}, {3.773037344077643*^9, 
   3.773037484791333*^9}, {3.773037535483987*^9, 3.7730376815083838`*^9}, {
   3.7730377435955305`*^9, 3.7730377584593687`*^9}, {3.7730378295359216`*^9, 
   3.7730381109311533`*^9}, {3.7730383279583707`*^9, 
   3.7730383590904193`*^9}, {3.7730384371917286`*^9, 3.773038451654493*^9}, {
   3.7730385038926525`*^9, 3.773038509067752*^9}, {3.773039168628809*^9, 
   3.773039177087818*^9}, {3.77304025838821*^9, 3.773040316736215*^9}, {
   3.7730403581344104`*^9, 3.773040372708725*^9}, {3.7730404066233187`*^9, 
   3.7730404696064644`*^9}, {3.7745929765435557`*^9, 3.774592977831086*^9}, {
   3.774593319737465*^9, 3.7745933426482725`*^9}, 3.774593497943567*^9, {
   3.775209557473872*^9, 3.7752095597710047`*^9}},
 CellLabel->"In[41]:=",ExpressionUUID->"e4bbf041-52d8-4555-8ccb-94a4120e2c93"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"{", 
   RowBox[{
   "TestpositionProps", ",", "TestpositionReg", ",", "TestpositionBRST", ",", 
    " ", "TestpositionVertex", ",", " ", "TestmappingOfIndices", ",", " ", 
    "TestnumberOfProps"}], "}"}], " ", "=", " ", 
  RowBox[{"GetPossPropConfigs", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"AcmSTI", "[", 
      RowBox[{"[", 
       RowBox[{"1", ",", "1"}], "]"}], "]"}], "/.", 
     RowBox[{"AcmSTI", "[", 
      RowBox[{"[", "2", "]"}], "]"}]}], ",", "TestPossibleProps"}], 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.773038390098258*^9, 3.7730384044782953`*^9}, {
   3.773041548064191*^9, 3.773041560713038*^9}, {3.774592982642251*^9, 
   3.774592983496941*^9}, {3.7745930536994953`*^9, 3.774593065498084*^9}, 
   3.7745931036946745`*^9},
 CellLabel->"In[43]:=",ExpressionUUID->"300f2718-59a9-4696-9195-828e9f4df6ba"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"3", ",", "5", ",", "7"}], "}"}], ",", 
   RowBox[{"{", "2", "}"}], ",", 
   RowBox[{"{", "8", "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"4", ",", "6"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "A"}], ",", 
       RowBox[{"l", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "A"}], ",", 
       RowBox[{"j", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "A"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "A"}], ",", 
       RowBox[{"l", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "A"}], ",", 
       RowBox[{"j", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "c"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "A"}], ",", 
       RowBox[{"l", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "A"}], ",", 
       RowBox[{"j", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "cbar"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "A"}], ",", 
       RowBox[{"l", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "c"}], ",", 
       RowBox[{"j", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "A"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "A"}], ",", 
       RowBox[{"l", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "c"}], ",", 
       RowBox[{"j", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "c"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "A"}], ",", 
       RowBox[{"l", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "c"}], ",", 
       RowBox[{"j", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "cbar"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "A"}], ",", 
       RowBox[{"l", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "cbar"}], ",", 
       RowBox[{"j", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "A"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "A"}], ",", 
       RowBox[{"l", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "cbar"}], ",", 
       RowBox[{"j", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "c"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "A"}], ",", 
       RowBox[{"l", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "cbar"}], ",", 
       RowBox[{"j", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "cbar"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "cbar"}], ",", 
       RowBox[{"l", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "A"}], ",", 
       RowBox[{"j", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "A"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "cbar"}], ",", 
       RowBox[{"l", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "A"}], ",", 
       RowBox[{"j", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "c"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "cbar"}], ",", 
       RowBox[{"l", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "A"}], ",", 
       RowBox[{"j", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "cbar"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "cbar"}], ",", 
       RowBox[{"l", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "c"}], ",", 
       RowBox[{"j", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "A"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "cbar"}], ",", 
       RowBox[{"l", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "c"}], ",", 
       RowBox[{"j", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "c"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "cbar"}], ",", 
       RowBox[{"l", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "c"}], ",", 
       RowBox[{"j", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "cbar"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "cbar"}], ",", 
       RowBox[{"l", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "cbar"}], ",", 
       RowBox[{"j", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "A"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "cbar"}], ",", 
       RowBox[{"l", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "cbar"}], ",", 
       RowBox[{"j", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "c"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "cbar"}], ",", 
       RowBox[{"l", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "cbar"}], ",", 
       RowBox[{"j", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "cbar"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "c"}], ",", 
       RowBox[{"l", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "A"}], ",", 
       RowBox[{"j", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "A"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "c"}], ",", 
       RowBox[{"l", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "A"}], ",", 
       RowBox[{"j", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "c"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "c"}], ",", 
       RowBox[{"l", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "A"}], ",", 
       RowBox[{"j", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "cbar"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "c"}], ",", 
       RowBox[{"l", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "c"}], ",", 
       RowBox[{"j", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "A"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "c"}], ",", 
       RowBox[{"l", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "c"}], ",", 
       RowBox[{"j", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "c"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "c"}], ",", 
       RowBox[{"l", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "c"}], ",", 
       RowBox[{"j", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "cbar"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "c"}], ",", 
       RowBox[{"l", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "cbar"}], ",", 
       RowBox[{"j", "\[Rule]", "A"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "A"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "c"}], ",", 
       RowBox[{"l", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "cbar"}], ",", 
       RowBox[{"j", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "c"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i$2444", "\[Rule]", "c"}], ",", 
       RowBox[{"l", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$2459", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2443", "\[Rule]", "cbar"}], ",", 
       RowBox[{"j", "\[Rule]", "c"}], ",", 
       RowBox[{"i$2458", "\[Rule]", "cbar"}]}], "}"}]}], "}"}], ",", "3"}], 
  "}"}]], "Output",
 CellChangeTimes->{
  3.7730384054814386`*^9, {3.7730384437286005`*^9, 3.77303845681488*^9}, 
   3.7730385147057743`*^9, 3.7730391790510297`*^9, 3.7730402142109785`*^9, {
   3.7730402854919443`*^9, 3.773040308247566*^9}, 3.7730403663111*^9, {
   3.7730404320442114`*^9, 3.7730404731896977`*^9}, 3.7730415616209745`*^9, 
   3.773123575476128*^9, 3.7733822998651175`*^9, 3.773462959644437*^9, 
   3.7735504427757826`*^9, 3.7745929492328625`*^9, 3.77459298397865*^9, 
   3.774593028659449*^9, 3.7745930659977083`*^9, 3.774593104694974*^9, 
   3.77459314030904*^9, 3.7745932888600254`*^9, {3.7745933300629234`*^9, 
   3.7745933441751895`*^9}, 3.774593513509984*^9, 3.7751957756305513`*^9, 
   3.7752097241783247`*^9, 3.7752797869633746`*^9, 3.775364407303503*^9},
 CellLabel->"Out[43]=",ExpressionUUID->"cf6c1925-02ec-47a5-951d-4a7a4cf9ada7"]
}, Open  ]],

Cell[BoxData[{
 RowBox[{"Clear", "[", "GetPossBRSTConfigs", "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"GetPossBRSTConfigs", "[", 
    RowBox[{"diagram_", ",", "fields_", ",", "positionBRST_"}], "]"}], " ", ":=",
    " ", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"BRSTfieldNames", " ", "=", " ", 
        RowBox[{"{", "}"}]}], ",", 
       RowBox[{"BRSTIndexSummation", " ", "=", " ", 
        RowBox[{"{", "}"}]}], ",", "BRSTIndexPosition", ",", "indexBRST", ",",
        " ", "correspondingIndexSummation", ",", "TotalBRSTIndexSummation"}], 
      "}"}], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"myEcho", "[", 
       RowBox[{"\"\<GetPossBRSTConfigs\>\"", ",", "1"}], "]"}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"BRSTfieldNames", " ", "=", " ", 
       RowBox[{"fields", "[", 
        RowBox[{"[", 
         RowBox[{"\"\<BRSTsources\>\"", ",", "All", ",", "1"}], "]"}], 
        "]"}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"BRSTIndexPosition", " ", "=", " ", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"First", "@", 
           RowBox[{"Flatten", "@", 
            RowBox[{"Position", "[", 
             RowBox[{
              RowBox[{"StringContainsQ", "[", 
               RowBox[{
                RowBox[{"Map", "[", 
                 RowBox[{"ToString", ",", 
                  RowBox[{"diagram", "[", 
                   RowBox[{"[", 
                    RowBox[{
                    RowBox[{"positionBRST", "[", 
                    RowBox[{"[", "#", "]"}], "]"}], ",", "\"\<indices\>\""}], 
                    "]"}], "]"}]}], "]"}], ",", "\"\<Q\>\""}], "]"}], ",", 
              "True"}], "]"}]}]}], ")"}], "&"}], "/@", 
        RowBox[{"Table", "[", 
         RowBox[{"i", ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "1", ",", 
            RowBox[{"Length", "@", "positionBRST"}]}], "}"}]}], "]"}]}]}], 
      ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"indexBRST", " ", "=", " ", 
       RowBox[{
        RowBox[{
         RowBox[{"diagram", "[", 
          RowBox[{"[", 
           RowBox[{
            RowBox[{"positionBRST", "[", 
             RowBox[{"[", "#", "]"}], "]"}], ",", "\"\<indices\>\"", ",", 
            RowBox[{"BRSTIndexPosition", "[", 
             RowBox[{"[", "#", "]"}], "]"}]}], "]"}], "]"}], "&"}], "/@", 
        RowBox[{"Table", "[", 
         RowBox[{"i", ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "1", ",", 
            RowBox[{"Length", "@", "positionBRST"}]}], "}"}]}], "]"}]}]}], 
      ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "gives", " ", "possibilities", " ", "for", " ", "BRST", " ", "field", 
        " ", "summation"}], "*)"}], "\[IndentingNewLine]", 
      RowBox[{"BRSTIndexSummation", " ", "=", " ", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"ArrayReshape", "[", 
           RowBox[{
            RowBox[{"MapThread", "[", 
             RowBox[{"IndexProjection", ",", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"Flatten", "@", 
                 RowBox[{"Table", "[", 
                  RowBox[{"indexBRST", ",", 
                   RowBox[{"Length", "@", "BRSTfieldNames"}]}], "]"}]}], ",", 
                "BRSTfieldNames"}], "}"}]}], "]"}], ",", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"Length", "@", "BRSTfieldNames"}], ",", "1"}], "}"}]}], 
           "]"}], ")"}], "&"}], "/@", 
        RowBox[{"Table", "[", 
         RowBox[{"i", ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "1", ",", 
            RowBox[{"Length", "@", "positionBRST"}]}], "}"}]}], "]"}]}]}], 
      ";", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Length", "@", "BRSTIndexSummation"}], ">", "1"}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"BRSTIndexSummation", " ", "=", " ", 
          RowBox[{"ArrayReshape", "[", 
           RowBox[{
            RowBox[{"Tuples", "[", "BRSTIndexSummation", "]"}], ",", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{
               RowBox[{"Length", "@", 
                RowBox[{"BRSTIndexSummation", "[", 
                 RowBox[{"[", "1", "]"}], "]"}]}], "^", "2"}], ",", 
              RowBox[{"2", "*", 
               RowBox[{"Length", "@", "BRSTIndexSummation"}]}]}], "}"}]}], 
           "]"}]}], ";"}], "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
        "Nothing"}], "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"myEcho", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"\"\<BRST Possibilities: \>\"", ",", "BRSTIndexSummation"}], 
         "}"}], ",", "3"}], "]"}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "give", " ", "the", " ", "corresponding", " ", "field", " ", 
        "possibilities", " ", "for", " ", "the", " ", "upper", " ", "index", 
        " ", "which", " ", "belongs", " ", "to", " ", "_BRST"}], "*)"}], 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"correspondingIndexSummation", " ", "=", " ", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"ArrayReshape", "[", 
           RowBox[{
            RowBox[{"MapThread", "[", 
             RowBox[{"IndexProjection", ",", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"Flatten", "@", 
                 RowBox[{"Table", "[", 
                  RowBox[{
                   RowBox[{"indexBRST", "[", 
                    RowBox[{"[", 
                    RowBox[{"All", ",", "1"}], "]"}], "]"}], ",", 
                   RowBox[{"Length", "@", "BRSTfieldNames"}]}], "]"}]}], ",", 
                RowBox[{"BRSTfieldNames", "[", 
                 RowBox[{"[", 
                  RowBox[{"All", ",", "1"}], "]"}], "]"}]}], "}"}]}], "]"}], 
            ",", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"Length", "@", "BRSTfieldNames"}], ",", "1"}], "}"}]}], 
           "]"}], ")"}], "&"}], "/@", 
        RowBox[{"Table", "[", 
         RowBox[{"i", ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "1", ",", 
            RowBox[{"Length", "@", "positionBRST"}]}], "}"}]}], "]"}]}]}], 
      ";", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Length", "@", "correspondingIndexSummation"}], ">", "1"}], 
        ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"correspondingIndexSummation", " ", "=", " ", 
          RowBox[{"ArrayReshape", "[", 
           RowBox[{
            RowBox[{"Tuples", "[", "correspondingIndexSummation", "]"}], ",", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{
               RowBox[{"Length", "@", 
                RowBox[{"correspondingIndexSummation", "[", 
                 RowBox[{"[", "1", "]"}], "]"}]}], "^", "2"}], ",", 
              RowBox[{"2", "*", 
               RowBox[{"Length", "@", "correspondingIndexSummation"}]}]}], 
             "}"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", ",", 
        "\[IndentingNewLine]", "Nothing"}], "\[IndentingNewLine]", "]"}], ";",
       "\[IndentingNewLine]", 
      RowBox[{"myEcho", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
         "\"\<upper Index Possibilities: \>\"", ",", " ", 
          "correspondingIndexSummation"}], "}"}], ",", "3"}], "]"}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"TotalBRSTIndexSummation", " ", "=", " ", 
       RowBox[{"ArrayReshape", "[", 
        RowBox[{
         RowBox[{"MapThread", "[", 
          RowBox[{"Join", ",", 
           RowBox[{"{", 
            RowBox[{
            "BRSTIndexSummation", ",", "correspondingIndexSummation"}], "}"}],
            ",", "2"}], "]"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"Length", "@", 
             RowBox[{"BRSTIndexSummation", "[", 
              RowBox[{"[", "1", "]"}], "]"}]}], "*", 
            RowBox[{"Length", "@", "BRSTIndexSummation"}]}], ",", "2"}], 
          "}"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"myEcho", "[", 
       RowBox[{"{", 
        RowBox[{
        "\"\<total Index Possibilities: \>\"", ",", 
         "TotalBRSTIndexSummation"}], "}"}], "]"}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"Return", "[", "TotalBRSTIndexSummation", "]"}]}]}], 
    "\[IndentingNewLine]", "]"}]}], 
  "                             "}], "\[IndentingNewLine]"}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.7577601604703484`*^9, 3.7577604405272007`*^9}, {
   3.7577620491897955`*^9, 3.7577620507885294`*^9}, {3.758450666751647*^9, 
   3.758450685175504*^9}, {3.7584507461765604`*^9, 3.758450805395933*^9}, {
   3.758450870594549*^9, 3.758450880345656*^9}, {3.765784965193626*^9, 
   3.7657850074960127`*^9}, {3.7657850660116863`*^9, 
   3.7657851118654084`*^9}, {3.765785466188833*^9, 3.7657854958463326`*^9}, {
   3.765785526817211*^9, 3.7657855573329887`*^9}, {3.765785612601758*^9, 
   3.7657856129929457`*^9}, {3.7657895963916817`*^9, 3.765789612315548*^9}, {
   3.765790478709752*^9, 3.7657906159561143`*^9}, {3.7657907090109053`*^9, 
   3.765790711002688*^9}, {3.7657907456663976`*^9, 3.765790770234191*^9}, {
   3.765791169412567*^9, 3.765791181666499*^9}, {3.7657914499645996`*^9, 
   3.765791455135186*^9}, {3.771225104952245*^9, 3.771225114687318*^9}, {
   3.773041032638293*^9, 3.773041059599394*^9}, {3.7730416205233583`*^9, 
   3.7730418230676064`*^9}, {3.7730419120024004`*^9, 3.773042146523861*^9}, {
   3.773042299554874*^9, 3.7730423436368504`*^9}, {3.7730424083242435`*^9, 
   3.7730424285909195`*^9}, {3.773042501381665*^9, 3.773042513750887*^9}, {
   3.7730458782472253`*^9, 3.773046023861928*^9}, {3.7730460639255605`*^9, 
   3.773046082349971*^9}, {3.7730461187348576`*^9, 3.7730461211220903`*^9}, {
   3.7730461558784013`*^9, 3.773046160029862*^9}, {3.7731244722162466`*^9, 
   3.773124495527889*^9}, {3.7731249683929834`*^9, 3.773124978952838*^9}, {
   3.773125368701049*^9, 3.7731253895832605`*^9}, {3.773125425791855*^9, 
   3.773125440479904*^9}, {3.7731258491449127`*^9, 3.773125876481126*^9}, {
   3.7731259865499287`*^9, 3.7731260102708006`*^9}, {3.7731260800503397`*^9, 
   3.7731261097136087`*^9}, {3.773126151596346*^9, 3.7731262061887274`*^9}, {
   3.7731262466414194`*^9, 3.773126300813407*^9}, {3.7731263899790697`*^9, 
   3.7731263902645473`*^9}, {3.77312660838768*^9, 3.773126618884323*^9}, {
   3.7731267557257986`*^9, 3.773126782965834*^9}, {3.773126816366644*^9, 
   3.773126863617676*^9}, {3.773126894122677*^9, 3.7731269616234016`*^9}, {
   3.773127003395808*^9, 3.7731270630033092`*^9}, {3.7731271184252872`*^9, 
   3.7731271208587437`*^9}, {3.7731271810220857`*^9, 3.773127357123968*^9}, {
   3.7731278349715385`*^9, 3.7731278642329507`*^9}, {3.773128048164779*^9, 
   3.773128176862212*^9}, 3.773128214365234*^9, {3.7735558668549123`*^9, 
   3.773555867093518*^9}, {3.774594040385867*^9, 3.7745940881637297`*^9}, {
   3.774594179679223*^9, 3.77459423625568*^9}, {3.774594475115733*^9, 
   3.774594520334383*^9}, {3.774594552399229*^9, 3.7745945872868457`*^9}, 
   3.774594622927398*^9, {3.7745946777884655`*^9, 3.77459467849184*^9}, {
   3.774594713521218*^9, 3.774594786791503*^9}, {3.7745948211330385`*^9, 
   3.7745949931004815`*^9}, 3.774595052297141*^9},
 CellLabel->"In[44]:=",ExpressionUUID->"a18174f1-58af-4bbc-b154-4abd89eca27e"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TestBRSTIndexSummation", " ", "=", " ", 
  RowBox[{"GetPossBRSTConfigs", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"AcmSTI", "[", 
      RowBox[{"[", 
       RowBox[{"1", ",", "1"}], "]"}], "]"}], "/.", 
     RowBox[{"AcmSTI", "[", 
      RowBox[{"[", "2", "]"}], "]"}]}], ",", "fields", ",", " ", 
    "TestpositionBRST"}], "]"}]}]], "Input",
 CellChangeTimes->{{3.7730415373786125`*^9, 3.7730416078889227`*^9}, {
  3.7731270940200624`*^9, 3.7731270948339615`*^9}, {3.7731281478741055`*^9, 
  3.7731281486531796`*^9}, {3.7731281999553204`*^9, 3.773128201708*^9}, {
  3.774593660123681*^9, 3.7745936657476788`*^9}, {3.7745941669906716`*^9, 
  3.7745941670531626`*^9}},
 CellLabel->"In[46]:=",ExpressionUUID->"1336cee2-57da-4b61-a21e-cafd8a77d4ac"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      RowBox[{"Q", "[", "i", "]"}], "\[Rule]", 
      RowBox[{"Q", "[", "A", "]"}]}], ",", 
     RowBox[{"i", "\[Rule]", "A"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      RowBox[{"Q", "[", "i", "]"}], "\[Rule]", 
      RowBox[{"Q", "[", "cbar", "]"}]}], ",", 
     RowBox[{"i", "\[Rule]", "cbar"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      RowBox[{"Q", "[", "i", "]"}], "\[Rule]", 
      RowBox[{"Q", "[", "c", "]"}]}], ",", 
     RowBox[{"i", "\[Rule]", "c"}]}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.773128136108572*^9, 3.773128202642366*^9}, 
   3.773382307429017*^9, 3.773462964707966*^9, 3.773550448533473*^9, {
   3.7745940748967085`*^9, 3.7745940910235715`*^9}, 3.7745941679438896`*^9, {
   3.7745942211477804`*^9, 3.77459423949074*^9}, {3.774594487038539*^9, 
   3.7745945216467752`*^9}, 3.774594633694525*^9, {3.774594832465068*^9, 
   3.7745949099138894`*^9}, {3.774594942619938*^9, 3.7745949946317253`*^9}, 
   3.774595107100608*^9, 3.7751957799967175`*^9, 3.7752097242768965`*^9, 
   3.775279787145618*^9, 3.775364407537862*^9},
 CellLabel->"Out[46]=",ExpressionUUID->"b170064c-b3d1-45f1-8a9a-4626cf18b8c3"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "kick", " ", "out", " ", "all", " ", "impossible", " ", "regulator", " ", 
    "AND", " ", "BRST", " ", "index", " ", "configurations"}], "*)"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"Clear", "[", "CheckVertexConfig", "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"CheckVertexConfig", "[", 
     RowBox[{
     "fields_", ",", "regIndex_", ",", " ", "BRSTIndex_", ",", "vertexIndex_",
       ",", "onecombinedIndexConfigs_", ",", "possibleRegulators_"}], "]"}], 
    " ", ":=", " ", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"TestConfigReg", ",", "TestConfigVert", ",", 
        RowBox[{"vertexIndexdummy", " ", "=", " ", "vertexIndex"}], ",", 
        "TestConfigBRST", ",", 
        RowBox[{"BRSTIndexdummy", " ", "=", " ", "BRSTIndex"}], ",", 
        "TestConfigTot", ",", "fermionNumberVertex", ",", "dummyEntry", ",", 
        " ", "seq", ",", "seq2", ",", " ", "TestConfig"}], "}"}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"myEcho", "[", 
        RowBox[{"\"\<CheckVertexConfigs\>\"", ",", "1"}], "]"}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"myEcho", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
          "\"\<Index Config to check: \>\"", ",", " ", "regIndex", ",", 
           "vertexIndex", ",", "BRSTIndex"}], "}"}], ",", "2"}], "]"}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "@", "regIndex"}], ">", "0"}], ",", 
         "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"TestConfigReg", " ", "=", " ", 
           RowBox[{"{", 
            RowBox[{"MemberQ", "[", 
             RowBox[{"possibleRegulators", ",", "regIndex"}], "]"}], "}"}]}], 
          ";"}], "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"TestConfigReg", " ", "=", " ", 
           RowBox[{"{", "True", "}"}]}], ";"}]}], "\[IndentingNewLine]", 
        "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"myEcho", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"\"\<check Reg: \>\"", ",", " ", "TestConfigReg"}], "}"}], 
         ",", "3"}], "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"TestConfigReg", " ", "\[Equal]", " ", 
          RowBox[{"{", "False", "}"}]}], ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"Return", "[", "\"\<dummyEntry\>\"", "]"}], ";"}]}], 
        "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "@", "vertexIndex"}], " ", ">", "0"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"Length", "@", "Truncation"}], ">", "0"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"Length", "@", 
                 RowBox[{"vertexIndex", "[", 
                  RowBox[{"[", "1", "]"}], "]"}]}], ">", "1"}], ",", 
               "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{"TestConfigVert", " ", "=", " ", 
                 RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
                "\[IndentingNewLine]", 
                RowBox[{
                 RowBox[{
                  RowBox[{"(", 
                   RowBox[{
                    RowBox[{
                    RowBox[{"vertexIndexdummy", "[", 
                    RowBox[{"[", "#", "]"}], "]"}], " ", "=", " ", 
                    RowBox[{
                    RowBox[{"vertexIndex", "[", 
                    RowBox[{"[", "#", "]"}], "]"}], "/.", 
                    RowBox[{
                    RowBox[{"{", "seq2___", "}"}], "\[Rule]", " ", 
                    RowBox[{"{", 
                    RowBox[{"OrderlessPatternSequence", "[", "seq2", "]"}], 
                    "}"}]}]}]}], ";", "\[IndentingNewLine]", 
                    RowBox[{"TestConfigVert", " ", "=", "  ", 
                    RowBox[{"Join", "[", 
                    RowBox[{"TestConfigVert", ",", 
                    RowBox[{"{", 
                    RowBox[{"MemberQ", "[", 
                    RowBox[{"Truncation", ",", 
                    RowBox[{"vertexIndexdummy", "[", 
                    RowBox[{"[", "#", "]"}], "]"}]}], "]"}], "}"}]}], "]"}]}],
                     ";"}], "\[IndentingNewLine]", ")"}], "&"}], "/@", 
                 RowBox[{"Table", "[", 
                  RowBox[{"i", ",", 
                   RowBox[{"{", 
                    RowBox[{"i", ",", "1", ",", 
                    RowBox[{"Length", "@", "vertexIndex"}]}], "}"}]}], 
                  "]"}]}], ";", "\[IndentingNewLine]", 
                RowBox[{"If", "[", 
                 RowBox[{
                  RowBox[{"TestConfigVert", " ", "\[Equal]", " ", 
                   RowBox[{"Table", "[", 
                    RowBox[{"True", ",", 
                    RowBox[{"Length", "@", "vertexIndex"}]}], "]"}]}], ",", 
                  "\[IndentingNewLine]", 
                  RowBox[{
                   RowBox[{"myEcho", "[", 
                    RowBox[{"\"\<true vertex\>\"", ",", "3"}], "]"}], ";", 
                   "\[IndentingNewLine]", "Nothing"}], ",", 
                  "\[IndentingNewLine]", 
                  RowBox[{
                   RowBox[{"myEcho", "[", 
                    RowBox[{"\"\<false vertex\>\"", ",", "3"}], "]"}], ";", 
                   "\[IndentingNewLine]", 
                   RowBox[{"Return", "[", "\"\<dummyEntry\>\"", "]"}], 
                   ";"}]}], "\[IndentingNewLine]", "]"}], ";"}], 
               "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
               "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{"vertexIndexdummy", "=", " ", 
                 RowBox[{"vertexIndex", "/.", 
                  RowBox[{
                   RowBox[{"{", "seq2___", "}"}], "\[Rule]", " ", 
                   RowBox[{"{", 
                    RowBox[{"OrderlessPatternSequence", "[", "seq2", "]"}], 
                    "}"}]}]}]}], ";", "\[IndentingNewLine]", 
                "\[IndentingNewLine]", 
                RowBox[{"TestConfigVert", " ", "=", "  ", 
                 RowBox[{"{", 
                  RowBox[{"MemberQ", "[", 
                   RowBox[{"Truncation", ",", "vertexIndexdummy"}], "]"}], 
                  "}"}]}], ";", "\[IndentingNewLine]", 
                RowBox[{"If", "[", 
                 RowBox[{
                  RowBox[{"TestConfigVert", " ", "\[Equal]", " ", 
                   RowBox[{"{", "False", "}"}]}], ",", "\[IndentingNewLine]", 
                  RowBox[{
                   RowBox[{"Return", "[", "\"\<dummyEntry\>\"", "]"}], 
                   ";"}]}], "\[IndentingNewLine]", "]"}], ";"}]}], 
              "\[IndentingNewLine]", "]"}], ";"}], "\[IndentingNewLine]", ",",
             "\[IndentingNewLine]", "Nothing"}], "\[IndentingNewLine]", 
           RowBox[{"(*", 
            RowBox[{"!!", 
             RowBox[{"!!", 
              RowBox[{"!!", 
               RowBox[{"!!", 
                RowBox[{"!!", 
                 RowBox[{"!!", 
                  RowBox[{"!!", 
                   RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{
                    "here", " ", "we", " ", "need", " ", "to", " ", "insert", 
                    " ", "the", " ", "general", " ", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"case", "!!"}], "!!"}], "!!"}], "!!"}], "!!"}], 
                    "!!"}], "!!"}], "!!"}], "!!"}], "!!"}], "!!"}], "!!"}], 
                    "!!"}], "!!"}], "!!"}], "!!"}], "!!"}], "!!"}], "!!"}], 
                    "!!"}], "!!"}], "!!"}], 
                    "!"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], 
           "\[IndentingNewLine]", "]"}], ";"}]}], "\[IndentingNewLine]", 
        "]"}], ";", "\[IndentingNewLine]", 
       RowBox[{"myEcho", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"\"\<check Vertices: \>\"", ",", " ", "TestConfigVert"}], 
          "}"}], ",", "3"}], "]"}], ";", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"(*", " ", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{
               "we", " ", "need", " ", "to", " ", "check", " ", "the", " ", 
                "following", " ", "for", " ", "more", " ", "than", " ", "one",
                 " ", 
                RowBox[{"lower", "/", "BRST"}], " ", "index"}], "..."}], 
              ".."}], " ", "!!"}], "!!"}], "!!"}], "!!"}], "!"}], "*)"}], 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "@", "BRSTIndex"}], " ", ">", "0"}], ",", 
         "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"Length", "@", "Truncation"}], ">", "0"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"Length", "@", 
                 RowBox[{"BRSTIndex", "[", 
                  RowBox[{"[", "1", "]"}], "]"}]}], ">", "1"}], ",", 
               "\[IndentingNewLine]", "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{"TestConfigBRST", " ", "=", " ", 
                 RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
                "\[IndentingNewLine]", 
                RowBox[{
                 RowBox[{
                  RowBox[{"(", 
                   RowBox[{
                    RowBox[{
                    RowBox[{"BRSTIndexdummy", "[", 
                    RowBox[{"[", "#", "]"}], "]"}], " ", "=", " ", 
                    RowBox[{
                    RowBox[{"BRSTIndex", "[", 
                    RowBox[{"[", "#", "]"}], "]"}], "/.", 
                    RowBox[{
                    RowBox[{"{", "seq2___", "}"}], "\[Rule]", " ", 
                    RowBox[{"{", 
                    RowBox[{"OrderlessPatternSequence", "[", "seq2", "]"}], 
                    "}"}]}]}]}], ";", "\[IndentingNewLine]", 
                    RowBox[{"TestConfigBRST", " ", "=", "  ", 
                    RowBox[{"Join", "[", 
                    RowBox[{"TestConfigBRST", ",", 
                    RowBox[{"{", 
                    RowBox[{"MemberQ", "[", 
                    RowBox[{"Truncation", ",", 
                    RowBox[{"BRSTIndexdummy", "[", 
                    RowBox[{"[", "#", "]"}], "]"}]}], "]"}], "}"}]}], "]"}]}],
                     ";"}], "\[IndentingNewLine]", ")"}], "&"}], "/@", 
                 RowBox[{"Table", "[", 
                  RowBox[{"i", ",", 
                   RowBox[{"{", 
                    RowBox[{"i", ",", "1", ",", 
                    RowBox[{"Length", "@", "BRSTIndex"}]}], "}"}]}], "]"}]}], 
                ";", "\[IndentingNewLine]", 
                RowBox[{"If", "[", 
                 RowBox[{
                  RowBox[{"TestConfigVert", " ", "\[Equal]", " ", 
                   RowBox[{"Table", "[", 
                    RowBox[{"True", ",", 
                    RowBox[{"Length", "@", "vertexIndex"}]}], "]"}]}], ",", 
                  "\[IndentingNewLine]", 
                  RowBox[{
                   RowBox[{"myEcho", "[", 
                    RowBox[{"\"\<true BRST\>\"", ",", "3"}], "]"}], ";", 
                   "\[IndentingNewLine]", "Nothing"}], ",", 
                  "\[IndentingNewLine]", 
                  RowBox[{
                   RowBox[{"myEcho", "[", 
                    RowBox[{"\"\<false BRST\>\"", ",", "3"}], "]"}], ";", 
                   "\[IndentingNewLine]", 
                   RowBox[{"Return", "[", "\"\<dummyEntry\>\"", "]"}], 
                   ";"}]}], "\[IndentingNewLine]", "]"}], ";"}], 
               "\[IndentingNewLine]", "\[IndentingNewLine]", ",", 
               "\[IndentingNewLine]", "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{"BRSTIndexdummy", " ", "=", " ", 
                 RowBox[{"BRSTIndex", "/.", 
                  RowBox[{
                   RowBox[{"{", "seq2___", "}"}], "\[Rule]", " ", 
                   RowBox[{"{", 
                    RowBox[{"OrderlessPatternSequence", "[", "seq2", "]"}], 
                    "}"}]}]}]}], ";", "\[IndentingNewLine]", 
                "\[IndentingNewLine]", 
                RowBox[{"TestConfigBRST", " ", "=", "  ", 
                 RowBox[{"{", 
                  RowBox[{"MemberQ", "[", 
                   RowBox[{"Truncation", ",", "BRSTIndexdummy"}], "]"}], 
                  "}"}]}], ";", "\[IndentingNewLine]", 
                RowBox[{"If", "[", 
                 RowBox[{
                  RowBox[{"TestConfigBRST", " ", "\[Equal]", " ", 
                   RowBox[{"{", "False", "}"}]}], ",", "\[IndentingNewLine]", 
                  RowBox[{
                   RowBox[{"myEcho", "[", 
                    RowBox[{"\"\<false BRST\>\"", ",", "3"}], "]"}], ";", 
                   "\[IndentingNewLine]", 
                   RowBox[{"Return", "[", "\"\<dummyEntry\>\"", "]"}], 
                   ";"}]}], "\[IndentingNewLine]", "]"}], ";"}]}], 
              "\[IndentingNewLine]", "]"}], ";"}], "\[IndentingNewLine]", ",",
             "\[IndentingNewLine]", "Nothing"}], "\[IndentingNewLine]", 
           RowBox[{"(*", 
            RowBox[{"!!", 
             RowBox[{"!!", 
              RowBox[{"!!", 
               RowBox[{"!!", 
                RowBox[{"!!", 
                 RowBox[{"!!", 
                  RowBox[{"!!", 
                   RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{
                    "here", " ", "we", " ", "need", " ", "to", " ", "insert", 
                    " ", "the", " ", "general", " ", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"case", "!!"}], "!!"}], "!!"}], "!!"}], "!!"}], 
                    "!!"}], "!!"}], "!!"}], "!!"}], "!!"}], "!!"}], "!!"}], 
                    "!!"}], "!!"}], "!!"}], "!!"}], "!!"}], "!!"}], "!!"}], 
                    "!!"}], "!!"}], "!!"}], 
                    "!"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], 
           "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
          RowBox[{"myEcho", "[", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"\"\<check BRST: \>\"", ",", " ", "TestConfigBRST"}], 
             "}"}], ",", "3"}], "]"}], ";"}]}], "\[IndentingNewLine]", "]"}], 
       ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", 
       RowBox[{"myEcho", "[", 
        RowBox[{"\"\<all true :)\>\"", ",", "2"}], "]"}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"Return", "[", "onecombinedIndexConfigs", "]"}], ";"}]}], 
     "\[IndentingNewLine]", "\[IndentingNewLine]", "]"}]}]}]}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.7577608534408455`*^9, 3.7577610561160173`*^9}, {
   3.757761778511882*^9, 3.757761784394025*^9}, {3.757761927019028*^9, 
   3.757761954364153*^9}, {3.7577625073471613`*^9, 3.7577625529002905`*^9}, {
   3.757762617434273*^9, 3.757762631394833*^9}, {3.7577626784537916`*^9, 
   3.7577626866406126`*^9}, {3.7577627780334935`*^9, 
   3.7577627886250205`*^9}, {3.757836123186236*^9, 3.7578361284617357`*^9}, {
   3.757836248732407*^9, 3.7578362517026625`*^9}, {3.7578364715058413`*^9, 
   3.7578364967275453`*^9}, {3.757836572417348*^9, 3.7578366035938663`*^9}, {
   3.757836687278533*^9, 3.7578366988804684`*^9}, 3.757836740849797*^9, {
   3.7578367758306007`*^9, 3.757836798435089*^9}, {3.7578371858780518`*^9, 
   3.7578372043893814`*^9}, 3.7578373436576633`*^9, {3.7578382608678713`*^9, 
   3.757838272962781*^9}, {3.7578534709540033`*^9, 3.7578534874323807`*^9}, 
   3.7579332006806116`*^9, 3.7579332344162436`*^9, {3.757933315229732*^9, 
   3.7579333174542894`*^9}, {3.757933381745676*^9, 3.7579333999741364`*^9}, {
   3.757935202463704*^9, 3.757935229398782*^9}, {3.757937555716342*^9, 
   3.757937720611619*^9}, {3.7579384756091347`*^9, 3.757938516038378*^9}, {
   3.7579385608851833`*^9, 3.757938615036069*^9}, {3.757938923885192*^9, 
   3.7579390997647405`*^9}, {3.75793915434179*^9, 3.7579391670678496`*^9}, {
   3.7579392726747065`*^9, 3.757939325322998*^9}, {3.7579395816215663`*^9, 
   3.7579396253509083`*^9}, {3.7579405891463194`*^9, 
   3.7579406839482126`*^9}, {3.757940890408815*^9, 3.757940902145547*^9}, {
   3.7579409823103127`*^9, 3.7579409900554504`*^9}, {3.7579411118088946`*^9, 
   3.7579411136999226`*^9}, {3.7579414307379217`*^9, 
   3.7579414691238585`*^9}, {3.757941545589282*^9, 3.757941587383749*^9}, {
   3.757941691944214*^9, 3.7579417009550033`*^9}, {3.7579419424696975`*^9, 
   3.75794194354491*^9}, {3.7579419981577044`*^9, 3.7579420014722385`*^9}, {
   3.765792870090479*^9, 3.7657929425719466`*^9}, {3.7657935570776787`*^9, 
   3.765793564739852*^9}, {3.7657936549537363`*^9, 3.7657938229211006`*^9}, {
   3.765793903974888*^9, 3.765794095476761*^9}, {3.7657941656034517`*^9, 
   3.7657942734443064`*^9}, 3.7657943165668507`*^9, {3.76579466931239*^9, 
   3.765794676985325*^9}, {3.771225117906441*^9, 3.7712251262974887`*^9}, {
   3.7712342266352434`*^9, 3.771234229807266*^9}, {3.771234648275079*^9, 
   3.771234653807211*^9}, {3.773046887704287*^9, 3.7730470131507792`*^9}, {
   3.7730471575655203`*^9, 3.773047181108458*^9}, {3.773047377452282*^9, 
   3.773047380731181*^9}, {3.7730474119036627`*^9, 3.773047591337635*^9}, {
   3.7730476952989354`*^9, 3.773047780346716*^9}, {3.773049473690278*^9, 
   3.773049561428755*^9}, {3.773049757740611*^9, 3.773049879254271*^9}, {
   3.773123594724595*^9, 3.773123843807107*^9}, {3.773123902255287*^9, 
   3.7731239038572474`*^9}, {3.7731239462675405`*^9, 
   3.7731239852257967`*^9}, {3.7733851199938297`*^9, 3.773385218256152*^9}, {
   3.7733853519474506`*^9, 3.7733854118432055`*^9}, {3.773385917441619*^9, 
   3.77338592427866*^9}, {3.773386150446505*^9, 3.773386168950864*^9}, {
   3.7733862520052795`*^9, 3.7733862543964624`*^9}, {3.7733862998656287`*^9, 
   3.773386357379989*^9}, {3.7733868781833386`*^9, 3.773387151643544*^9}, {
   3.7733876816898303`*^9, 3.7733876944835043`*^9}, {3.773390484774825*^9, 
   3.7733905731215534`*^9}, 3.7733910736151204`*^9, 3.7733912687285557`*^9, {
   3.773391347886346*^9, 3.773391386822987*^9}, 3.773391616020129*^9, {
   3.773392170236961*^9, 3.7733923054641795`*^9}, {3.773394559739008*^9, 
   3.7733945670654182`*^9}, {3.773394644430272*^9, 3.773394648813614*^9}, {
   3.773394745488434*^9, 3.77339475191525*^9}, {3.7733948954713573`*^9, 
   3.7733949883675594`*^9}, {3.773395184501689*^9, 3.773395199062755*^9}, {
   3.7733953036503525`*^9, 3.773395305240104*^9}, {3.7733953537513933`*^9, 
   3.773395360313848*^9}, {3.773395409614028*^9, 3.7733954215570946`*^9}, {
   3.773395535347848*^9, 3.7733955401450195`*^9}, {3.773395712364648*^9, 
   3.773395716617244*^9}, {3.7735558794162183`*^9, 3.7735558848338594`*^9}, {
   3.774600730291447*^9, 3.774600753229185*^9}, {3.7746008024733086`*^9, 
   3.774600804132814*^9}, {3.774601153392935*^9, 3.774601157725764*^9}, {
   3.775195781298979*^9, 3.7751957827330694`*^9}, {3.775209570256534*^9, 
   3.77520957997684*^9}},
 Background->RGBColor[1, 0.9, 0.8],
 CellLabel->"In[47]:=",ExpressionUUID->"b80a10fd-f844-4510-92c8-adae9c585af9"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TestCombIndexConfigs", " ", "=", " ", 
  RowBox[{"CheckVertexConfig", "[", 
   RowBox[{"fields", ",", 
    RowBox[{"{", 
     RowBox[{"A", ",", "A"}], "}"}], ",", " ", 
    RowBox[{"{", 
     RowBox[{"A", ",", "K"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"A", ",", "c", ",", "A"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"A", ",", "A", ",", "A"}], "}"}]}], "}"}], ",", 
    RowBox[{"TestIndexConfigs", "[", 
     RowBox[{"[", "1", "]"}], "]"}], ",", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"A", ",", "A"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"c", ",", "cbar"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"cbar", ",", "c"}], "}"}]}], "}"}]}], "]"}]}]], "Input",
 CellChangeTimes->{{3.773386088585843*^9, 3.7733861249192605`*^9}, {
  3.773396089131418*^9, 3.7733961107107196`*^9}, {3.7733961488128443`*^9, 
  3.7733961544996367`*^9}},
 CellLabel->"In[49]:=",ExpressionUUID->"9e7b7ed0-4223-485e-9bf1-770a93d24def"],

Cell[BoxData[
 TemplateBox[{
  "Part","partd",
   "\"Part specification \\!\\(\\*RowBox[{\\\"TestIndexConfigs\\\", \\\"\
\[LeftDoubleBracket]\\\", \\\"1\\\", \\\"\[RightDoubleBracket]\\\"}]\\) is \
longer than depth of object.\"",2,49,1,30565267267362949129,"Local"},
  "MessageTemplate"]], "Message", "MSG",
 CellChangeTimes->{3.775195786547961*^9, 3.775209724386241*^9, 
  3.77527978728621*^9, 3.7753644077877636`*^9},
 CellLabel->
  "During evaluation of \
In[49]:=",ExpressionUUID->"e3621570-3ec4-48f7-a5e9-bb203f7c4c21"],

Cell[BoxData["\<\"dummyEntry\"\>"], "Output",
 CellChangeTimes->{3.773396155591726*^9, 3.773462971671332*^9, 
  3.773550455302685*^9, 3.7746005506388717`*^9, 3.775195787147197*^9, 
  3.775209724386241*^9, 3.77527978728621*^9, 3.7753644078039055`*^9},
 CellLabel->"Out[49]=",ExpressionUUID->"45aea4eb-2716-47fd-9121-bc84dcc40315"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
   "split", " ", "field", " ", "object", " ", "list", " ", "into", " ", 
    "lists", " ", "such", " ", "that", " ", "each", " ", "field", " ", "only",
     " ", "appears", " ", "one", " ", "per", " ", "list"}], " ", "*)"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"Clear", "[", "SplitIndexList", "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"SplitIndexList", "[", "listRight_", "]"}], ":=", 
    RowBox[{"SplitIndexList", "[", 
     RowBox[{
      RowBox[{"{", "}"}], ",", "listRight"}], "]"}]}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"SplitIndexList", "[", 
     RowBox[{
      RowBox[{"{", "}"}], ",", "listRight_"}], "]"}], ":=", 
    RowBox[{"SplitIndexList", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"{", 
        RowBox[{"First", "[", "listRight", "]"}], "}"}], "}"}], ",", 
      RowBox[{"Drop", "[", 
       RowBox[{"listRight", ",", "1"}], "]"}]}], "]"}]}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"SplitIndexList", "[", 
     RowBox[{"listsLeft_", ",", "listRight_"}], "]"}], ":=", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", "newLeftPart", "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"newLeftPart", "=", 
        RowBox[{"If", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"MemberQ", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"Last", "[", "listsLeft", "]"}], "[", 
             RowBox[{"[", 
              RowBox[{"All", ",", "1"}], "]"}], "]"}], ",", 
            RowBox[{
             RowBox[{"First", "[", "listRight", "]"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}]}], "]"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"listsLeft", "~", "Join", "~", 
           RowBox[{"{", 
            RowBox[{"{", 
             RowBox[{"First", "[", "listRight", "]"}], "}"}], "}"}]}], ",", 
          RowBox[{
           RowBox[{"Drop", "[", 
            RowBox[{"listsLeft", ",", 
             RowBox[{"-", "1"}]}], "]"}], "~", "Join", "~", 
           RowBox[{"{", 
            RowBox[{"Append", "[", 
             RowBox[{
              RowBox[{"Last", "[", "listsLeft", "]"}], ",", 
              RowBox[{"First", "[", "listRight", "]"}]}], "]"}], "}"}]}]}], 
         "\[IndentingNewLine]", "]"}]}], ";", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", 
       RowBox[{"SplitIndexList", "[", 
        RowBox[{"newLeftPart", ",", 
         RowBox[{"Drop", "[", 
          RowBox[{"listRight", ",", "1"}], "]"}]}], "]"}]}]}], 
     "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"SplitIndexList", "[", 
     RowBox[{"listsLeft_", ",", 
      RowBox[{"{", "}"}]}], "]"}], ":=", "listsLeft"}]}]}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.758886393537245*^9, 3.7588864675282373`*^9}, {
  3.7588865047517843`*^9, 3.758886601152394*^9}, {3.7588867478707323`*^9, 
  3.7588867749348035`*^9}, {3.7588868300377784`*^9, 3.758886953759018*^9}, {
  3.7588869839106073`*^9, 3.7588874291720715`*^9}, {3.758887478037094*^9, 
  3.758887481172806*^9}, {3.7590416663180285`*^9, 3.7590416701176243`*^9}, {
  3.7590432429103127`*^9, 3.759043251444995*^9}, {3.759061816990327*^9, 
  3.759061834672576*^9}, {3.771225256697523*^9, 3.7712252647532654`*^9}, {
  3.7734630617025785`*^9, 3.7734630887872114`*^9}, {3.7746069985058827`*^9, 
  3.774607011331751*^9}, {3.7746070505949945`*^9, 3.7746070749115314`*^9}},
 CellLabel->"In[50]:=",ExpressionUUID->"6607ba91-a16e-423e-a158-0390f756e7b1"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"SplitIndexList", "[", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"cbar", ",", "i"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"c", ",", "j"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"cbar", ",", "l"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"c", ",", "k"}], "}"}]}], "}"}], "]"}]], "Input",
 CellChangeTimes->{{3.7590629390253124`*^9, 3.7590629705924892`*^9}, {
  3.7734663518310747`*^9, 3.7734663534597197`*^9}, {3.774606959626667*^9, 
  3.7746069628739805`*^9}},
 CellLabel->"In[55]:=",ExpressionUUID->"08e53359-a5d9-4e77-b712-1a299f0a74de"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"cbar", ",", "i"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"c", ",", "j"}], "}"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"cbar", ",", "l"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"c", ",", "k"}], "}"}]}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.7590629519949474`*^9, 3.7590629709947453`*^9}, 
   3.759131439904364*^9, 3.7591506521689115`*^9, 3.759217054084448*^9, 
   3.7592219472869034`*^9, 3.7594849053191695`*^9, 3.7594952656185484`*^9, 
   3.7595624497820816`*^9, 3.759644455572856*^9, 3.7596545271059675`*^9, 
   3.759736037775463*^9, 3.76103806603823*^9, 3.761282691795913*^9, 
   3.761305324432393*^9, 3.7613860191862307`*^9, 3.7614552954173*^9, 
   3.761896598946706*^9, {3.762768749365503*^9, 3.762768765487488*^9}, 
   3.764479430076051*^9, 3.765180289300769*^9, 3.7652656717184377`*^9, 
   3.765530992748639*^9, 3.7656074936548853`*^9, 3.766126515434002*^9, 
   3.766210434409882*^9, 3.7662955379936295`*^9, 3.766488976245776*^9, 
   3.766742413845751*^9, 3.7674406035008965`*^9, 3.7675057891499367`*^9, 
   3.7679355134236536`*^9, 3.7685445766798077`*^9, 3.768634152402788*^9, 
   3.7688039487002535`*^9, 3.768815391820942*^9, 3.768887403264536*^9, 
   3.770538741369873*^9, 3.7706306515404854`*^9, 3.7710594342251773`*^9, 
   3.7712239041479816`*^9, 3.771234351776637*^9, 3.773396206838722*^9, 
   3.7734629951075897`*^9, 3.7734663544341145`*^9, 3.7735504582175407`*^9, 
   3.774600570141745*^9, 3.7746069633476934`*^9, 3.7746070132239127`*^9, {
   3.7746070649204044`*^9, 3.774607079196215*^9}, 3.775195809863296*^9, 
   3.775209724479969*^9, 3.7752797873799367`*^9, 3.775364408303794*^9},
 CellLabel->"Out[55]=",ExpressionUUID->"25bb050b-ed48-4bc8-9533-64dbdaf9c258"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"SplitIndexList", "[", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"cbar", ",", "i"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"cbar", ",", "j"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"c", ",", "l"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"c", ",", "k"}], "}"}]}], "}"}], "]"}]], "Input",
 CellChangeTimes->{{3.774608206054225*^9, 3.774608208482982*^9}},
 CellLabel->"In[56]:=",ExpressionUUID->"2dac4d7f-62c4-4746-950b-672f5bcb9f2e"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"{", 
     RowBox[{"cbar", ",", "i"}], "}"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"cbar", ",", "j"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"c", ",", "l"}], "}"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"{", 
     RowBox[{"c", ",", "k"}], "}"}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{3.774608209036642*^9, 3.775195811225848*^9, 
  3.775209724542454*^9, 3.775279787504909*^9, 3.7753644084287605`*^9},
 CellLabel->"Out[56]=",ExpressionUUID->"480b4e55-e4e9-4a24-b707-2b6181ab890e"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"SplitIndexList", "[", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"cbar", ",", "i"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"c", ",", "j"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"cbar", ",", "l"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"c", ",", "k"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"A", ",", "m"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"c", ",", "n"}], "}"}]}], "}"}], "]"}]], "Input",
 CellChangeTimes->{{3.7746070842317505`*^9, 3.774607090756792*^9}},
 CellLabel->"In[57]:=",ExpressionUUID->"85a4f529-606c-428e-a2e5-d57e843a9378"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"cbar", ",", "i"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"c", ",", "j"}], "}"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"cbar", ",", "l"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"c", ",", "k"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"A", ",", "m"}], "}"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"{", 
     RowBox[{"c", ",", "n"}], "}"}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{3.7746070911118765`*^9, 3.775195813140977*^9, 
  3.775209724604973*^9, 3.7752797875674124`*^9, 3.775364408569358*^9},
 CellLabel->"Out[57]=",ExpressionUUID->"b523805d-1dd0-4507-8bbf-80b33acfed86"]
}, Open  ]],

Cell[BoxData[{
 RowBox[{"Clear", "[", "OrderByFieldTypes", "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"OrderByFieldTypes", "[", 
   RowBox[{"testList_", ",", "sign_", ",", "fields_"}], "]"}], " ", ":=", " ", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"testfield", ",", "positionTestfield", ",", 
      RowBox[{"dummysign", " ", "=", " ", "sign"}], ",", 
      RowBox[{"jointfermionicList", " ", "=", " ", 
       RowBox[{"{", "}"}]}], ",", " ", 
      RowBox[{"jointantifermionicList", " ", "=", " ", 
       RowBox[{"{", "}"}]}], ",", "signold", ",", " ", "signnew", ",", 
      "newTestList"}], "}"}], ",", "\[IndentingNewLine]", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"myEcho", "[", 
      RowBox[{"\"\<OrderByFieldTypes\>\"", ",", "1"}], "]"}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{
      "sorts", " ", "for", " ", "antifermions", " ", "then", " ", "fermions", 
       " ", "with", " ", "correct", " ", "sign"}], " ", "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
       RowBox[{"(", 
        RowBox[{
         RowBox[{"testfield", " ", "=", " ", 
          RowBox[{"testList", "[", 
           RowBox[{"[", "#", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
         "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"MemberQ", "[", 
            RowBox[{
             RowBox[{"Map", "[", 
              RowBox[{"Head", ",", 
               RowBox[{"fields", "[", 
                RowBox[{"[", 
                 RowBox[{"\"\<fermionic\>\"", ",", "All", ",", "1"}], "]"}], 
                "]"}]}], "]"}], ",", 
             RowBox[{"testfield", "[", 
              RowBox[{"[", "1", "]"}], "]"}]}], "]"}], ",", 
           "\[IndentingNewLine]", "\[IndentingNewLine]", "\t", 
           RowBox[{
            RowBox[{"jointantifermionicList", " ", "=", " ", 
             RowBox[{"Join", "[", 
              RowBox[{"jointantifermionicList", ",", 
               RowBox[{"{", "testfield", "}"}]}], "]"}]}], ";", 
            "\[IndentingNewLine]", "\t", 
            RowBox[{"signnew", " ", "=", " ", 
             RowBox[{"dummysign", "*", 
              RowBox[{
               RowBox[{"(", 
                RowBox[{"-", "1"}], ")"}], "^", 
               RowBox[{"(", 
                RowBox[{"Length", "@", "jointfermionicList"}], ")"}]}]}]}], 
            ";"}], "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
           "\[IndentingNewLine]", "\t", 
           RowBox[{
            RowBox[{"jointfermionicList", " ", "=", " ", 
             RowBox[{"Join", "[", 
              RowBox[{"jointfermionicList", ",", 
               RowBox[{"{", "testfield", "}"}]}], "]"}]}], ";", 
            "\[IndentingNewLine]", "\t", 
            RowBox[{"signnew", " ", "=", " ", "dummysign"}], ";"}]}], 
          "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
         RowBox[{"dummysign", " ", "=", " ", "signnew"}], ";"}], 
        "\[IndentingNewLine]", ")"}], "&"}], "/@", 
      RowBox[{"Table", "[", 
       RowBox[{"i", ",", 
        RowBox[{"{", 
         RowBox[{"i", ",", "1", ",", 
          RowBox[{"Length", "@", "testList"}]}], "}"}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{" ", 
          RowBox[{
           RowBox[{
           "needs", " ", "to", " ", "be", " ", "tested", " ", "but", " ", 
            "should", " ", "in", " ", "principle", " ", "work"}], " ", "="}], 
          ")"}], " ", "!!"}], "!!"}], 
       RowBox[{"!!", 
        RowBox[{"!!", 
         RowBox[{"!!", "!!"}]}]}]}], " ", "*)"}], "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"signold", " ", "=", " ", 
      RowBox[{
       RowBox[{"Signature", "[", "jointfermionicList", "]"}], "*", 
       RowBox[{"Signature", "[", "jointantifermionicList", "]"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"signnew", " ", "=", " ", 
      RowBox[{"dummysign", "*", "signold", "*", 
       RowBox[{"Signature", "[", 
        RowBox[{"Sort", "[", "jointfermionicList", "]"}], "]"}], "*", 
       RowBox[{"Signature", "[", 
        RowBox[{"Sort", "[", "jointantifermionicList", "]"}], "]"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"myEcho", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
        "\"\<sign and new ordering: \>\"", ",", " ", "signnew", ",", " ", 
         "testList", ",", " ", 
         RowBox[{"Join", "[", 
          RowBox[{
           RowBox[{"{", "jointantifermionicList", "}"}], ",", 
           RowBox[{"{", "jointfermionicList", "}"}]}], "]"}]}], "}"}], ",", 
       "3"}], "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{"!!", 
       RowBox[{"!!", 
        RowBox[{"!!", 
         RowBox[{"!!", 
          RowBox[{"!!", 
           RowBox[{"!!", 
            RowBox[{"!!", 
             RowBox[{"!!", "!!"}]}]}]}]}]}]}]}], "*)"}], 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"Return", "[", 
      RowBox[{"{", 
       RowBox[{"signnew", ",", " ", 
        RowBox[{"Join", "[", 
         RowBox[{
          RowBox[{"{", "jointantifermionicList", "}"}], ",", 
          RowBox[{"{", "jointfermionicList", "}"}]}], "]"}]}], "}"}], 
      "]"}]}]}], "\[IndentingNewLine]", "]"}]}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.759496140070335*^9, 3.7594962769818106`*^9}, {
   3.759496337223152*^9, 3.759496359405774*^9}, {3.7594964033483887`*^9, 
   3.75949644212623*^9}, {3.7594964869713016`*^9, 3.7594965024359035`*^9}, {
   3.759496560065428*^9, 3.7594965771076202`*^9}, {3.7594968472458286`*^9, 
   3.7594970703752794`*^9}, {3.7594976937453237`*^9, 3.759497694229061*^9}, {
   3.759563929933565*^9, 3.759563943481535*^9}, {3.7712252689412575`*^9, 
   3.77122528050445*^9}, {3.7734644624381185`*^9, 3.7734645160697412`*^9}, {
   3.773464581336836*^9, 3.7734645892130175`*^9}, {3.773464628002842*^9, 
   3.773464727325822*^9}, {3.7734647843112817`*^9, 3.773464826536729*^9}, {
   3.773464860932832*^9, 3.7734649051193647`*^9}, {3.773464945648221*^9, 
   3.773465123024431*^9}, {3.7734652095272493`*^9, 3.7734652159809313`*^9}, {
   3.773465246144621*^9, 3.77346535130711*^9}, {3.773465382479747*^9, 
   3.7734653908714037`*^9}, {3.7734689661776223`*^9, 
   3.7734690008908076`*^9}, {3.7734690326743565`*^9, 
   3.7734690995989685`*^9}, {3.7734692526507354`*^9, 
   3.7734692814457417`*^9}, {3.7734699850342646`*^9, 
   3.7734699915887413`*^9}, {3.773470940327427*^9, 3.7734709462456036`*^9}, {
   3.7746006758871307`*^9, 3.774600676471498*^9}, {3.7746014743450375`*^9, 
   3.774601510678834*^9}, {3.7746015534655223`*^9, 3.7746015598025265`*^9}, {
   3.774607392882372*^9, 3.7746074217400837`*^9}, {3.7746074614757137`*^9, 
   3.774607464957223*^9}, {3.7746074973896008`*^9, 3.77460750685186*^9}, {
   3.7746076927209387`*^9, 3.774607704218319*^9}, 3.7752095865708294`*^9},
 Background->RGBColor[1, 0.9, 0.8],
 CellLabel->"In[58]:=",ExpressionUUID->"665b7e1d-5b0b-4ba6-9748-d3fd481d973b"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"OrderByFieldTypes", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"cbar", ",", "i"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"c", ",", "j"}], "}"}]}], "}"}], ",", "1", ",", "fields"}], 
  "]"}]], "Input",
 CellChangeTimes->{{3.759496637184827*^9, 3.7594967011972585`*^9}, {
   3.7594968829980335`*^9, 3.759496898378517*^9}, {3.7734653564483356`*^9, 
   3.7734653653086824`*^9}, {3.7734690079718733`*^9, 3.7734690123770947`*^9}, 
   3.774607378082097*^9},
 CellLabel->"In[60]:=",ExpressionUUID->"74ee1aa8-49bf-4ba8-8d49-7b0043a50558"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1", ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"{", 
       RowBox[{"cbar", ",", "i"}], "}"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"{", 
       RowBox[{"c", ",", "j"}], "}"}], "}"}]}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.7594968907750807`*^9, 3.7594968987445455`*^9}, 
   3.7594969466014147`*^9, {3.759497035759316*^9, 3.7594970729789777`*^9}, 
   3.759562449893056*^9, 3.759644455697794*^9, 3.759654527262175*^9, 
   3.7597360379004326`*^9, 3.761038066085088*^9, 3.761282691920884*^9, 
   3.7613053245032063`*^9, 3.761386019284968*^9, 3.7614552955422773`*^9, 
   3.761896599031026*^9, {3.7627687494473457`*^9, 3.762768765667536*^9}, 
   3.764479430190628*^9, 3.7644826284216633`*^9, 3.7651802893637605`*^9, 
   3.7652656720200067`*^9, 3.7655309930308995`*^9, 3.7656074937237015`*^9, 
   3.7661265155277624`*^9, 3.76621043447371*^9, 3.7662955380734158`*^9, 
   3.7664889762926397`*^9, 3.7667424139345126`*^9, 3.767440603609025*^9, 
   3.767505789423234*^9, 3.7679355135173798`*^9, 3.768544576847581*^9, 
   3.768634152548271*^9, 3.7688039490358267`*^9, 3.7688153919334803`*^9, 
   3.768887403353265*^9, 3.7705387414905767`*^9, 3.7706306516711364`*^9, 
   3.771059434337877*^9, 3.771223904194847*^9, 3.7712343560925035`*^9, {
   3.7734653604955263`*^9, 3.7734653662462482`*^9}, {3.7734690042498255`*^9, 
   3.7734690136925774`*^9}, 3.77346910120467*^9, 3.7734692869101334`*^9, 
   3.773550464249837*^9, 3.774601563103327*^9, 3.774607378807156*^9, {
   3.774607414043185*^9, 3.7746074296845436`*^9}, {3.774607482305605*^9, 
   3.7746075115841827`*^9}, 3.774607706556039*^9, 3.7751958254062834`*^9, 
   3.7752097247923946`*^9, 3.775279787676776*^9, 3.775364408756852*^9},
 CellLabel->"Out[60]=",ExpressionUUID->"28317e0a-35be-434d-88f9-a0a68c5bd49c"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"OrderByFieldTypes", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"c", ",", "i"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"cbar", ",", "j"}], "}"}]}], "}"}], ",", "1", ",", "fields"}], 
  "]"}]], "Input",
 CellChangeTimes->{{3.7734653716529517`*^9, 3.7734653732941465`*^9}, {
  3.7746074408238297`*^9, 3.7746074431595526`*^9}},
 CellLabel->"In[61]:=",ExpressionUUID->"51276615-f22c-4bb5-9a8b-27a49a280b81"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"-", "1"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"{", 
       RowBox[{"cbar", ",", "j"}], "}"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"{", 
       RowBox[{"c", ",", "i"}], "}"}], "}"}]}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{3.774607484058919*^9, 3.7746075160213103`*^9, 
  3.7746077080050936`*^9, 3.775195828817726*^9, 3.775209724839259*^9, 
  3.7752797877392273`*^9, 3.775364408882167*^9},
 CellLabel->"Out[61]=",ExpressionUUID->"6a162775-8880-4281-aed9-eb46b39edb48"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"OrderByFieldTypes", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"{", 
     RowBox[{"cbar", ",", "j"}], "}"}], "}"}], ",", "1", ",", "fields"}], 
  "]"}]], "Input",
 CellChangeTimes->{3.7746092192101235`*^9},
 CellLabel->"In[62]:=",ExpressionUUID->"168b4c2d-d01a-4595-8d57-268b3e469bf2"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1", ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"{", 
       RowBox[{"cbar", ",", "j"}], "}"}], "}"}], ",", 
     RowBox[{"{", "}"}]}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{3.7746092200408993`*^9, 3.7751958326720867`*^9, 
  3.7752097248861237`*^9, 3.775279787801713*^9, 3.7753644090071325`*^9},
 CellLabel->"Out[62]=",ExpressionUUID->"dd1ffab6-82d1-4cfe-84c0-172204c59513"]
}, Open  ]],

Cell[BoxData["\[IndentingNewLine]"], "Input",
 CellChangeTimes->{3.7746074758047276`*^9},
 CellLabel->"In[63]:=",ExpressionUUID->"84402d02-64b5-436c-95b3-5121496d000b"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"fields", "[", 
  RowBox[{"[", 
   RowBox[{"\"\<BRSTsources\>\"", ",", "All", ",", "1"}], "]"}], 
  "]"}]], "Input",
 CellChangeTimes->{{3.7751969888689313`*^9, 3.7751970220391183`*^9}, {
  3.775197148430271*^9, 3.7751971504366593`*^9}},
 CellLabel->"In[64]:=",ExpressionUUID->"c3ba457c-7ea2-49c9-b3b4-465730b05b8b"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"Q", "[", "A", "]"}], ",", 
   RowBox[{"Q", "[", "cbar", "]"}], ",", 
   RowBox[{"Q", "[", "c", "]"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.7751969963206096`*^9, 3.7751970224186015`*^9}, 
   3.7751971514520392`*^9, 3.775209724995472*^9, 3.775279787895442*^9, 
   3.77536440933819*^9},
 CellLabel->"Out[64]=",ExpressionUUID->"efeede07-7984-49f9-9c43-1da3eb604344"]
}, Open  ]],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Clear", "[", "JoinSplitLists", "]"}], ";"}], "  ", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
    "canonical", " ", "ordering", " ", "of", " ", "list", " ", "is", " ", 
     "af"}], ",", " ", "f", ",", " ", "BRSTf"}], "*)"}], 
  " "}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"JoinSplitLists", "[", 
   RowBox[{"jointList_", ",", "list_", ",", "sign_", ",", "fields_"}], "]"}], 
  ":=", " ", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "positionJointList", ",", " ", "newJointList", ",", " ", "signnew", ",", 
      "correctpos", ",", "reducedList", ",", " ", "member"}], "}"}], ",", 
    "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"myEcho", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"\"\<list: \>\"", ",", " ", "list"}], "}"}], ",", "3"}], 
      "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"MemberQ", "[", 
         RowBox[{
          RowBox[{"Flatten", "@", 
           RowBox[{"jointList", "[", 
            RowBox[{"[", 
             RowBox[{"All", ",", "1"}], "]"}], "]"}]}], ",", 
          RowBox[{
           RowBox[{"First", "[", "list", "]"}], "[", 
           RowBox[{"[", "1", "]"}], "]"}]}], "]"}], "\[Equal]", "True"}], ",",
        "\[IndentingNewLine]", 
       RowBox[{"(*", " ", 
        RowBox[{
         RowBox[{
         "if", " ", "the", " ", "same", " ", "field", " ", "is", " ", 
          "already", " ", "in", " ", "the", " ", "first", " ", "joint", " ", 
          "list"}], ",", " ", 
         RowBox[{
         "just", " ", "append", " ", "at", " ", "the", " ", "corresponding", 
          " ", "position"}]}], " ", "*)"}], "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"myEcho", "[", 
         RowBox[{"\"\<field already in joint list\>\"", ",", "3"}], "]"}], 
        ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
        "\[IndentingNewLine]", 
        RowBox[{"positionJointList", " ", "=", " ", 
         RowBox[{"Last", "[", 
          RowBox[{"Position", "[", 
           RowBox[{
            RowBox[{"jointList", "[", 
             RowBox[{"[", 
              RowBox[{"All", ",", "1"}], "]"}], "]"}], ",", " ", 
            RowBox[{
             RowBox[{"First", "[", "list", "]"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}]}], "]"}], "]"}]}], ";", "  ", 
        "\[IndentingNewLine]", 
        RowBox[{"newJointList", " ", "=", " ", 
         RowBox[{"Insert", "[", 
          RowBox[{"jointList", ",", " ", 
           RowBox[{"First", "[", "list", "]"}], ",", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"positionJointList", "[", 
              RowBox[{"[", "1", "]"}], "]"}], ",", 
             RowBox[{
              RowBox[{"positionJointList", "[", 
               RowBox[{"[", "2", "]"}], "]"}], "+", "1"}]}], "}"}]}], "]"}]}],
         ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
        RowBox[{"signnew", " ", "=", " ", 
         RowBox[{"sign", "*", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{"-", "1"}], ")"}], "^", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{"Length", "@", 
              RowBox[{"(", 
               RowBox[{
                RowBox[{"Flatten", "[", 
                 RowBox[{"newJointList", ",", "1"}], "]"}], "[", 
                RowBox[{"[", 
                 RowBox[{"All", ",", "1"}], "]"}], "]"}], ")"}]}], "-", 
             RowBox[{
              RowBox[{"Last", "[", 
               RowBox[{"Position", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"Flatten", "[", 
                   RowBox[{"newJointList", ",", "1"}], "]"}], "[", 
                  RowBox[{"[", 
                   RowBox[{"All", ",", "1"}], "]"}], "]"}], ",", 
                 RowBox[{
                  RowBox[{"First", "[", "list", "]"}], "[", 
                  RowBox[{"[", "1", "]"}], "]"}]}], "]"}], "]"}], "[", 
              RowBox[{"[", "1", "]"}], "]"}]}], ")"}]}]}]}], ";"}], 
       "\[IndentingNewLine]", "\[IndentingNewLine]", ",", 
       "\[IndentingNewLine]", 
       RowBox[{"(*", " ", 
        RowBox[{
         RowBox[{"if", " ", "not"}], ",", " ", 
         RowBox[{
         "then", " ", "insert", " ", "it", " ", "into", " ", "an", " ", 
          "empty", " ", "list", " ", "at", " ", "the", " ", "corresponding", 
          " ", "position"}]}], " ", "*)"}], "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"myEcho", "[", 
         RowBox[{"\"\<field not yet in joint list\>\"", ",", "3"}], "]"}], 
        ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"signnew", ",", "newJointList"}], "}"}], " ", "=", " ", 
         RowBox[{"OrderByFieldTypes", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"First", "[", "list", "]"}], "}"}], ",", "sign", ",", 
           "fields"}], "]"}]}], ";", "\[IndentingNewLine]", 
        "\[IndentingNewLine]", 
        RowBox[{"myEcho", "[", 
         RowBox[{"\"\<check how the lists need to be joined\>\"", ",", "3"}], 
         "]"}], ";", "\[IndentingNewLine]", 
        RowBox[{"myEcho", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"\"\<joint List: \>\"", ",", "jointList"}], "}"}], ",", 
          "3"}], "]"}], ";", "\[IndentingNewLine]", 
        RowBox[{"myEcho", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"\"\<new joint List: \>\"", ",", " ", "newJointList"}], 
           "}"}], ",", "3"}], "]"}], ";", "\[IndentingNewLine]", 
        "\[IndentingNewLine]", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Length", "@", "jointList"}], "\[Equal]", "1"}], ",", 
          "\[IndentingNewLine]", "\[IndentingNewLine]", 
          RowBox[{"(*", 
           RowBox[{
           "check", " ", "if", " ", "the", " ", "single", " ", "list", " ", 
            "is", " ", "a", " ", "fermion", " ", "or", " ", "antifermion"}], 
           "*)"}], "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"MemberQ", "[", 
              RowBox[{
               RowBox[{"Map", "[", 
                RowBox[{"Head", ",", 
                 RowBox[{"fields", "[", 
                  RowBox[{"[", 
                   RowBox[{"\"\<fermionic\>\"", ",", "All", ",", "1"}], "]"}],
                   "]"}]}], "]"}], ",", 
               RowBox[{"Map", "[", 
                RowBox[{"Head", ",", 
                 RowBox[{"jointList", "[", 
                  RowBox[{"[", 
                   RowBox[{"1", ",", "1", ",", "1"}], "]"}], "]"}]}], "]"}]}],
               "]"}], ",", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"myEcho", "[", 
               RowBox[{"\"\<single antifermion in list\>\"", ",", "3"}], 
               "]"}], ";", "\[IndentingNewLine]", 
              RowBox[{"newJointList", " ", "=", " ", 
               RowBox[{"MapThread", "[", 
                RowBox[{"Join", ",", 
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{"Join", "[", 
                    RowBox[{"jointList", ",", 
                    RowBox[{"{", 
                    RowBox[{"{", "}"}], "}"}]}], "]"}], ",", "newJointList"}],
                   "}"}]}], "]"}]}], ";"}]}], "\[IndentingNewLine]", "]"}], 
           ";", "\[IndentingNewLine]", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{
              RowBox[{"MemberQ", "[", 
               RowBox[{
                RowBox[{"Map", "[", 
                 RowBox[{"Head", ",", 
                  RowBox[{"fields", "[", 
                   RowBox[{"[", 
                    RowBox[{"\"\<fermionic\>\"", ",", "All", ",", "2"}], 
                    "]"}], "]"}]}], "]"}], ",", 
                RowBox[{"Map", "[", 
                 RowBox[{"Head", ",", 
                  RowBox[{"jointList", "[", 
                   RowBox[{"[", 
                    RowBox[{"1", ",", "1", ",", "1"}], "]"}], "]"}]}], 
                 "]"}]}], "]"}], "||", 
              RowBox[{"MemberQ", "[", 
               RowBox[{
                RowBox[{"fields", "[", 
                 RowBox[{"[", 
                  RowBox[{"\"\<BRSTsource\>\"", ",", "All", ",", "1"}], "]"}],
                  "]"}], ",", 
                RowBox[{"Map", "[", 
                 RowBox[{"Head", ",", 
                  RowBox[{"jointList", "[", 
                   RowBox[{"[", 
                    RowBox[{"1", ",", "1", ",", "1"}], "]"}], "]"}]}], 
                 "]"}]}], "]"}]}], ",", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"myEcho", "[", 
               RowBox[{"\"\<single fermion in list\>\"", ",", "3"}], "]"}], 
              ";", "\[IndentingNewLine]", 
              RowBox[{"newJointList", " ", "=", " ", 
               RowBox[{"MapThread", "[", 
                RowBox[{"Join", ",", 
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{"Join", "[", 
                    RowBox[{
                    RowBox[{"{", 
                    RowBox[{"{", "}"}], "}"}], ",", "jointList"}], "]"}], ",",
                    "newJointList"}], "}"}]}], "]"}]}], ";"}]}], 
            "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", ",", 
          "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"newJointList", " ", "=", " ", 
            RowBox[{"MapThread", "[", 
             RowBox[{"Join", ",", 
              RowBox[{"{", 
               RowBox[{"jointList", ",", "newJointList"}], "}"}]}], "]"}]}], 
           ";"}]}], "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
        "\[IndentingNewLine]", 
        RowBox[{"(*", " ", 
         RowBox[{
         "insert", " ", "the", " ", "field", " ", "in", " ", "correct", " ", 
          "alphabetical", " ", "order"}], " ", "*)"}], "\[IndentingNewLine]", 
        "\[IndentingNewLine]", 
        RowBox[{"correctpos", " ", "=", " ", 
         RowBox[{
          RowBox[{"Position", "[", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{
              RowBox[{"Sort", "[", 
               RowBox[{"newJointList", "[", 
                RowBox[{"[", 
                 RowBox[{"1", ",", "All", ",", "1"}], "]"}], "]"}], "]"}], 
              ",", 
              RowBox[{"Sort", "[", 
               RowBox[{"newJointList", "[", 
                RowBox[{"[", 
                 RowBox[{"2", ",", "All", ",", "1"}], "]"}], "]"}], "]"}]}], 
             "}"}], ",", 
            RowBox[{
             RowBox[{"First", "[", "list", "]"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}]}], "]"}], "[", 
          RowBox[{"[", "1", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
        "\[IndentingNewLine]", 
        RowBox[{"signnew", " ", "=", " ", 
         RowBox[{"signnew", "*", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{"-", "1"}], ")"}], "^", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{"Length", "@", 
              RowBox[{
               RowBox[{"Flatten", "[", 
                RowBox[{"newJointList", ",", "1"}], "]"}], "[", 
               RowBox[{"[", 
                RowBox[{"All", ",", "1"}], "]"}], "]"}]}], "-", 
             RowBox[{
              RowBox[{"First", "[", 
               RowBox[{"Position", "[", 
                RowBox[{
                 RowBox[{
                  RowBox[{"Flatten", "[", 
                   RowBox[{
                    RowBox[{"Map", "[", 
                    RowBox[{"Sort", ",", "newJointList"}], "]"}], ",", "1"}], 
                   "]"}], "[", 
                  RowBox[{"[", 
                   RowBox[{"All", ",", "1"}], "]"}], "]"}], ",", 
                 RowBox[{
                  RowBox[{"First", "[", "list", "]"}], "[", 
                  RowBox[{"[", "1", "]"}], "]"}]}], "]"}], "]"}], "[", 
              RowBox[{"[", "1", "]"}], "]"}]}], ")"}]}]}]}], ";", 
        "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Length", "@", "jointList"}], "\[Equal]", "1"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"myEcho", "[", 
            RowBox[{"\"\<list of length 1\>\"", ",", "3"}], "]"}], ";", 
           "\[IndentingNewLine]", 
           RowBox[{"(*", 
            RowBox[{
            "check", " ", "if", " ", "the", " ", "single", " ", "list", " ", 
             "is", " ", "a", " ", "fermion", " ", "or", " ", "antifermion"}], 
            "*)"}], "\[IndentingNewLine]", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"MemberQ", "[", 
              RowBox[{
               RowBox[{"Map", "[", 
                RowBox[{"Head", ",", 
                 RowBox[{"fields", "[", 
                  RowBox[{"[", 
                   RowBox[{"\"\<fermionic\>\"", ",", "All", ",", "1"}], "]"}],
                   "]"}]}], "]"}], ",", 
               RowBox[{"Map", "[", 
                RowBox[{"Head", ",", 
                 RowBox[{"jointList", "[", 
                  RowBox[{"[", 
                   RowBox[{"1", ",", "1", ",", "1"}], "]"}], "]"}]}], "]"}]}],
               "]"}], ",", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"myEcho", "[", 
               RowBox[{"\"\<single antifermion in list\>\"", ",", "3"}], 
               "]"}], ";", "\[IndentingNewLine]", 
              RowBox[{"newJointList", " ", "=", " ", 
               RowBox[{"Insert", "[", 
                RowBox[{
                 RowBox[{"Join", "[", 
                  RowBox[{"jointList", ",", 
                   RowBox[{"{", 
                    RowBox[{"{", "}"}], "}"}]}], "]"}], ",", 
                 RowBox[{"First", "[", "list", "]"}], ",", "correctpos"}], 
                "]"}]}], ";"}]}], "\[IndentingNewLine]", "]"}], ";", 
           "\[IndentingNewLine]", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{
              RowBox[{"MemberQ", "[", 
               RowBox[{
                RowBox[{"Map", "[", 
                 RowBox[{"Head", ",", 
                  RowBox[{"fields", "[", 
                   RowBox[{"[", 
                    RowBox[{"\"\<fermionic\>\"", ",", "All", ",", "2"}], 
                    "]"}], "]"}]}], "]"}], ",", 
                RowBox[{"Map", "[", 
                 RowBox[{"Head", ",", 
                  RowBox[{"jointList", "[", 
                   RowBox[{"[", 
                    RowBox[{"1", ",", "1", ",", "1"}], "]"}], "]"}]}], 
                 "]"}]}], "]"}], "||", 
              RowBox[{"MemberQ", "[", 
               RowBox[{
                RowBox[{"fields", "[", 
                 RowBox[{"[", 
                  RowBox[{"\"\<BRSTsource\>\"", ",", "All", ",", "1"}], "]"}],
                  "]"}], ",", 
                RowBox[{"Map", "[", 
                 RowBox[{"Head", ",", 
                  RowBox[{"jointList", "[", 
                   RowBox[{"[", 
                    RowBox[{"1", ",", "1", ",", "1"}], "]"}], "]"}]}], 
                 "]"}]}], "]"}]}], ",", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"myEcho", "[", 
               RowBox[{"\"\<single fermion in list\>\"", ",", "3"}], "]"}], 
              ";", "\[IndentingNewLine]", 
              RowBox[{"newJointList", " ", "=", " ", 
               RowBox[{"Insert", "[", 
                RowBox[{
                 RowBox[{"Join", "[", 
                  RowBox[{
                   RowBox[{"{", 
                    RowBox[{"{", "}"}], "}"}], ",", "jointList"}], "]"}], ",", 
                 RowBox[{"First", "[", "list", "]"}], ",", "correctpos"}], 
                "]"}]}], ";"}]}], "\[IndentingNewLine]", "]"}]}], 
          "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"myEcho", "[", 
            RowBox[{"\"\<list of more than one field\>\"", ",", "3"}], "]"}], 
           ";", "\[IndentingNewLine]", 
           RowBox[{"newJointList", " ", "=", " ", 
            RowBox[{"Insert", "[", 
             RowBox[{"jointList", ",", 
              RowBox[{"First", "[", "list", "]"}], ",", "correctpos"}], 
             "]"}]}], ";"}]}], "\[IndentingNewLine]", "]"}], ";"}]}], 
      "\[IndentingNewLine]", "\[IndentingNewLine]", "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"reducedList", " ", "=", " ", 
      RowBox[{"Drop", "[", 
       RowBox[{"list", ",", "1"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"JoinSplitLists", "[", 
      RowBox[{
      "newJointList", ",", " ", "reducedList", ",", " ", "signnew", ",", 
       "fields"}], "]"}]}]}], "\[IndentingNewLine]", 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"JoinSplitLists", "[", 
    RowBox[{"list_", ",", 
     RowBox[{"{", "}"}], ",", " ", "sign_", ",", "fields_"}], "]"}], " ", ":=",
    " ", 
   RowBox[{"{", 
    RowBox[{"sign", ",", "list"}], "}"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]"}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.7590432303210173`*^9, 3.759043356382332*^9}, {
   3.759043393508912*^9, 3.759043687524412*^9}, {3.759044188687307*^9, 
   3.7590443421370707`*^9}, {3.7590443819435263`*^9, 
   3.7590444216865063`*^9}, {3.7590580693820276`*^9, 3.759058083056455*^9}, {
   3.759058115172743*^9, 3.759058176227888*^9}, {3.759058841463315*^9, 
   3.7590588461195707`*^9}, {3.759059006817788*^9, 3.7590590207255363`*^9}, {
   3.7590591798065104`*^9, 3.759059195912577*^9}, {3.7590592413494005`*^9, 
   3.7590592862066307`*^9}, {3.7590598238245173`*^9, 3.759059844229651*^9}, {
   3.7594893525551133`*^9, 3.759489357253541*^9}, {3.7594903196076355`*^9, 
   3.7594903828316936`*^9}, {3.759492323454362*^9, 3.759492411953451*^9}, {
   3.759492456854003*^9, 3.7594924785782485`*^9}, {3.759492569434718*^9, 
   3.7594928060636015`*^9}, {3.759492908195871*^9, 3.7594929429355*^9}, {
   3.7594929841360235`*^9, 3.759492991965704*^9}, {3.7594930359560347`*^9, 
   3.759493289633992*^9}, {3.7594933271811*^9, 3.759493354978736*^9}, {
   3.75949338678671*^9, 3.7594934763769712`*^9}, {3.7594935570211053`*^9, 
   3.7594937276955833`*^9}, {3.759493768331708*^9, 3.759493771021735*^9}, {
   3.7594938188292933`*^9, 3.759493897651986*^9}, {3.759493963667305*^9, 
   3.7594940251971073`*^9}, {3.7594940910230465`*^9, 
   3.7594942426699057`*^9}, {3.7594943098931065`*^9, 
   3.7594943399671626`*^9}, {3.7594943717866907`*^9, 
   3.7594943764777393`*^9}, {3.759494430822143*^9, 3.7594946010193667`*^9}, {
   3.7594946338306513`*^9, 3.759494915078466*^9}, {3.759494956716025*^9, 
   3.7594950711383896`*^9}, {3.7594951552106657`*^9, 
   3.7594952331086493`*^9}, {3.759495351784192*^9, 3.759495368624303*^9}, 
   3.759495400905388*^9, {3.759496288905891*^9, 3.75949629790265*^9}, {
   3.7594972753154516`*^9, 3.759497340131714*^9}, {3.759497423838686*^9, 
   3.759497426532409*^9}, {3.7594975384468436`*^9, 3.7594975576633615`*^9}, {
   3.7594975923733797`*^9, 3.7594976721661153`*^9}, {3.759497712711135*^9, 
   3.7594977220445924`*^9}, {3.7595638636469927`*^9, 
   3.7595638815353117`*^9}, {3.7734654230119915`*^9, 
   3.7734654781824894`*^9}, {3.773465512729503*^9, 3.7734655719177923`*^9}, {
   3.7734656211003995`*^9, 3.7734656269427767`*^9}, {3.773465702114345*^9, 
   3.7734658108185253`*^9}, {3.77346586415292*^9, 3.7734659333293447`*^9}, 
   3.7734660020678225`*^9, {3.7734660366324043`*^9, 3.773466049368351*^9}, {
   3.7734662133841352`*^9, 3.7734662267055173`*^9}, {3.7734662906536503`*^9, 
   3.773466292501709*^9}, {3.773467861732644*^9, 3.773467914655368*^9}, {
   3.773469414925614*^9, 3.7734694407695427`*^9}, {3.7734696436640525`*^9, 
   3.7734696650837803`*^9}, {3.773469774086792*^9, 3.7734697857087183`*^9}, {
   3.7734700124459715`*^9, 3.7734700311270227`*^9}, {3.7734701422574186`*^9, 
   3.7734702113174877`*^9}, {3.7734702529981213`*^9, 3.773470368618906*^9}, {
   3.773470405036482*^9, 3.7734705360847445`*^9}, {3.773470722458098*^9, 
   3.7734707272452984`*^9}, {3.773470769892968*^9, 3.773470790239565*^9}, {
   3.773470844906562*^9, 3.7734708613037186`*^9}, {3.7734712013913345`*^9, 
   3.773471201763341*^9}, {3.7734712413953724`*^9, 3.7734713404146204`*^9}, {
   3.773472051988488*^9, 3.7734720667280774`*^9}, {3.773472148971177*^9, 
   3.773472151324884*^9}, {3.7735559096823177`*^9, 3.7735559176912203`*^9}, {
   3.7746077414566836`*^9, 3.774607804739724*^9}, {3.774607842204129*^9, 
   3.7746078544987144`*^9}, {3.77460789381756*^9, 3.774608138990127*^9}, {
   3.7746092515653696`*^9, 3.774609254124859*^9}, {3.7746092847858095`*^9, 
   3.7746092895311193`*^9}, {3.77460946487029*^9, 3.7746095132984324`*^9}, {
   3.7746095695455527`*^9, 3.774609574204096*^9}, {3.774609610123255*^9, 
   3.7746096234925165`*^9}, {3.7746096856004524`*^9, 3.774609709089882*^9}, {
   3.7746097726930647`*^9, 3.774609772958547*^9}, {3.7746098536779156`*^9, 
   3.774610088146661*^9}, {3.7746101285542917`*^9, 3.774610193838483*^9}, {
   3.774610451065598*^9, 3.7746104513757687`*^9}, {3.775196114415519*^9, 
   3.775196129245373*^9}, {3.7751961956021705`*^9, 3.7751963008389325`*^9}, {
   3.775196360321477*^9, 3.775196392830956*^9}, {3.775196506314575*^9, 
   3.775196535479647*^9}, {3.77519711704298*^9, 3.775197222356059*^9}, 
   3.7751972908795815`*^9, {3.7751973271325064`*^9, 3.7751973489292974`*^9}, {
   3.775197398578554*^9, 3.7751974223564415`*^9}, {3.775197459643321*^9, 
   3.7751975042467403`*^9}, {3.775197637436118*^9, 3.77519767982829*^9}, {
   3.7751982899783387`*^9, 3.7751983202678394`*^9}, {3.7752095929845867`*^9, 
   3.7752096132357073`*^9}},
 CellLabel->"In[65]:=",ExpressionUUID->"a8064244-ac63-4229-9ee9-5fdd760c68ab"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"JoinSplitLists", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"{", 
     RowBox[{"{", 
      RowBox[{"cbar", ",", "i"}], "}"}], "}"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"cbar", ",", "j"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"c", ",", "l"}], "}"}]}], "}"}], ",", "1", ",", "fields"}], 
  "]"}]], "Input",
 CellChangeTimes->{{3.774608169212836*^9, 3.774608173017663*^9}, {
  3.7746082300352736`*^9, 3.774608269596116*^9}, {3.774609308883727*^9, 
  3.7746093369731936`*^9}},
 CellLabel->"In[68]:=",ExpressionUUID->"ae9628c1-2c1c-48f6-bdf0-de1b2abea181"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1", ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"cbar", ",", "i"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"cbar", ",", "j"}], "}"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"{", 
       RowBox[{"c", ",", "l"}], "}"}], "}"}]}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{
  3.774608175067217*^9, {3.7746082310235977`*^9, 3.7746082396784554`*^9}, 
   3.774608270845748*^9, 3.7746092559390383`*^9, {3.774609291331314*^9, 
   3.774609338448216*^9}, {3.774609553543339*^9, 3.7746095803446774`*^9}, 
   3.774609897648446*^9, 3.774609928196291*^9, {3.774609958890071*^9, 
   3.774610028192875*^9}, 3.7746100924760036`*^9, {3.7746101352977343`*^9, 
   3.7746101602321033`*^9}, 3.77519585333429*^9, 3.775196311527921*^9, 
   3.775196435467396*^9, 3.7751965645065937`*^9, 3.775197233609697*^9, 
   3.775209725104853*^9, 3.775279788004791*^9, 3.775364409572553*^9},
 CellLabel->"Out[68]=",ExpressionUUID->"b1e43aad-1dd9-4b9a-b89d-a93a107bd260"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"JoinSplitLists", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"{", 
     RowBox[{"{", 
      RowBox[{"c", ",", "i"}], "}"}], "}"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"cbar", ",", "j"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"c", ",", "l"}], "}"}]}], "}"}], ",", "1", ",", "fields"}], 
  "]"}]], "Input",
 CellChangeTimes->{3.77519590501211*^9},
 CellLabel->"In[69]:=",ExpressionUUID->"708ff577-b53c-4ca4-bf4e-e081d9073419"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"-", "1"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"{", 
       RowBox[{"cbar", ",", "j"}], "}"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"c", ",", "i"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"c", ",", "l"}], "}"}]}], "}"}]}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{3.7751959091844263`*^9, 3.775196322527622*^9, 
  3.7751964078145275`*^9, 3.775196541656714*^9, 3.775197237434903*^9, 
  3.775209725167307*^9, 3.7752797880672755`*^9, 3.7753644097131076`*^9},
 CellLabel->"Out[69]=",ExpressionUUID->"4f60c437-946e-4210-822e-12b952a59a0b"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"JoinSplitLists", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"{", 
       RowBox[{"cbar", ",", "i"}], "}"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"{", 
       RowBox[{"c", ",", "j"}], "}"}], "}"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"c", ",", "l"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"cbar", ",", "k"}], "}"}]}], "}"}], ",", "1", ",", "fields"}], 
  "]"}]], "Input",
 CellChangeTimes->{
  3.7734708177899017`*^9, 3.7746076703095293`*^9, {3.7746077122401657`*^9, 
   3.7746077258881736`*^9}},
 CellLabel->"In[70]:=",ExpressionUUID->"f0fe27e4-f3c6-43de-9374-f76467ff39de"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1", ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"cbar", ",", "i"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"cbar", ",", "k"}], "}"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"c", ",", "j"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"c", ",", "l"}], "}"}]}], "}"}]}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.7746077295334277`*^9, 3.7746078081705513`*^9}, 
   3.774607857724127*^9, {3.7746079117535334`*^9, 3.774607920501728*^9}, 
   3.774607953792262*^9, {3.774607988723969*^9, 3.774608027814873*^9}, {
   3.7746081054373446`*^9, 3.774608142666231*^9}, 3.77461017011867*^9, 
   3.7746103697047887`*^9, 3.7751958592621293`*^9, 3.775196558318488*^9, 
   3.7752097252141705`*^9, 3.7752797881297607`*^9, 3.7753644098380785`*^9},
 CellLabel->"Out[70]=",ExpressionUUID->"21b9a960-995e-47d7-becd-dd47bb019dbc"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"JoinSplitLists", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"{", 
       RowBox[{"cbar", ",", "i"}], "}"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"{", 
       RowBox[{"c", ",", "j"}], "}"}], "}"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"cbar", ",", "l"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"c", ",", "k"}], "}"}]}], "}"}], ",", "1", ",", "fields"}], 
  "]"}]], "Input",
 CellChangeTimes->{{3.774607869640191*^9, 3.774607870606606*^9}},
 CellLabel->"In[71]:=",ExpressionUUID->"4e79a9e9-2758-4b1a-9864-d0bf3c76a99d"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"-", "1"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"cbar", ",", "i"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"cbar", ",", "l"}], "}"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"c", ",", "j"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"c", ",", "k"}], "}"}]}], "}"}]}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{3.7746078714353886`*^9, 3.774608150467163*^9, 
  3.7751958663530397`*^9, 3.775196571907072*^9, 3.7752097252922773`*^9, 
  3.7752797881766253`*^9, 3.7753644099630494`*^9},
 CellLabel->"Out[71]=",ExpressionUUID->"290a04dd-00d0-476b-9933-d2a2408083fa"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
   "merge", " ", "a", " ", "list", " ", "of", " ", "lists", " ", "where", " ",
     "each", " ", "field", " ", "only", " ", "appears", " ", "once", " ", 
    "into", " ", "one", " ", "list", " ", "with", " ", "sorted", " ", 
    "fields"}], " ", "*)"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"Clear", "[", "MergeIndexLists", "]"}], ";"}], " ", 
   RowBox[{"(*", 
    RowBox[{"superlist", " ", "=", " ", 
     RowBox[{"list", " ", "of", " ", "lists"}]}], "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"MergeIndexLists", "[", 
      RowBox[{"superList_", ",", "sign_", ",", "fields_"}], "]"}], ":=", " ", 
     RowBox[{"Module", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"signnew", ",", " ", "newList"}], "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"(*", " ", 
        RowBox[{
        "sort", " ", "first", " ", "sublist", " ", "in", " ", "field", " ", 
         "type", " ", "ordering", " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"+", "alphabetical"}], " ", "order"}], ")"}]}], " ", 
        "*)"}], "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{"signnew", ",", " ", "newList"}], "}"}], " ", "=", " ", 
         RowBox[{"OrderByFieldTypes", "[", 
          RowBox[{
           RowBox[{"First", "[", "superList", "]"}], ",", "sign", ",", 
           "fields"}], "]"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"MergeIndexLists", "[", 
         RowBox[{"newList", ",", 
          RowBox[{"Drop", "[", 
           RowBox[{"superList", ",", "1"}], "]"}], ",", "signnew", ",", 
          "fields"}], "]"}]}]}], "\[IndentingNewLine]", "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MergeIndexLists", "[", 
     RowBox[{"list_", ",", "superList_", ",", "sign_", ",", "fields_"}], 
     "]"}], " ", ":=", " ", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"newFirstList", ",", " ", "newRestSuperList", ",", "signnew"}],
        "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{"join", " ", "the", " ", "sublists"}], " ", "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"{", 
         RowBox[{"signnew", ",", "newFirstList"}], "}"}], " ", "=", " ", 
        RowBox[{"JoinSplitLists", "[", 
         RowBox[{"list", ",", 
          RowBox[{"First", "[", "superList", "]"}], ",", "sign", ",", 
          "fields"}], "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"newRestSuperList", " ", "=", " ", 
        RowBox[{"Drop", "[", 
         RowBox[{"superList", ",", "1"}], "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"MergeIndexLists", "[", 
        RowBox[{
        "newFirstList", ",", "newRestSuperList", ",", "signnew", ",", 
         "fields"}], "]"}]}]}], "\[IndentingNewLine]", "]"}]}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MergeIndexLists", "[", 
     RowBox[{"list_", ",", 
      RowBox[{"{", "}"}], ",", "sign_", ",", "fields_"}], "]"}], ":=", 
    RowBox[{"{", 
     RowBox[{"sign", ",", 
      RowBox[{"Flatten", "[", 
       RowBox[{"list", ",", "1"}], "]"}]}], "}"}]}]}]}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.759058397160954*^9, 3.759058642323126*^9}, {
   3.7590586784543133`*^9, 3.7590587022700996`*^9}, {3.7590593317040167`*^9, 
   3.7590593734861746`*^9}, {3.7590594362909822`*^9, 
   3.7590594418154755`*^9}, {3.759059565974349*^9, 3.759059620990032*^9}, {
   3.7590598084826975`*^9, 3.759059813445562*^9}, {3.759059861729248*^9, 
   3.7590599294244895`*^9}, {3.7590601175577235`*^9, 3.759060253673713*^9}, {
   3.7590603899822865`*^9, 3.7590603906634655`*^9}, {3.759060472644022*^9, 
   3.7590604753781176`*^9}, {3.759060519711784*^9, 3.759060579587014*^9}, {
   3.7590606380290637`*^9, 3.7590606609964523`*^9}, {3.7590608820005436`*^9, 
   3.7590609029479637`*^9}, {3.7590610466521497`*^9, 
   3.7590610742700644`*^9}, {3.7590611229293823`*^9, 3.759061134226988*^9}, {
   3.759061201530057*^9, 3.759061227181106*^9}, {3.759061361968382*^9, 
   3.7590613661835375`*^9}, {3.759061459620163*^9, 3.7590615192813897`*^9}, {
   3.75906159015338*^9, 3.7590617928398094`*^9}, {3.7590618389680886`*^9, 
   3.759061899514312*^9}, {3.7590619583770504`*^9, 3.7590620683894405`*^9}, {
   3.759062244938192*^9, 3.7590622605859995`*^9}, {3.7590623101966953`*^9, 
   3.7590623150594406`*^9}, {3.759065740744603*^9, 3.759065749407752*^9}, {
   3.759495330569129*^9, 3.7594953308630342`*^9}, {3.759495387637079*^9, 
   3.7594954271544123`*^9}, {3.7594954932027864`*^9, 3.7594955641227455`*^9}, 
   3.759495614631529*^9, {3.759495685313315*^9, 3.759495692636262*^9}, {
   3.7594957301011734`*^9, 3.7594957474498167`*^9}, {3.7594958511455145`*^9, 
   3.7594958556530466`*^9}, {3.759496013998849*^9, 3.7594961310257664`*^9}, 
   3.7594961689051666`*^9, {3.7594965130601835`*^9, 3.7594965213231235`*^9}, {
   3.759497096870928*^9, 3.7594971672412415`*^9}, {3.759497227438904*^9, 
   3.759497235119814*^9}, {3.759497494623739*^9, 3.759497513412593*^9}, {
   3.7594976825851088`*^9, 3.759497682942973*^9}, {3.759563831857518*^9, 
   3.7595638567872667`*^9}, {3.7595639120878468`*^9, 3.759563919397024*^9}, {
   3.773463241261898*^9, 3.7734632858601866`*^9}, {3.7734633202087555`*^9, 
   3.7734633335635166`*^9}, {3.7734643486558156`*^9, 3.773464452170805*^9}, {
   3.7734645210085745`*^9, 3.7734645396790085`*^9}, 3.7734647780761967`*^9, {
   3.7734651520575476`*^9, 3.7734651780879498`*^9}, 3.7734678317467813`*^9, {
   3.773469219064536*^9, 3.7734692331718173`*^9}, {3.7734698200399237`*^9, 
   3.7734698299254923`*^9}, {3.7734698884968853`*^9, 3.773469888993555*^9}, {
   3.7746075626254473`*^9, 3.774607568402*^9}, {3.7746076294092216`*^9, 
   3.7746076297063875`*^9}, {3.7751967704494076`*^9, 
   3.7751967922641726`*^9}, {3.7751968249490743`*^9, 3.7751968284159036`*^9}},
 CellLabel->"In[72]:=",ExpressionUUID->"753a0826-0315-43db-a0e9-5abb755ba7c1"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"MergeIndexLists", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"cbar", ",", "i"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"c", ",", "j"}], "}"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"cbar", ",", "l"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"c", ",", "k"}], "}"}]}], "}"}]}], "}"}], ",", "1", ",", 
   "fields"}], "]"}]], "Input",
 CellChangeTimes->{{3.7594971705611997`*^9, 3.7594972080840282`*^9}, {
   3.7595638908595695`*^9, 3.7595638990302*^9}, {3.7734645686614885`*^9, 
   3.773464569334128*^9}, 3.774607338464715*^9, {3.7751966285537705`*^9, 
   3.7751966383686585`*^9}, {3.7751967089971237`*^9, 3.7751967117574296`*^9}},
 CellLabel->"In[76]:=",ExpressionUUID->"c560bd33-7dc0-4228-afd8-d92775f52eb4"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"-", "1"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"cbar", ",", "i"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"cbar", ",", "l"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"c", ",", "j"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"c", ",", "k"}], "}"}]}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.7594974081411767`*^9, 3.7594974337944736`*^9}, 
   3.759497515257183*^9, {3.7594976769405966`*^9, 3.7594977236072593`*^9}, 
   3.7595624502185636`*^9, 3.759563899741592*^9, 3.7595639488511972`*^9, 
   3.7596444558540044`*^9, 3.759644546989564*^9, 3.759654527402803*^9, 
   3.759656084082992*^9, {3.759736038291889*^9, 3.7597360438855467`*^9}, 
   3.7610380661631947`*^9, 3.76128269220207*^9, 3.761305324615904*^9, 
   3.761386019431576*^9, 3.7614552958078337`*^9, 3.761896599184787*^9, {
   3.7627687496566567`*^9, 3.7627687658872643`*^9}, 3.764479430485747*^9, 
   3.764482625259903*^9, 3.7651802894922247`*^9, 3.7652656723215733`*^9, 
   3.7655309936617765`*^9, 3.7656074939580746`*^9, 3.7661265157314353`*^9, 
   3.766210434670187*^9, 3.76629553821803*^9, 3.7664889764020214`*^9, 
   3.766742414084114*^9, 3.767440603804449*^9, 3.767505789868146*^9, 
   3.767935513704809*^9, 3.768544577211095*^9, 3.7686341527972937`*^9, 
   3.7688039494274035`*^9, 3.7688153921161833`*^9, 3.7688874035119963`*^9, 
   3.7705387417059717`*^9, 3.7706306519164815`*^9, 3.771059434548312*^9, 
   3.771223904332662*^9, 3.771234369833927*^9, 3.773464570255789*^9, {
   3.7734691959852457`*^9, 3.773469234775529*^9}, 3.77346929638779*^9, 
   3.7734698377655306`*^9, 3.773469904678857*^9, 3.7734708888760023`*^9, 
   3.773472094579609*^9, 3.773550480262908*^9, 3.774601621648591*^9, 
   3.7746073401494536`*^9, 3.7746075281087475`*^9, 3.7746075703198767`*^9, 
   3.7746104608020525`*^9, 3.775196592543044*^9, 3.7751966415404553`*^9, 
   3.775196713980845*^9, 3.775196781104447*^9, 3.7751968313919783`*^9, 
   3.7752097253860145`*^9, 3.7752797882859745`*^9, 3.7753644103067207`*^9},
 CellLabel->"Out[76]=",ExpressionUUID->"d10fded6-0ded-44e7-af62-ed436442cc4e"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"MergeIndexLists", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"cbar", ",", "i"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"c", ",", "j"}], "}"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"c", ",", "l"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"cbar", ",", "k"}], "}"}]}], "}"}]}], "}"}], ",", "1", ",", 
   "fields"}], "]"}]], "Input",
 CellChangeTimes->{{3.7751968888572316`*^9, 3.7751968900875587`*^9}},
 CellLabel->"In[77]:=",ExpressionUUID->"6e12bedf-554c-44cd-a443-33106257a88b"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1", ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"cbar", ",", "i"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"cbar", ",", "k"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"c", ",", "j"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"c", ",", "l"}], "}"}]}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{3.775196892363145*^9, 3.7752097254646645`*^9, 
  3.775279788364085*^9, 3.7753644104316983`*^9},
 CellLabel->"Out[77]=",ExpressionUUID->"b37ec19c-6907-415f-a124-aaf8aa712990"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "orders", " ", "all", " ", "vertices", " ", "in", " ", "the", " ", 
    "nPoints", " ", "in", " ", "the", " ", "default", " ", "order", " ", 
    "and", " ", "adjusts", " ", "the", " ", "signs", " ", "of", " ", "the", 
    " ", "diagrams"}], "*)"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"Clear", "[", "DefaultVertexOrdering", "]"}], ";"}], " ", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"DefaultVertexOrdering", "[", 
     RowBox[{
     "objectIndices_", ",", "onecombinedIndexConfigs_", ",", "fields_"}], 
     "]"}], " ", ":=", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"superindices", ",", 
        RowBox[{"bosonicList", " ", "=", " ", 
         RowBox[{"{", "}"}]}], ",", " ", 
        RowBox[{"fermionicList", " ", "=", " ", 
         RowBox[{"{", "}"}]}], ",", " ", 
        RowBox[{"antifermionicList", " ", "=", " ", 
         RowBox[{"{", "}"}]}], ",", 
        RowBox[{"allfermionList", " ", "=", " ", 
         RowBox[{"{", "}"}]}], ",", " ", "positionTestfield", ",", " ", 
        "testfield", ",", " ", "signFermionsStart", ",", 
        "signFermionsIntermediate", ",", "signofSort", ",", 
        "splitAllFermionList", ",", "mergedFermionsList", ",", " ", 
        "signFermionsEnd", ",", " ", "newObjectIndices"}], "}"}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"myEcho", "[", 
        RowBox[{"\"\<DefaultVertexOrdering\>\"", ",", "1"}], "]"}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"superindices", " ", "=", " ", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"objectIndices", "/.", "onecombinedIndexConfigs"}], ",", 
          "objectIndices"}], "}"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{
        "sort", " ", "for", " ", "bosons", " ", "and", " ", "xfermions"}], 
        "*)"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{
           RowBox[{"testfield", " ", "=", " ", 
            RowBox[{"superindices", "[", 
             RowBox[{"[", 
              RowBox[{"All", ",", "#"}], "]"}], "]"}]}], ";", 
           "\[IndentingNewLine]", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"MemberQ", "[", 
              RowBox[{
               RowBox[{"Map", "[", 
                RowBox[{"Head", ",", 
                 RowBox[{"fields", "[", 
                  RowBox[{"[", "\"\<bosonic\>\"", "]"}], "]"}]}], "]"}], ",", 
               RowBox[{"testfield", "[", 
                RowBox[{"[", "1", "]"}], "]"}]}], "]"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"bosonicList", " ", "=", " ", 
               RowBox[{"Sort", "@", 
                RowBox[{"Join", "[", 
                 RowBox[{"bosonicList", ",", 
                  RowBox[{"{", "testfield", "}"}]}], "]"}]}]}], ";"}]}], 
            "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"MemberQ", "[", 
              RowBox[{
               RowBox[{"Map", "[", 
                RowBox[{"Head", ",", 
                 RowBox[{"fields", "[", 
                  RowBox[{"[", 
                   RowBox[{"\"\<fermionic\>\"", ",", "All", ",", "1"}], "]"}],
                   "]"}]}], "]"}], ",", 
               RowBox[{"testfield", "[", 
                RowBox[{"[", "1", "]"}], "]"}]}], "]"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"antifermionicList", " ", "=", " ", 
               RowBox[{"Join", "[", 
                RowBox[{"antifermionicList", ",", 
                 RowBox[{"{", "testfield", "}"}]}], "]"}]}], ";", 
              "\[IndentingNewLine]", 
              RowBox[{"allfermionList", " ", "=", " ", 
               RowBox[{"Join", "[", 
                RowBox[{"allfermionList", ",", 
                 RowBox[{"{", "testfield", "}"}]}], "]"}]}], ";"}]}], 
            "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"MemberQ", "[", 
              RowBox[{
               RowBox[{"Map", "[", 
                RowBox[{"Head", ",", 
                 RowBox[{"fields", "[", 
                  RowBox[{"[", 
                   RowBox[{"\"\<fermionic\>\"", ",", "All", ",", "2"}], "]"}],
                   "]"}]}], "]"}], ",", 
               RowBox[{"testfield", "[", 
                RowBox[{"[", "1", "]"}], "]"}]}], "]"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"fermionicList", " ", "=", " ", 
               RowBox[{"Sort", "@", 
                RowBox[{"Join", "[", 
                 RowBox[{"fermionicList", ",", 
                  RowBox[{"{", "testfield", "}"}]}], "]"}]}]}], ";", 
              "\[IndentingNewLine]", 
              RowBox[{"allfermionList", " ", "=", " ", 
               RowBox[{"Join", "[", 
                RowBox[{"allfermionList", ",", 
                 RowBox[{"{", "testfield", "}"}]}], "]"}]}], ";"}]}], 
            "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
           "\[IndentingNewLine]", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"MemberQ", "[", 
              RowBox[{
               RowBox[{"fields", "[", 
                RowBox[{"[", 
                 RowBox[{"\"\<BRSTsources\>\"", ",", "All", ",", "1"}], "]"}],
                 "]"}], ",", 
               RowBox[{"testfield", "[", 
                RowBox[{"[", "1", "]"}], "]"}]}], "]"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"positionTestfield", " ", "=", " ", 
               RowBox[{"First", "@", 
                RowBox[{"Flatten", "@", 
                 RowBox[{"Position", "[", 
                  RowBox[{
                   RowBox[{"fields", "[", 
                    RowBox[{"[", 
                    RowBox[{"\"\<BRSTsources\>\"", ",", "All", ",", "1"}], 
                    "]"}], "]"}], ",", 
                   RowBox[{"testfield", "[", 
                    RowBox[{"[", "1", "]"}], "]"}]}], "]"}]}]}]}], ";", 
              "\[IndentingNewLine]", 
              RowBox[{"Switch", "[", 
               RowBox[{
                RowBox[{"fields", "[", 
                 RowBox[{"[", 
                  RowBox[{
                  "\"\<BRSTsources\>\"", ",", "positionTestfield", ",", "2"}],
                   "]"}], "]"}], ",", "\[IndentingNewLine]", 
                "\"\<bosonic\>\"", ",", "\[IndentingNewLine]", "\t", 
                RowBox[{
                 RowBox[{"bosonicList", " ", "=", " ", 
                  RowBox[{"Sort", "@", 
                   RowBox[{"Join", "[", 
                    RowBox[{"bosonicList", ",", 
                    RowBox[{"{", "testfield", "}"}]}], "]"}]}]}], ";"}], ",", 
                "\[IndentingNewLine]", "\"\<fermionic\>\"", ",", " ", 
                "\[IndentingNewLine]", "\t", 
                RowBox[{
                 RowBox[{"fermionicList", " ", "=", " ", 
                  RowBox[{"Sort", "@", 
                   RowBox[{"Join", "[", 
                    RowBox[{"fermionicList", ",", 
                    RowBox[{"{", "testfield", "}"}]}], "]"}]}]}], ";", 
                 "\[IndentingNewLine]", "\t", 
                 RowBox[{"allfermionList", " ", "=", " ", 
                  RowBox[{"Join", "[", 
                   RowBox[{"allfermionList", ",", 
                    RowBox[{"{", "testfield", "}"}]}], "]"}]}], ";"}], ",", 
                "\[IndentingNewLine]", "\"\<antifermionic\>\"", ",", 
                "\[IndentingNewLine]", "\t", 
                RowBox[{
                 RowBox[{"antifermionicList", " ", "=", " ", 
                  RowBox[{"Join", "[", 
                   RowBox[{"antifermionicList", ",", 
                    RowBox[{"{", "testfield", "}"}]}], "]"}]}], ";", 
                 "\[IndentingNewLine]", "\t", 
                 RowBox[{"allfermionList", " ", "=", " ", 
                  RowBox[{"Join", "[", 
                   RowBox[{"allfermionList", ",", 
                    RowBox[{"{", "testfield", "}"}]}], "]"}]}], ";"}]}], 
               "\[IndentingNewLine]", "]"}], ";"}]}], "\[IndentingNewLine]", 
            "]"}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", ")"}],
          "&"}], "/@", 
        RowBox[{"Table", "[", 
         RowBox[{"i", ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "1", ",", 
            RowBox[{"Length", "@", 
             RowBox[{"superindices", "[", 
              RowBox[{"[", "1", "]"}], "]"}]}]}], "}"}]}], "]"}]}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "@", "allfermionList"}], " ", "\[Equal]", " ", 
          "0"}], ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"myEcho", "[", 
           RowBox[{"\"\<no fermions\>\"", ",", "3"}], "]"}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"signofSort", " ", "=", " ", "1"}], ";", 
          "\[IndentingNewLine]", "\[IndentingNewLine]", 
          RowBox[{"newObjectIndices", " ", "=", " ", "bosonicList"}], ";"}], 
         "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"Signature", "[", 
              RowBox[{"allfermionList", "[", 
               RowBox[{"[", 
                RowBox[{"All", ",", "1"}], "]"}], "]"}], "]"}], "\[NotEqual]",
              " ", "0"}], ",", "\[IndentingNewLine]", 
            RowBox[{"(*", " ", 
             RowBox[{
              RowBox[{
              "if", " ", "each", " ", "fermionic", " ", "field", " ", "only", 
               " ", "appears", " ", "once"}], ",", " ", 
              RowBox[{
              "the", " ", "ordering", " ", "and", " ", "sign", " ", "are", 
               " ", "straight", " ", "forward"}]}], " ", "*)"}], 
            "\[IndentingNewLine]", "\[IndentingNewLine]", 
            "\[IndentingNewLine]", 
            RowBox[{"(*", " ", 
             RowBox[{"!!", 
              RowBox[{"!!", 
               RowBox[{"!!", 
                RowBox[{"!!", 
                 RowBox[{"!!", 
                  RowBox[{"!!", 
                   RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{"!!", 
                    RowBox[{
                    "1", "the", " ", "sign", " ", "might", " ", "still", " ", 
                    "be", " ", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"wrong", "!!"}], "!!"}], "!!"}], "!!"}], "!!"}], 
                    "!!"}], "!!"}], "!!"}], "!!"}], "!!"}], "!!"}], 
                    "!!"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}], " ", "*)"}], 
            "\[IndentingNewLine]", "\[IndentingNewLine]", 
            "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"myEcho", "[", 
              RowBox[{"\"\<each fermion max once\>\"", ",", ",", "3"}], "]"}],
              ";", "\[IndentingNewLine]", 
             RowBox[{"signFermionsStart", " ", "=", " ", 
              RowBox[{"Signature", "[", 
               RowBox[{"allfermionList", "[", 
                RowBox[{"[", 
                 RowBox[{"All", ",", "1"}], "]"}], "]"}], "]"}]}], ";", 
             "\[IndentingNewLine]", "\[IndentingNewLine]", 
             RowBox[{"(*", 
              RowBox[{
               RowBox[{"newObjectIndices", " ", "=", " ", 
                RowBox[{"Transpose", "[", 
                 RowBox[{"ArrayReshape", "[", 
                  RowBox[{
                   RowBox[{"{", 
                    RowBox[{
                    "bosonicList", ",", "antifermionicList", ",", 
                    "fermionicList"}], "}"}], ",", 
                   RowBox[{"{", 
                    RowBox[{"3", ",", "2"}], "}"}]}], "]"}], "]"}]}], ";"}], 
              "*)"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
             RowBox[{"newObjectIndices", " ", "=", " ", 
              RowBox[{"Flatten", "[", 
               RowBox[{
                RowBox[{"{", 
                 RowBox[{
                 "bosonicList", ",", "antifermionicList", ",", 
                  "fermionicList"}], "}"}], ",", "1"}], "]"}]}], ";", 
             "\[IndentingNewLine]", 
             RowBox[{"signofSort", " ", "=", " ", 
              RowBox[{"signFermionsStart", " ", "*", " ", 
               RowBox[{"Signature", "[", 
                RowBox[{
                 RowBox[{"Transpose", "[", 
                  RowBox[{"{", 
                   RowBox[{"antifermionicList", ",", "fermionicList"}], "}"}],
                   "]"}], "[", 
                 RowBox[{"[", "1", "]"}], "]"}], "]"}]}]}], ";"}], 
            "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
            RowBox[{"(*", " ", 
             RowBox[{
             "for", " ", "multiple", " ", "fermionic", " ", "fields", " ", 
              "of", " ", "the", " ", "same", " ", "type", " ", "in", " ", 
              "one", " ", "list", " ", "we", " ", "need", " ", "to", " ", 
              "split", " ", "it", " ", "up", " ", "to", " ", "get", " ", 
              "the", " ", "correct", " ", "sign", " ", "and", " ", "then", 
              " ", "merge", " ", "it", " ", "again"}], " ", "*)"}], 
            "\[IndentingNewLine]", "\[IndentingNewLine]", 
            "\[IndentingNewLine]", "\[IndentingNewLine]", 
            "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"myEcho", "[", 
              RowBox[{"\"\<multiple similar fermions\>\"", ",", "3"}], "]"}], 
             ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
             RowBox[{"splitAllFermionList", " ", "=", " ", 
              RowBox[{"SplitIndexList", "[", "allfermionList", "]"}]}], ";", 
             "\[IndentingNewLine]", 
             RowBox[{"myEcho", "[", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{
                "\"\<split fermion list: \>\"", ",", "splitAllFermionList"}], 
                "}"}], ",", "3"}], "]"}], ";", "\[IndentingNewLine]", 
             RowBox[{"(*", 
              RowBox[{
               RowBox[{"signFermionsStart", " ", "=", " ", 
                RowBox[{"Apply", "[", 
                 RowBox[{"Times", ",", 
                  RowBox[{"Map", "[", 
                   RowBox[{"Signature", ",", 
                    RowBox[{"splitAllFermionList", "[", 
                    RowBox[{"[", 
                    RowBox[{"All", ",", "All", ",", "1"}], "]"}], "]"}]}], 
                   "]"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
               RowBox[{"myEcho", "[", 
                RowBox[{
                 RowBox[{"{", 
                  RowBox[{
                  "\"\<sign ferm start: \>\"", ",", "signFermionsStart"}], 
                  "}"}], ",", "3"}], "]"}], ";"}], "*)"}], 
             "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{"signFermionsEnd", ",", "mergedFermionsList"}], "}"}], 
              " ", "=", " ", 
              RowBox[{"MergeIndexLists", "[", 
               RowBox[{"splitAllFermionList", ",", 
                RowBox[{"(*", "signFermionsStart", "*)"}], "1", ",", 
                "fields"}], "]"}]}], ";", "\[IndentingNewLine]", 
             "\[IndentingNewLine]", 
             RowBox[{"signofSort", " ", "=", " ", "signFermionsEnd"}], ";", 
             "\[IndentingNewLine]", 
             RowBox[{"myEcho", "[", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{"\"\<sign fermions end: \>\"", ",", "signofSort"}], 
                "}"}], ",", "3"}], "]"}], ";", "\[IndentingNewLine]", 
             RowBox[{"newObjectIndices", " ", "=", " ", 
              RowBox[{"Join", "[", 
               RowBox[{"bosonicList", ",", " ", "mergedFermionsList"}], 
               "]"}]}], ";"}]}], "\[IndentingNewLine]", "]"}], ";"}]}], 
        "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
       RowBox[{"Return", "[", 
        RowBox[{"{", 
         RowBox[{"signofSort", ",", "newObjectIndices"}], "}"}], "]"}]}]}], 
     "\[IndentingNewLine]", "]"}], " "}]}]}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.7578419059871902`*^9, 3.7578419435112867`*^9}, {
   3.7578422570118394`*^9, 3.7578422575324717`*^9}, {3.757842427623862*^9, 
   3.75784253884229*^9}, {3.75784276683582*^9, 3.757842791024189*^9}, {
   3.7578428264823785`*^9, 3.7578428305606275`*^9}, {3.75784297969366*^9, 
   3.7578429850427437`*^9}, {3.7578430920198603`*^9, 
   3.7578431188176537`*^9}, {3.757843158140977*^9, 3.7578432107246413`*^9}, {
   3.7578432445420113`*^9, 3.7578432670860977`*^9}, {3.7578436044221582`*^9, 
   3.757843678172717*^9}, {3.7578439363124657`*^9, 3.7578439604720592`*^9}, {
   3.7578440451421947`*^9, 3.7578441015624585`*^9}, {3.757844148063322*^9, 
   3.757844157113652*^9}, {3.7578442008545938`*^9, 3.757844221800974*^9}, {
   3.757844271782111*^9, 3.7578442863143067`*^9}, {3.7578444080692387`*^9, 
   3.7578445322596846`*^9}, {3.7578445659233537`*^9, 
   3.7578445661473494`*^9}, {3.7578446678149853`*^9, 3.757844697928584*^9}, {
   3.757844767608915*^9, 3.757844974296132*^9}, {3.7578450141323543`*^9, 
   3.757845086733941*^9}, {3.757845123361599*^9, 3.7578451968135037`*^9}, {
   3.7578452408436017`*^9, 3.7578452415942345`*^9}, {3.7578452786366587`*^9, 
   3.7578453062393084`*^9}, {3.7578453686068373`*^9, 3.757845507786907*^9}, {
   3.757845578495093*^9, 3.7578456429177303`*^9}, {3.757849499161561*^9, 
   3.757849503719782*^9}, {3.7578496480427012`*^9, 3.757849690457095*^9}, {
   3.7578497220280523`*^9, 3.7578498927522445`*^9}, {3.7578499323538356`*^9, 
   3.757850132574339*^9}, {3.7578502257003016`*^9, 3.7578502783898287`*^9}, {
   3.757850385480007*^9, 3.7578504181877546`*^9}, {3.7578504599556894`*^9, 
   3.7578504612464323`*^9}, {3.757850500309557*^9, 3.7578505942395*^9}, {
   3.7578508473335094`*^9, 3.7578508693705015`*^9}, {3.7579332191543636`*^9, 
   3.7579332291289597`*^9}, {3.757942659947321*^9, 3.7579426880596123`*^9}, {
   3.7579427435405393`*^9, 3.757942790886831*^9}, {3.757942829539731*^9, 
   3.7579428336393194`*^9}, {3.7579429053855114`*^9, 3.7579429201575117`*^9}, 
   3.757942957440543*^9, {3.7579429939794188`*^9, 3.7579430110606375`*^9}, {
   3.758003982984779*^9, 3.7580039883731756`*^9}, {3.7580044695282693`*^9, 
   3.7580044948015814`*^9}, {3.758005194572846*^9, 3.758005208322956*^9}, {
   3.758007948845332*^9, 3.758008035361349*^9}, 3.758008108012484*^9, {
   3.7585378021662617`*^9, 3.758537820913334*^9}, {3.75905736351921*^9, 
   3.759057390720806*^9}, {3.7590575603640876`*^9, 3.759057605567198*^9}, 
   3.759057646392845*^9, {3.7590576933405867`*^9, 3.759057790587247*^9}, {
   3.7590579518886194`*^9, 3.7590579786542125`*^9}, {3.7590580109438314`*^9, 
   3.759058024122815*^9}, {3.7590631025356975`*^9, 3.759063276716978*^9}, {
   3.7590633116507845`*^9, 3.7590635069262238`*^9}, {3.7590635563721514`*^9, 
   3.759063560354744*^9}, {3.7590636290799613`*^9, 3.759063664133175*^9}, {
   3.759064337040166*^9, 3.7590644567938805`*^9}, {3.7590645086310453`*^9, 
   3.7590646006751738`*^9}, {3.7590647903377423`*^9, 3.75906488899411*^9}, {
   3.7590649352457867`*^9, 3.759064979063893*^9}, {3.759065029749593*^9, 
   3.7590651697680116`*^9}, {3.759065220945135*^9, 3.759065643810121*^9}, {
   3.7590656936287746`*^9, 3.7590657060535965`*^9}, {3.7590657837053256`*^9, 
   3.759065869586074*^9}, {3.759065969771173*^9, 3.7590660516022124`*^9}, {
   3.759066440408981*^9, 3.7590664481957197`*^9}, {3.759066577386879*^9, 
   3.759066611285901*^9}, {3.7590671495338445`*^9, 3.759067196942545*^9}, {
   3.759067665033038*^9, 3.759067680308466*^9}, {3.759067806375785*^9, 
   3.759067825111827*^9}, {3.759068564846325*^9, 3.7590686758832912`*^9}, {
   3.7590687134449725`*^9, 3.7590687270243073`*^9}, {3.7591333296199017`*^9, 
   3.7591333529609084`*^9}, 3.759138419001259*^9, {3.7592276122178*^9, 
   3.7592277050717416`*^9}, {3.759227767874671*^9, 3.759227840324709*^9}, {
   3.7592279334290667`*^9, 3.759227951597622*^9}, {3.7594859711303806`*^9, 
   3.7594859825851064`*^9}, {3.7594867454874754`*^9, 3.759486779050911*^9}, {
   3.7594873804215403`*^9, 3.759487407568572*^9}, {3.7594874381855116`*^9, 
   3.7594874383417187`*^9}, {3.7594880072236414`*^9, 3.759488077550237*^9}, {
   3.759488143390422*^9, 3.7594883173598166`*^9}, {3.7594883852801604`*^9, 
   3.7594884129241266`*^9}, {3.759488446253951*^9, 3.759488446425811*^9}, {
   3.759488482544117*^9, 3.759488565624728*^9}, {3.7594886776521006`*^9, 
   3.759488720374234*^9}, {3.759488764929764*^9, 3.7594888161876335`*^9}, {
   3.759497760396847*^9, 3.7594979226389275`*^9}, {3.7594980072480974`*^9, 
   3.759498012206029*^9}, {3.759563758572264*^9, 3.759563813194704*^9}, {
   3.759563963999016*^9, 3.759563964563074*^9}, {3.759565533286791*^9, 
   3.759565534081663*^9}, {3.759565662774018*^9, 3.759565667827921*^9}, {
   3.7595657753034534`*^9, 3.759565781787346*^9}, {3.7595658328118324`*^9, 
   3.759565836009116*^9}, {3.759566002975113*^9, 3.759566109295339*^9}, {
   3.75956617255684*^9, 3.759566188793191*^9}, {3.7595727135056887`*^9, 
   3.759572741364516*^9}, {3.7595744833315544`*^9, 3.7595744861615496`*^9}, {
   3.7596553664509773`*^9, 3.7596553709836082`*^9}, {3.7596555782862797`*^9, 
   3.7596555786342797`*^9}, {3.7596606589232955`*^9, 3.759660779498266*^9}, {
   3.7596608269014273`*^9, 3.759660853436632*^9}, 3.759664777019089*^9, {
   3.7618967895366387`*^9, 3.7618968313678017`*^9}, {3.7618979101720023`*^9, 
   3.7618979459613843`*^9}, {3.764481736133497*^9, 3.7644817696328506`*^9}, {
   3.771059779126445*^9, 3.771059851701308*^9}, {3.771059921638997*^9, 
   3.771059933296812*^9}, {3.7712251379391546`*^9, 3.7712251412051477`*^9}, 
   3.7712342529008284`*^9, {3.7733961850369854`*^9, 3.773396185263384*^9}, {
   3.773396322810609*^9, 3.7733963229991035`*^9}, 3.773400777155312*^9, {
   3.773400860905286*^9, 3.7734008855473986`*^9}, {3.7734631470094624`*^9, 
   3.773463232750521*^9}, {3.773463394002835*^9, 3.7734635270502987`*^9}, {
   3.773463694463195*^9, 3.7734639350739937`*^9}, {3.7734640352774153`*^9, 
   3.7734641159750967`*^9}, {3.7734642092463665`*^9, 3.773464333815798*^9}, {
   3.773464554581476*^9, 3.773464555300059*^9}, {3.7734645977937775`*^9, 
   3.7734646078420763`*^9}, {3.7734683501429677`*^9, 
   3.7734684125002623`*^9}, {3.7734685284366045`*^9, 3.773468560453*^9}, {
   3.773470985455763*^9, 3.773470986112007*^9}, {3.7734727777407274`*^9, 
   3.773472835330744*^9}, {3.7746016998939075`*^9, 3.774601702126979*^9}, {
   3.774601889724665*^9, 3.774601890724847*^9}, {3.7746019828552213`*^9, 
   3.774602250026582*^9}, {3.7746022914644575`*^9, 3.774602311071683*^9}, {
   3.774602704009693*^9, 3.774602716861783*^9}, {3.774602856581894*^9, 
   3.7746028798844633`*^9}, {3.7746029282303314`*^9, 3.774603006146589*^9}, {
   3.774603491022051*^9, 3.7746035948661623`*^9}, {3.774603647536347*^9, 
   3.774603739262045*^9}, {3.7746037907600327`*^9, 3.77460379822607*^9}, {
   3.7746056237371693`*^9, 3.7746056628871155`*^9}, {3.774605705242727*^9, 
   3.774605811406561*^9}, {3.7746058636459627`*^9, 3.77460600669277*^9}, {
   3.77460604914752*^9, 3.774606132638686*^9}, {3.7746061774407415`*^9, 
   3.774606200382085*^9}, {3.7746063097866526`*^9, 3.7746063416310034`*^9}, {
   3.7746064008917956`*^9, 3.774606409529688*^9}, {3.774606892272526*^9, 
   3.774606897025038*^9}, {3.7746071042916193`*^9, 3.774607124312949*^9}, {
   3.774607165327582*^9, 3.774607181726252*^9}, {3.7746072476379557`*^9, 
   3.7746072481914454`*^9}, {3.775198431833274*^9, 3.775198508252081*^9}, {
   3.775198635585821*^9, 3.7751986676060643`*^9}, {3.7751987024441624`*^9, 
   3.7751987131105633`*^9}, {3.7751990470035934`*^9, 
   3.7751991534894953`*^9}, {3.775208869239772*^9, 3.775208885488533*^9}, 
   3.7752096214080644`*^9},
 CellLabel->"In[78]:=",ExpressionUUID->"55b488ad-7734-4cea-b0c6-176fdbe05927"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"DefaultVertexOrdering", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"i", ",", "j", ",", "l", ",", "k"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"i", "\[Rule]", "cbar"}], ",", " ", 
     RowBox[{"j", "\[Rule]", " ", "c"}], ",", " ", 
     RowBox[{"l", "\[Rule]", " ", "c"}], ",", 
     RowBox[{"k", "\[Rule]", "cbar"}]}], "}"}], ",", "fields"}], 
  "]"}]], "Input",
 CellChangeTimes->{{3.774606017312641*^9, 3.774606029754345*^9}, {
  3.774607137895378*^9, 3.774607140001709*^9}},
 CellLabel->"In[80]:=",ExpressionUUID->"37b6281b-d65a-47f2-b520-1808c8cee44b"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1", ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"cbar", ",", "i"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"cbar", ",", "k"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"c", ",", "j"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"c", ",", "l"}], "}"}]}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.7746060239877644`*^9, 3.7746060305703273`*^9}, 
   3.774606086803323*^9, 3.7746069000137105`*^9, {3.7746071095545588`*^9, 
   3.7746071413082566`*^9}, {3.774607173365986*^9, 3.7746071837887077`*^9}, 
   3.7746072632718897`*^9, 3.775196847674227*^9, 3.775198388511051*^9, 
   3.7751984777834673`*^9, 3.775198525924366*^9, 3.77519867584702*^9, 
   3.7752097255583944`*^9, 3.775279788551536*^9, 3.7753644106504207`*^9},
 CellLabel->"Out[80]=",ExpressionUUID->"d09d0790-d8ad-4fa2-896d-bd45844ef31b"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"DefaultVertexOrdering", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"i", ",", "j", ",", "l"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"i", "\[Rule]", "A"}], ",", " ", 
     RowBox[{"j", "\[Rule]", "A"}], ",", " ", 
     RowBox[{"l", "\[Rule]", "A"}]}], "}"}], ",", "fields"}], "]"}]], "Input",
 CellChangeTimes->{{3.7752088437366657`*^9, 3.7752088492372637`*^9}},
 CellLabel->"In[81]:=",ExpressionUUID->"b10ec5be-3789-4381-80fa-f8851e1d6073"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1", ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"A", ",", "i"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"A", ",", "j"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"A", ",", "l"}], "}"}]}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.7752088498776464`*^9, 3.7752088884834657`*^9}, 
   3.7752097256209145`*^9, 3.7752797885984*^9, 3.775364410775382*^9},
 CellLabel->"Out[81]=",ExpressionUUID->"ea12af79-67cf-4f91-a996-79c107748e16"]
}, Open  ]],

Cell[BoxData["\[IndentingNewLine]"], "Input",
 CellChangeTimes->{3.7746063721772175`*^9},
 CellLabel->"In[82]:=",ExpressionUUID->"fe3a5469-111f-4e82-9a2c-5a5200489f2c"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"DefaultVertexOrdering", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"i", ",", "j", ",", "l"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"i", "\[Rule]", "cbar"}], ",", " ", 
     RowBox[{"j", "\[Rule]", " ", "c"}], ",", " ", 
     RowBox[{"l", "\[Rule]", " ", "A"}]}], "}"}], ",", "fields"}], 
  "]"}]], "Input",
 CellChangeTimes->{{3.774605692859089*^9, 3.7746056984937487`*^9}},
 CellLabel->"In[83]:=",ExpressionUUID->"6507e5bb-79a6-4c5c-8412-aa9130dfc077"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1", ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"A", ",", "l"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"cbar", ",", "i"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"c", ",", "j"}], "}"}]}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.7746056993963246`*^9, 3.77460577846795*^9}, 
   3.7746058132239723`*^9, {3.774605908127088*^9, 3.7746060081929626`*^9}, 
   3.7746060819732027`*^9, {3.7746061158491507`*^9, 3.77460613389832*^9}, 
   3.7746062035127125`*^9, {3.774606321964562*^9, 3.7746063452038345`*^9}, 
   3.7751969136486244`*^9, 3.775198381494234*^9, 3.7751985827929726`*^9, 
   3.7751986802849903`*^9, {3.7751990694902315`*^9, 3.775199106344847*^9}, 
   3.775199156380368*^9, 3.7752088540345273`*^9, 3.7752097257146454`*^9, 
   3.7752797887077503`*^9, 3.775364410963456*^9},
 CellLabel->"Out[83]=",ExpressionUUID->"9247ed82-32fc-4cb1-8d85-1140824625cd"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"DefaultVertexOrdering", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"i", ",", "j", ",", "l"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"i", "\[Rule]", "c"}], ",", " ", 
     RowBox[{"j", "\[Rule]", "A"}], ",", " ", 
     RowBox[{"l", "\[Rule]", "cbar"}]}], "}"}], ",", "fields"}], 
  "]"}]], "Input",
 CellChangeTimes->{{3.7746058260192366`*^9, 3.7746058339585304`*^9}},
 CellLabel->"In[84]:=",ExpressionUUID->"1ecad94e-7dda-4d14-a6b0-45618f6613ad"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"-", "1"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"A", ",", "j"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"cbar", ",", "l"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"c", ",", "i"}], "}"}]}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.774605828202177*^9, 3.7746058347182827`*^9}, 
   3.774606090665529*^9, 3.7746063540311966`*^9, 3.7751969184581995`*^9, 
   3.7751983778219824`*^9, 3.7751985848784037`*^9, 3.775198682441393*^9, 
   3.7751991585368733`*^9, 3.775208854769123*^9, 3.775209725839612*^9, 
   3.775279788770235*^9, 3.7753644110728393`*^9},
 CellLabel->"Out[84]=",ExpressionUUID->"8ed56949-51d6-4396-8013-0e9c5c16be65"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"DefaultVertexOrdering", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"i", ",", "j", ",", "k", ",", "l", ",", "m", ",", "n"}], "}"}], 
   ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"i", "\[Rule]", "cbar"}], ",", 
     RowBox[{"j", "\[Rule]", 
      RowBox[{"Q", "[", "A", "]"}]}], ",", 
     RowBox[{"k", "\[Rule]", "A"}], ",", 
     RowBox[{"l", "\[Rule]", 
      RowBox[{"Q", "[", "A", "]"}]}], ",", 
     RowBox[{"m", "\[Rule]", "c"}], ",", 
     RowBox[{"n", "\[Rule]", "A"}]}], "}"}], ",", "fields"}], "]"}]], "Input",
 CellChangeTimes->{{3.7594979530111866`*^9, 3.75949796040781*^9}, 
   3.759572701314793*^9, {3.7734710047102785`*^9, 3.7734710189707055`*^9}, {
   3.7746019112355757`*^9, 3.77460191142507*^9}, {3.7746028843880496`*^9, 
   3.7746028980106297`*^9}, {3.774603523639718*^9, 3.7746035240755615`*^9}, {
   3.775196936164359*^9, 3.775196962874288*^9}},
 CellLabel->"In[85]:=",ExpressionUUID->"8ed2b186-292a-445c-9e42-b7f5b7806972"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1", ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"A", ",", "k"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"A", ",", "n"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"cbar", ",", "i"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"c", ",", "m"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"Q", "[", "A", "]"}], ",", "j"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"Q", "[", "A", "]"}], ",", "l"}], "}"}]}], "}"}]}], 
  "}"}]], "Output",
 CellChangeTimes->{
  3.774605675391245*^9, 3.77519696694847*^9, 3.775197249398557*^9, 
   3.7751972999326324`*^9, 3.7751973580916724`*^9, {3.7751974101167393`*^9, 
   3.7751974305693364`*^9}, 3.775197512059738*^9, 3.775197655836384*^9, 
   3.775197686859221*^9, 3.7751983282852945`*^9, 3.775198689629954*^9, 
   3.7751991642189937`*^9, 3.775209725902094*^9, 3.7752797888304987`*^9, 
   3.775364411322745*^9},
 CellLabel->"Out[85]=",ExpressionUUID->"6757036e-9251-476c-885a-bd4d62b336e9"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"(", 
  RowBox[{
   RowBox[{"Length", "@", 
    RowBox[{
     RowBox[{"Flatten", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"{", 
           RowBox[{"cbar", ",", "i"}], "}"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
             RowBox[{"Q", "[", "A", "]"}], ",", "j"}], "}"}], ",", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"Q", "[", "A", "]"}], ",", "l"}], "}"}], ",", 
           RowBox[{"{", 
            RowBox[{"c", ",", "m"}], "}"}]}], "}"}]}], "}"}], ",", "1"}], 
      "]"}], "[", 
     RowBox[{"[", 
      RowBox[{"All", ",", "1"}], "]"}], "]"}]}], "-", 
   RowBox[{
    RowBox[{"First", "[", 
     RowBox[{"Position", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"Flatten", "[", 
         RowBox[{
          RowBox[{"Map", "[", 
           RowBox[{"Sort", ",", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{"{", 
                RowBox[{"cbar", ",", "i"}], "}"}], "}"}], ",", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"{", 
                 RowBox[{
                  RowBox[{"Q", "[", "A", "]"}], ",", "j"}], "}"}], ",", 
                RowBox[{"{", 
                 RowBox[{
                  RowBox[{"Q", "[", "A", "]"}], ",", "l"}], "}"}], ",", 
                RowBox[{"{", 
                 RowBox[{"c", ",", "m"}], "}"}]}], "}"}]}], "}"}]}], "]"}], 
          ",", "1"}], "]"}], "[", 
        RowBox[{"[", 
         RowBox[{"All", ",", "1"}], "]"}], "]"}], ",", 
       RowBox[{
        RowBox[{"First", "[", 
         RowBox[{"{", 
          RowBox[{"{", 
           RowBox[{"c", ",", "m"}], "}"}], "}"}], "]"}], "[", 
        RowBox[{"[", "1", "]"}], "]"}]}], "]"}], "]"}], "[", 
    RowBox[{"[", "1", "]"}], "]"}]}], ")"}]], "Input",
 CellChangeTimes->{{3.7751975979982333`*^9, 3.7751976081466546`*^9}, {
  3.7751977513187323`*^9, 3.7751977667895803`*^9}, {3.775197862503559*^9, 
  3.7751978727128935`*^9}, {3.7751979067543416`*^9, 3.775197922274679*^9}, {
  3.7751979637818494`*^9, 3.7751979661571674`*^9}, {3.775198077505601*^9, 
  3.7751980985323544`*^9}, {3.775198131945158*^9, 3.77519813746233*^9}, {
  3.775198174740818*^9, 3.775198183601715*^9}, {3.7751982410402794`*^9, 
  3.775198243651104*^9}},
 CellLabel->"In[86]:=",ExpressionUUID->"c3cf2e1b-3973-4e68-ae77-6e72180d4e01"],

Cell[BoxData["2"], "Output",
 CellChangeTimes->{{3.7751977646018505`*^9, 3.7751977673848763`*^9}, 
   3.775197873556476*^9, {3.77519791155308*^9, 3.7751979227745266`*^9}, {
   3.775198133977189*^9, 3.775198137868447*^9}, {3.7751981803593283`*^9, 
   3.775198184164112*^9}, 3.775198244213438*^9, 3.775209725948964*^9, 
   3.7752797888929834`*^9, 3.775364411447721*^9},
 CellLabel->"Out[86]=",ExpressionUUID->"1a1d7b27-db11-48b8-87e6-5da980551e01"]
}, Open  ]],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Clear", "[", "DefaultPropOrdering", "]"}], ";"}], 
  " "}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"DefaultPropOrdering", "[", 
   RowBox[{"propIndices_", ",", "onecombinedIndexConfigs_", ",", "fields_"}], 
   "]"}], " ", ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"superindices", ",", "testfield", ",", "positionTestfield", ",", 
      RowBox[{"bosonicList", "=", " ", 
       RowBox[{"{", "}"}]}], ",", " ", 
      RowBox[{"fermionicList", "=", " ", 
       RowBox[{"{", "}"}]}], ",", " ", 
      RowBox[{"antifermionicList", " ", "=", " ", 
       RowBox[{"{", "}"}]}], ",", " ", "newsign", ",", " ", "newPropIndices", 
      ",", "signFermionsStart"}], "}"}], ",", "\[IndentingNewLine]", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"myEcho", "[", 
      RowBox[{"\"\<DefaultPropOrdering\>\"", ",", "3"}], "]"}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"superindices", " ", "=", " ", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"propIndices", "/.", "onecombinedIndexConfigs"}], ",", 
        "propIndices"}], "}"}]}], ";", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
      "sort", " ", "for", " ", "bosons", " ", "and", " ", "xfermions"}], 
      "*)"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
       RowBox[{"(", 
        RowBox[{
         RowBox[{"testfield", " ", "=", " ", 
          RowBox[{"superindices", "[", 
           RowBox[{"[", 
            RowBox[{"All", ",", "#"}], "]"}], "]"}]}], ";", 
         "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"MemberQ", "[", 
            RowBox[{
             RowBox[{"Map", "[", 
              RowBox[{"Head", ",", 
               RowBox[{"fields", "[", 
                RowBox[{"[", "\"\<bosonic\>\"", "]"}], "]"}]}], "]"}], ",", 
             RowBox[{"testfield", "[", 
              RowBox[{"[", "1", "]"}], "]"}]}], "]"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"myEcho", "[", 
             RowBox[{"\"\<boson\>\"", ",", "3"}], "]"}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"bosonicList", " ", "=", " ", 
             RowBox[{"Sort", "@", 
              RowBox[{"Join", "[", 
               RowBox[{"bosonicList", ",", 
                RowBox[{"{", "testfield", "}"}]}], "]"}]}]}], ";"}]}], 
          "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"MemberQ", "[", 
            RowBox[{
             RowBox[{"Map", "[", 
              RowBox[{"Head", ",", 
               RowBox[{"fields", "[", 
                RowBox[{"[", 
                 RowBox[{"\"\<fermionic\>\"", ",", "All", ",", "1"}], "]"}], 
                "]"}]}], "]"}], ",", 
             RowBox[{"testfield", "[", 
              RowBox[{"[", "1", "]"}], "]"}]}], "]"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"myEcho", "[", 
             RowBox[{"\"\<antifermion\>\"", ",", "3"}], "]"}], ";", 
            "\[IndentingNewLine]", " ", 
            RowBox[{"antifermionicList", " ", "=", " ", 
             RowBox[{"Join", "[", 
              RowBox[{"antifermionicList", ",", 
               RowBox[{"{", "testfield", "}"}]}], "]"}]}], ";"}]}], 
          "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"MemberQ", "[", 
            RowBox[{
             RowBox[{"Map", "[", 
              RowBox[{"Head", ",", 
               RowBox[{"fields", "[", 
                RowBox[{"[", 
                 RowBox[{"\"\<fermionic\>\"", ",", "All", ",", "2"}], "]"}], 
                "]"}]}], "]"}], ",", 
             RowBox[{"testfield", "[", 
              RowBox[{"[", "1", "]"}], "]"}]}], "]"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"myEcho", "[", 
             RowBox[{"\"\<fermion\>\"", ",", "3"}], "]"}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"fermionicList", " ", "=", " ", 
             RowBox[{"Join", "[", 
              RowBox[{"fermionicList", ",", 
               RowBox[{"{", "testfield", "}"}]}], "]"}]}], ";"}]}], 
          "\[IndentingNewLine]", "]"}], ";"}], "\[IndentingNewLine]", ")"}], 
       "&"}], "/@", 
      RowBox[{"{", 
       RowBox[{"1", ",", "2"}], "}"}]}], ";", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"Length", "@", "fermionicList"}], " ", "\[Equal]", " ", "0"}],
        ",", "   ", 
       RowBox[{"(*", " ", 
        RowBox[{
        "get", " ", "sign", " ", "for", " ", "bosonic", " ", "or", " ", 
         "fermionic", " ", "prop"}], " ", "*)"}], "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"myEcho", "[", 
         RowBox[{"\"\<bosonic prop\>\"", ",", "5"}], "]"}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"newsign", " ", "=", " ", "1"}], ";", "\[IndentingNewLine]", 
        RowBox[{"newPropIndices", " ", "=", " ", "bosonicList"}], ";"}], 
       "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"myEcho", "[", 
         RowBox[{"\"\<fermionic prop\>\"", ",", "5"}], "]"}], ";", 
        "\[IndentingNewLine]", "\[IndentingNewLine]", 
        RowBox[{"signFermionsStart", " ", "=", " ", 
         RowBox[{"Signature", "[", 
          RowBox[{"superindices", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"newPropIndices", " ", "=", 
         RowBox[{"Flatten", "[", 
          RowBox[{
           RowBox[{"Transpose", "[", 
            RowBox[{"{", 
             RowBox[{"fermionicList", ",", "antifermionicList"}], "}"}], 
            "]"}], ",", "1"}], "]"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"newsign", " ", "=", " ", 
         RowBox[{"signFermionsStart", " ", "*", " ", 
          RowBox[{"Signature", "[", "newPropIndices", "]"}]}]}], ";"}]}], 
      "\[IndentingNewLine]", "\[IndentingNewLine]", "]"}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"Return", "[", 
      RowBox[{"{", 
       RowBox[{"newsign", ",", "newPropIndices"}], "}"}], "]"}]}]}], 
   "\[IndentingNewLine]", "]"}], " "}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.759486515588107*^9, 3.7594865198592405`*^9}, {
   3.7594865858127356`*^9, 3.7594867116368313`*^9}, {3.7594867882713733`*^9, 
   3.7594869951035724`*^9}, {3.7594870778448467`*^9, 3.759487218450078*^9}, {
   3.75948725359223*^9, 3.7594873262041273`*^9}, 3.7595640786579647`*^9, {
   3.7595654597290163`*^9, 3.7595654648687196`*^9}, {3.7595654955375185`*^9, 
   3.7595655027172685`*^9}, {3.7595744251241846`*^9, 3.759574434530018*^9}, {
   3.7596555413379393`*^9, 3.759655591552616*^9}, {3.759655650400263*^9, 
   3.7596557102144394`*^9}, {3.7596557515375285`*^9, 
   3.7596559100972614`*^9}, {3.7596559487338004`*^9, 
   3.7596560457392664`*^9}, {3.7596583977977047`*^9, 
   3.7596584004543486`*^9}, {3.7596608604378686`*^9, 3.7596608672217503`*^9}, 
   3.75966467294302*^9, {3.7618968804783916`*^9, 3.7618969261305637`*^9}, {
   3.7644819250733256`*^9, 3.764481930760858*^9}, {3.764481985496608*^9, 
   3.764481990020009*^9}, {3.7644820214917793`*^9, 3.7644820395940847`*^9}, {
   3.764482232571994*^9, 3.7644822755473194`*^9}, {3.7644823090405283`*^9, 
   3.7644823174064417`*^9}, {3.764482349058468*^9, 3.764482351366534*^9}, {
   3.771225230161829*^9, 3.7712252392405577`*^9}, 3.771234308041957*^9, {
   3.7734724532358856`*^9, 3.7734727465900187`*^9}, {3.77347297913524*^9, 
   3.7734730702097254`*^9}, {3.773473126671758*^9, 3.773473157086435*^9}, {
   3.773473234467435*^9, 3.773473300254076*^9}, {3.7735474102563367`*^9, 
   3.773547410865569*^9}, {3.7746030779169292`*^9, 3.7746031653100595`*^9}, {
   3.774603198027748*^9, 3.7746032738582687`*^9}, {3.7746033796545315`*^9, 
   3.7746033836288795`*^9}, {3.7746034183733425`*^9, 3.774603458001362*^9}, {
   3.7746038072240114`*^9, 3.774603840583694*^9}, {3.774603872489385*^9, 
   3.7746039035288343`*^9}, {3.774604938587144*^9, 3.7746050123430433`*^9}, {
   3.774605052332551*^9, 3.7746050532112255`*^9}, {3.7746051918871007`*^9, 
   3.7746052843069077`*^9}, {3.7746053164383516`*^9, 3.774605317068693*^9}, {
   3.774605580851918*^9, 3.7746055922733*^9}, {3.775199224394165*^9, 
   3.775199268469349*^9}, {3.7752096278315725`*^9, 3.7752096423949203`*^9}},
 CellLabel->"In[87]:=",ExpressionUUID->"07a2b171-7a56-44e6-8f0f-ff790cfeafa1"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"DefaultPropOrdering", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"i", ",", "j"}], "}"}], ",", "#", ",", "fields"}], "]"}], "&"}],
   "/@", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"i", "\[Rule]", "cbar"}], ",", 
      RowBox[{"j", "\[Rule]", "c"}]}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"i", "\[Rule]", "c"}], ",", 
      RowBox[{"j", "\[Rule]", "cbar"}]}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"i", "\[Rule]", "A"}], ",", 
      RowBox[{"j", "\[Rule]", "A"}]}], "}"}]}], "}"}]}]], "Input",
 CellChangeTimes->{{3.759487090808859*^9, 3.7594871291326866`*^9}, {
  3.764481951697871*^9, 3.7644819649308505`*^9}, {3.764482006824263*^9, 
  3.7644820081608644`*^9}, {3.7644820978176956`*^9, 3.7644820990386686`*^9}, {
  3.7644822255982056`*^9, 3.76448224098253*^9}, {3.7644823339450626`*^9, 
  3.764482342237186*^9}, {3.7734731620651255`*^9, 3.7734731627054453`*^9}, {
  3.7734733114192233`*^9, 3.7734733250378094`*^9}, {3.7746031767337894`*^9, 
  3.7746031844122467`*^9}, {3.774603886971721*^9, 3.77460388717152*^9}, {
  3.774605076552519*^9, 3.774605078584123*^9}, {3.774605140687913*^9, 
  3.774605152566084*^9}},
 CellLabel->"In[89]:=",ExpressionUUID->"1ee9ef49-d41a-4c9b-8471-69d32a839297"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{"-", "1"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"c", ",", "j"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"cbar", ",", "i"}], "}"}]}], "}"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"c", ",", "i"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"cbar", ",", "j"}], "}"}]}], "}"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"A", ",", "i"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"A", ",", "j"}], "}"}]}], "}"}]}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.774603170588924*^9, 3.7746032778466015`*^9}, 
   3.774603386145192*^9, {3.7746038821036425`*^9, 3.7746039056410227`*^9}, 
   3.7746051537258167`*^9, {3.7746052493807025`*^9, 3.7746052863650827`*^9}, 
   3.7746053208824663`*^9, 3.774605597201192*^9, 3.7751987236311293`*^9, 
   3.7751992721422715`*^9, 3.775209726058276*^9, 3.775279789002333*^9, 
   3.7753644116508265`*^9},
 CellLabel->"Out[89]=",ExpressionUUID->"2855cee0-9c63-4c56-b971-7352f2c6ce24"]
}, Open  ]],

Cell[BoxData[{
 RowBox[{
  RowBox[{"Clear", "[", "SortObject", "]"}], " ", 
  RowBox[{"(*", " ", 
   RowBox[{"sorts", " ", "one", " ", "general", " ", "object"}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SortObject", "[", 
   RowBox[{
   "objecttype_", ",", "objectIndices_", ",", "onecombinedIndexConfigs_", ",",
     " ", "fields_"}], "]"}], " ", ":=", " ", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"sign", ",", 
      RowBox[{"sortedIndices", " ", "=", " ", 
       RowBox[{"Table", "[", 
        RowBox[{"Null", ",", 
         RowBox[{"Length", "@", "objectIndices"}]}], "]"}]}], ",", " ", 
      RowBox[{"newObjectIndices", " ", "=", " ", "objectIndices"}]}], "}"}], 
    ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"myEcho", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"\"\<old ordering: \>\"", ",", " ", "objectIndices"}], "}"}], 
       ",", "4"}], "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"Switch", "[", 
      RowBox[{
      "objecttype", ",", "\[IndentingNewLine]", "\"\<Propagator\>\"", ",", 
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{"sign", ",", "sortedIndices"}], "}"}], " ", "=", " ", 
         RowBox[{"DefaultPropOrdering", "[", 
          RowBox[{
          "objectIndices", ",", "onecombinedIndexConfigs", ",", " ", 
           "fields"}], "]"}]}], ";"}], ",", "\[IndentingNewLine]", 
       "\"\<nPoint\>\"", ",", 
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{"sign", ",", "sortedIndices"}], "}"}], " ", "=", " ", 
         RowBox[{"DefaultVertexOrdering", "[", 
          RowBox[{
          "objectIndices", ",", "onecombinedIndexConfigs", ",", " ", 
           "fields"}], "]"}]}], ";"}]}], "\[IndentingNewLine]", "]"}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"myEcho", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
        "\"\<vertex/prop ordering yields: \>\"", ",", " ", "sign", ",", " ", 
         "objectIndices", ",", "sortedIndices"}], "}"}], ",", "3"}], "]"}], 
     ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"Return", "[", 
      RowBox[{"{", 
       RowBox[{"sign", ",", " ", "sortedIndices"}], "}"}], "]"}], ";"}]}], 
   "\[IndentingNewLine]", "]"}], " "}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.7580059091427436`*^9, 3.758005943622452*^9}, {
   3.7580060110165577`*^9, 3.758006022131509*^9}, {3.758006083282144*^9, 
   3.75800608754673*^9}, {3.7580062046954317`*^9, 3.7580062060055866`*^9}, {
   3.758006240775317*^9, 3.7580062651435843`*^9}, {3.7580064268301916`*^9, 
   3.7580065420960007`*^9}, {3.7580066082034416`*^9, 3.758006675442548*^9}, {
   3.7580067322156963`*^9, 3.758006816192916*^9}, {3.758006923202875*^9, 
   3.758006977456459*^9}, {3.75800701624586*^9, 3.7580070217865896`*^9}, {
   3.7580070610467567`*^9, 3.7580071115301275`*^9}, {3.758007239601614*^9, 
   3.758007267649871*^9}, {3.7580073265950894`*^9, 3.7580073383452916`*^9}, {
   3.7580074541765475`*^9, 3.7580074559186745`*^9}, {3.758007532432228*^9, 
   3.7580075509351053`*^9}, {3.758007594283926*^9, 3.7580076271253486`*^9}, {
   3.7580078265680623`*^9, 3.758007836975834*^9}, {3.758007882321764*^9, 
   3.7580079276786346`*^9}, {3.7580080412016172`*^9, 
   3.7580080768041525`*^9}, {3.7580081570392895`*^9, 
   3.7580082363374968`*^9}, {3.7580082762720575`*^9, 
   3.7580083724527383`*^9}, {3.7580084061677103`*^9, 3.758008430742066*^9}, {
   3.7580084930437555`*^9, 3.758008506650202*^9}, {3.7580086312612967`*^9, 
   3.758008696773825*^9}, {3.7580087369886994`*^9, 3.7580087762149153`*^9}, {
   3.758009003741465*^9, 3.7580090204642067`*^9}, {3.758014664220793*^9, 
   3.7580147866072187`*^9}, {3.758015134347046*^9, 3.758015198174034*^9}, {
   3.7580152597857857`*^9, 3.758015320757729*^9}, {3.758016294492928*^9, 
   3.7580164829784036`*^9}, {3.7580165146625166`*^9, 3.758016599282064*^9}, {
   3.758016837889203*^9, 3.7580168433228474`*^9}, {3.7580168747067842`*^9, 
   3.7580169353424177`*^9}, {3.7580169717975616`*^9, 3.758016984050174*^9}, {
   3.7580170815371203`*^9, 3.7580170875661507`*^9}, {3.758017146885581*^9, 
   3.7580171495503654`*^9}, {3.7580172360242395`*^9, 3.758017266520356*^9}, {
   3.7580173023192596`*^9, 3.7580173080041485`*^9}, {3.7580173649859085`*^9, 
   3.758017393774477*^9}, {3.7580174311901913`*^9, 3.758017433115595*^9}, {
   3.7580174963565416`*^9, 3.758017729915028*^9}, {3.7580177842217984`*^9, 
   3.758017791877041*^9}, {3.758017828396607*^9, 3.7580178298878016`*^9}, {
   3.7580178662903295`*^9, 3.7580179694617724`*^9}, {3.758018003145013*^9, 
   3.7580180407460957`*^9}, {3.7580182480657153`*^9, 
   3.7580182574357147`*^9}, {3.758019136810506*^9, 3.7580191592449665`*^9}, {
   3.758019258177224*^9, 3.7580192640265656`*^9}, {3.7580193721560884`*^9, 
   3.7580193772087927`*^9}, {3.7580194484206767`*^9, 3.758019450073004*^9}, {
   3.7580197197199793`*^9, 3.758019745903989*^9}, 3.7580198316758957`*^9, {
   3.7580201167394114`*^9, 3.758020121283394*^9}, {3.7580201609595346`*^9, 
   3.758020161770928*^9}, {3.7580901495892076`*^9, 3.758090246800564*^9}, {
   3.7580902971347613`*^9, 3.7580903044672327`*^9}, {3.7580904465885935`*^9, 
   3.758090482628478*^9}, {3.75809052105635*^9, 3.758090531350961*^9}, {
   3.758091090245044*^9, 3.7580910957085285`*^9}, {3.758091269195159*^9, 
   3.7580912743975143`*^9}, {3.758091770189131*^9, 3.758091805789091*^9}, {
   3.758091962833066*^9, 3.758091977292053*^9}, {3.758092060800458*^9, 
   3.7580920651320534`*^9}, {3.7585189140630407`*^9, 
   3.7585189269665403`*^9}, {3.7585190347957473`*^9, 3.758519247844508*^9}, {
   3.758519287549301*^9, 3.7585193763997183`*^9}, {3.758519793380451*^9, 
   3.758519806380858*^9}, 3.758534853257619*^9, {3.7585362702634745`*^9, 
   3.7585362710274286`*^9}, {3.7585399298728056`*^9, 3.758539954306786*^9}, {
   3.7585400291834555`*^9, 3.7585400397547255`*^9}, {3.7588865640222025`*^9, 
   3.758886600076167*^9}, {3.758886634150237*^9, 3.758886706386278*^9}, 
   3.758886821116184*^9, {3.7588869808075447`*^9, 3.7588870254138436`*^9}, {
   3.758887296972602*^9, 3.758887301408513*^9}, {3.7588873512798367`*^9, 
   3.7588873545737295`*^9}, {3.758889290103691*^9, 3.758889295286618*^9}, {
   3.758889558552761*^9, 3.7588895679380207`*^9}, {3.758889648197013*^9, 
   3.7588897069472094`*^9}, {3.758889758085287*^9, 3.7588897675268044`*^9}, {
   3.7588898178486085`*^9, 3.758889821478201*^9}, {3.7588909202415056`*^9, 
   3.7588909287356243`*^9}, {3.758967877577487*^9, 3.758967878274412*^9}, {
   3.759131526694357*^9, 3.7591315488090687`*^9}, {3.7591321176579657`*^9, 
   3.759132123787202*^9}, {3.7591333783549876`*^9, 3.759133379762179*^9}, {
   3.75913843792101*^9, 3.7591384648865547`*^9}, {3.759151709505865*^9, 
   3.7591517151329727`*^9}, {3.759151904733689*^9, 3.759151910763975*^9}, {
   3.7592172461847334`*^9, 3.759217275498373*^9}, {3.7592173266725225`*^9, 
   3.759217340135519*^9}, {3.759217374444743*^9, 3.7592173814918957`*^9}, {
   3.7592178196023045`*^9, 3.759217838135742*^9}, {3.7592181642760086`*^9, 
   3.7592181772571573`*^9}, {3.759218309308039*^9, 3.7592183497375937`*^9}, {
   3.759218396424872*^9, 3.759218410832056*^9}, {3.7592184524869814`*^9, 
   3.7592184561874495`*^9}, {3.7592185360039463`*^9, 3.7592185668932457`*^9}, 
   3.7592186116422815`*^9, {3.759218699002886*^9, 3.759218714260434*^9}, 
   3.759222079914278*^9, {3.7592270571353045`*^9, 3.7592270834012427`*^9}, {
   3.7592271452511373`*^9, 3.7592271885069284`*^9}, {3.7592272339055953`*^9, 
   3.7592272631986146`*^9}, {3.759227305795884*^9, 3.759227330979487*^9}, {
   3.759227374770662*^9, 3.759227404831029*^9}, {3.7592274450372887`*^9, 
   3.7592274505378475`*^9}, {3.759227488022307*^9, 3.7592275055439343`*^9}, {
   3.759227982987032*^9, 3.7592279944402733`*^9}, {3.7595656463259335`*^9, 
   3.759565653479278*^9}, {3.759571026534537*^9, 3.7595711369901357`*^9}, {
   3.75957117634628*^9, 3.759571221314557*^9}, {3.7595712662984595`*^9, 
   3.759571267382324*^9}, 3.759571325727587*^9, {3.759571361429838*^9, 
   3.75957151228749*^9}, {3.7595715621392345`*^9, 3.75957156230579*^9}, {
   3.759571608148795*^9, 3.7595716179070115`*^9}, {3.759571653119585*^9, 
   3.759571673600479*^9}, {3.759571758934619*^9, 3.7595717599843493`*^9}, {
   3.759571817866128*^9, 3.7595718561844096`*^9}, {3.7595719020149307`*^9, 
   3.7595719186674523`*^9}, {3.7595719557669463`*^9, 3.759571956363447*^9}, {
   3.759572173503681*^9, 3.7595721928379517`*^9}, {3.7595728388103776`*^9, 
   3.759572845929247*^9}, {3.759572958245922*^9, 3.7595729626714635`*^9}, {
   3.7595730121392293`*^9, 3.759573014597387*^9}, {3.759573242620003*^9, 
   3.7595733042862225`*^9}, {3.7595734167748795`*^9, 3.759573420154067*^9}, {
   3.75957355984986*^9, 3.7595735636779556`*^9}, {3.7595737380250607`*^9, 
   3.759573752742165*^9}, {3.7595743797154727`*^9, 3.759574401375067*^9}, {
   3.7595786159869127`*^9, 3.7595787053997164`*^9}, {3.759646598218996*^9, 
   3.7596465987503424`*^9}, {3.7596466664555693`*^9, 
   3.7596471792967415`*^9}, {3.759647220541045*^9, 3.7596472536403656`*^9}, {
   3.7596472842082047`*^9, 3.759647348385938*^9}, {3.7596473865913286`*^9, 
   3.7596474392107377`*^9}, {3.7596474769607053`*^9, 
   3.7596475287763305`*^9}, {3.759647578870869*^9, 3.759647610939676*^9}, {
   3.759647652760577*^9, 3.7596476599497366`*^9}, {3.7596512792857513`*^9, 
   3.7596512951156125`*^9}, {3.7596548868661566`*^9, 
   3.7596549012852488`*^9}, {3.7596573238462877`*^9, 
   3.7596574000169816`*^9}, {3.759657465880747*^9, 3.7596574820651217`*^9}, {
   3.759657568350837*^9, 3.759657590059635*^9}, {3.7596577394500575`*^9, 
   3.7596578972203226`*^9}, {3.7596579338311634`*^9, 
   3.7596580747739544`*^9}, {3.7596581175682306`*^9, 
   3.7596583320566263`*^9}, {3.7596584197309556`*^9, 
   3.7596584596731415`*^9}, {3.759659893243145*^9, 3.759659893977356*^9}, {
   3.7596646404895616`*^9, 3.759664652350274*^9}, {3.7596646974765916`*^9, 
   3.759664702195536*^9}, {3.7596647377609663`*^9, 3.7596647451365385`*^9}, {
   3.759664803303281*^9, 3.759664827334961*^9}, {3.7618977482457714`*^9, 
   3.7618978344394827`*^9}, {3.7618979807965226`*^9, 
   3.7618979840163603`*^9}, {3.765793079896285*^9, 3.765793221747631*^9}, {
   3.766127038888483*^9, 3.7661270699023867`*^9}, {3.766127210745734*^9, 
   3.766127223122698*^9}, {3.766127348534645*^9, 3.766127358397708*^9}, {
   3.7661276300343175`*^9, 3.766127645661068*^9}, {3.7712252980057473`*^9, 
   3.7712253068531094`*^9}, {3.773398328240961*^9, 3.7733985869445734`*^9}, {
   3.773398851949814*^9, 3.7733988573694134`*^9}, {3.7733989061829653`*^9, 
   3.773398918371378*^9}, {3.773399124396104*^9, 3.773399427622447*^9}, {
   3.773399918847724*^9, 3.7733999696650176`*^9}, {3.773400591923649*^9, 
   3.773400614246122*^9}, {3.7734815451611814`*^9, 3.77348155639675*^9}, {
   3.7735467176487656`*^9, 3.773547061735919*^9}, {3.7735471045681477`*^9, 
   3.7735471320077047`*^9}, {3.77354716954137*^9, 3.7735471985266647`*^9}, {
   3.773547232498025*^9, 3.7735472945122538`*^9}, {3.7735473407422934`*^9, 
   3.773547352478809*^9}, {3.773548084072451*^9, 3.773548089338343*^9}, 
   3.773548230673991*^9, {3.773551083560747*^9, 3.7735511374641185`*^9}, 
   3.7735511843284426`*^9, {3.774601741638175*^9, 3.7746017486907744`*^9}, {
   3.774603826287655*^9, 3.7746038273767447`*^9}, {3.774603931177145*^9, 
   3.774603931407527*^9}, {3.7746040047696667`*^9, 3.7746040228443365`*^9}, {
   3.7746040630208607`*^9, 3.7746040908597364`*^9}, {3.7746045579896336`*^9, 
   3.774604573146962*^9}, 3.7746046171122046`*^9, {3.774605096022526*^9, 
   3.774605111067819*^9}, {3.774605388206649*^9, 3.774605473172439*^9}, {
   3.775198873142996*^9, 3.7751989144101815`*^9}, 3.7752096530218673`*^9},
 CellLabel->"In[90]:=",ExpressionUUID->"6b5e807f-3a7b-47e5-b800-7ab498baaf84"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"SortObject", "[", 
  RowBox[{"\"\<Propagator\>\"", ",", 
   RowBox[{"{", 
    RowBox[{"i", ",", "j"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"i", "\[Rule]", "cbar"}], ",", " ", 
     RowBox[{"j", "\[Rule]", " ", "c"}]}], "}"}], ",", "fields"}], 
  "]"}]], "Input",
 CellChangeTimes->{{3.77460535068366*^9, 3.77460537332913*^9}},
 CellLabel->"In[92]:=",ExpressionUUID->"88c49568-1438-465c-8549-44f7d515b17f"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"-", "1"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"c", ",", "j"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"cbar", ",", "i"}], "}"}]}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.774605360416085*^9, 3.7746053741773157`*^9}, {
   3.7746054179273357`*^9, 3.774605434698062*^9}, {3.7746054653178406`*^9, 
   3.7746054782431464`*^9}, 3.775198852307454*^9, 3.775198923181536*^9, 
   3.77519917426836*^9, 3.775199277658569*^9, 3.7752097261520047`*^9, 
   3.7752797890960627`*^9, 3.775364411853908*^9},
 CellLabel->"Out[92]=",ExpressionUUID->"48752bd9-b215-4b19-a3ad-7651fb24c337"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"SortObject", "[", 
  RowBox[{"\"\<nPoint\>\"", ",", 
   RowBox[{"{", 
    RowBox[{"i", ",", "j", ",", "l"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"i", "\[Rule]", "cbar"}], ",", " ", 
     RowBox[{"j", "\[Rule]", " ", "c"}], ",", " ", 
     RowBox[{"l", "\[Rule]", " ", "A"}]}], "}"}], ",", "fields"}], 
  "]"}]], "Input",
 CellChangeTimes->{{3.773400628584222*^9, 3.773400653506794*^9}, 
   3.77340076117903*^9, {3.7735470808635526`*^9, 3.7735470883480434`*^9}, {
   3.7735511588398294`*^9, 3.77355115925906*^9}, {3.7735512205260677`*^9, 
   3.7735512628742895`*^9}, {3.774603996354556*^9, 3.7746039970028253`*^9}},
 CellLabel->"In[93]:=",ExpressionUUID->"19494227-a302-40ad-9161-cad50a64b0c0"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1", ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"A", ",", "l"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"cbar", ",", "i"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"c", ",", "j"}], "}"}]}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.7746039602010684`*^9, 3.7746039654553833`*^9}, 
   3.7746039979454803`*^9, 3.774604575582157*^9, 3.7746046241988087`*^9, 
   3.774605112501031*^9, 3.77460534005499*^9, 3.7751989362214184`*^9, 
   3.7751991806603374`*^9, 3.775199279752578*^9, 3.775209726214528*^9, 
   3.775279789174199*^9, 3.7753644119944983`*^9},
 CellLabel->"Out[93]=",ExpressionUUID->"f3133056-cb72-49dd-9a22-06f206a9c5bf"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
   "multiply", " ", "all", " ", "the", " ", "numbers", " ", "in", " ", "the", 
    " ", "prefactor", " ", "of", " ", "a", " ", "single", " ", "diagram"}], 
   " ", "*)"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"Clear", "[", "GetSign", "]"}], " ", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"GetSign", "[", 
     RowBox[{"appliedDiagPref_", ",", "fields_"}], "]"}], " ", ":=", " ", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"newappliedDiagPref", " ", "=", " ", 
         RowBox[{"appliedDiagPref", "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], ",", "fermionicBRST", ",", 
        "testfield1", ",", " ", "testfield2", ",", " ", "positionTestfield1", 
        ",", " ", "positionTestfield2", ",", " ", "totalDiagPref"}], "}"}], 
      ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"myEcho", "[", 
        RowBox[{"\"\<GetSign\>\"", ",", "1"}], "]"}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"fermionicBRST", " ", "=", " ", 
        RowBox[{"Flatten", "@", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{
            RowBox[{"fields", "[", 
             RowBox[{"[", 
              RowBox[{"\"\<BRSTsources\>\"", ",", "#", ",", "1"}], "]"}], 
             "]"}], "&"}], "/@", 
           RowBox[{"Position", "[", 
            RowBox[{
             RowBox[{
              RowBox[{"fields", "[", 
               RowBox[{"[", "\"\<BRSTsources\>\"", "]"}], "]"}], "[", 
              RowBox[{"[", 
               RowBox[{"All", ",", "2"}], "]"}], "]"}], ",", 
             "\"\<fermionic\>\""}], "]"}]}], ")"}]}]}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"(", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"Switch", "[", 
            RowBox[{
             RowBox[{"Head", "[", 
              RowBox[{"newappliedDiagPref", "[", 
               RowBox[{"[", "#", "]"}], "]"}], "]"}], ",", 
             "\[IndentingNewLine]", "Integer", ",", "\[IndentingNewLine]", 
             "\t\t", 
             RowBox[{
              RowBox[{"myEcho", "[", 
               RowBox[{"\"\<Integer\>\"", ",", "4"}], "]"}], ";", 
              "\[IndentingNewLine]", "\t\t ", "Nothing"}], ",", 
             "\[IndentingNewLine]", "Rational", ",", "\[IndentingNewLine]", 
             "\t\t", 
             RowBox[{
              RowBox[{"myEcho", "[", 
               RowBox[{"\"\<Rational\>\"", ",", "4"}], "]"}], ";", 
              "\[IndentingNewLine]", "\t\t ", "Nothing"}], ",", 
             "\[IndentingNewLine]", "List", ",", "\[IndentingNewLine]", 
             "\t\t", 
             RowBox[{
              RowBox[{"myEcho", "[", 
               RowBox[{"\"\<Metric factor\>\"", ",", "4"}], "]"}], ";", 
              "\[IndentingNewLine]", "\t\t", 
              RowBox[{"testfield1", " ", "=", "  ", 
               RowBox[{"newappliedDiagPref", "[", 
                RowBox[{"[", 
                 RowBox[{"#", ",", "1"}], "]"}], "]"}]}], ";", 
              "\[IndentingNewLine]", "\t\t", 
              RowBox[{"testfield2", " ", "=", "  ", 
               RowBox[{"newappliedDiagPref", "[", 
                RowBox[{"[", 
                 RowBox[{"#", ",", "2"}], "]"}], "]"}]}], ";", 
              "\[IndentingNewLine]", "\t\t", "\[IndentingNewLine]", "\t\t", 
              "\[IndentingNewLine]", "\t\t", 
              RowBox[{"If", "[", 
               RowBox[{
                RowBox[{"(", 
                 RowBox[{
                  RowBox[{"MemberQ", "[", 
                   RowBox[{
                    RowBox[{"Join", "[", 
                    RowBox[{"fermionicBRST", ",", 
                    RowBox[{"Map", "[", 
                    RowBox[{"Head", ",", 
                    RowBox[{"Flatten", "[", 
                    RowBox[{
                    RowBox[{"fields", "[", 
                    RowBox[{"[", "\"\<fermionic\>\"", "]"}], "]"}], ",", 
                    "1"}], "]"}]}], "]"}]}], "]"}], ",", "testfield1"}], 
                   "]"}], "&&", 
                  RowBox[{"MemberQ", "[", 
                   RowBox[{
                    RowBox[{"Join", "[", 
                    RowBox[{"fermionicBRST", ",", 
                    RowBox[{"Map", "[", 
                    RowBox[{"Head", ",", 
                    RowBox[{"Flatten", "[", 
                    RowBox[{
                    RowBox[{"fields", "[", 
                    RowBox[{"[", "\"\<fermionic\>\"", "]"}], "]"}], ",", 
                    "1"}], "]"}]}], "]"}]}], "]"}], ",", "testfield2"}], 
                   "]"}]}], ")"}], ",", "\[IndentingNewLine]", "\t\t\t", 
                RowBox[{
                 RowBox[{"myEcho", "[", 
                  RowBox[{"\"\<both fermions\>\"", ",", "4"}], "]"}], ";", 
                 "\[IndentingNewLine]", "\t\t\t", 
                 RowBox[{
                  RowBox[{"newappliedDiagPref", "[", 
                   RowBox[{"[", "#", "]"}], "]"}], " ", "=", " ", 
                  RowBox[{"-", "1"}]}], ";"}], "\[IndentingNewLine]", 
                "\t\t\t", ",", "\[IndentingNewLine]", "\t\t\t", 
                RowBox[{
                 RowBox[{"myEcho", "[", 
                  RowBox[{"\"\<one or no fermion\>\"", ",", "4"}], "]"}], ";",
                  "\[IndentingNewLine]", "\t\t\t", 
                 RowBox[{
                  RowBox[{"newappliedDiagPref", "[", 
                   RowBox[{"[", "#", "]"}], "]"}], " ", "=", " ", "1"}], 
                 ";"}]}], "\[IndentingNewLine]", "\t\t", "]"}], ";"}]}], 
            "\[IndentingNewLine]", "]"}], ";"}], "\[IndentingNewLine]", ")"}],
          "&"}], "/@", 
        RowBox[{"Table", "[", 
         RowBox[{"i", ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "1", ",", 
            RowBox[{"Length", "@", "newappliedDiagPref"}]}], "}"}]}], "]"}]}],
        ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"totalDiagPref", " ", "=", " ", 
        RowBox[{"Apply", "[", 
         RowBox[{"Times", ",", "newappliedDiagPref"}], "]"}]}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"Return", "[", 
        RowBox[{"{", "totalDiagPref", "}"}], "]"}], ";"}]}], 
     "\[IndentingNewLine]", "]"}]}]}]}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.757928164181446*^9, 3.7579282668172026`*^9}, {
   3.757928345718856*^9, 3.757928410070036*^9}, {3.7579284497504416`*^9, 
   3.7579284519714575`*^9}, {3.7579305594991083`*^9, 3.757930696957777*^9}, {
   3.7579307426884065`*^9, 3.7579307585346107`*^9}, {3.7579308384081492`*^9, 
   3.7579309004220715`*^9}, {3.757930936458558*^9, 3.757931219488427*^9}, {
   3.7579313259030695`*^9, 3.7579313555608697`*^9}, 3.757931442333407*^9, {
   3.7579315784683695`*^9, 3.757931588059868*^9}, {3.757931900777718*^9, 
   3.757931916178588*^9}, {3.7579319684588866`*^9, 3.7579320386394067`*^9}, {
   3.757932098720648*^9, 3.7579321464505587`*^9}, {3.7580158624125338`*^9, 
   3.7580158693140793`*^9}, {3.7580162178492327`*^9, 
   3.7580162355008535`*^9}, {3.7584397004721904`*^9, 3.758439701540366*^9}, {
   3.758874504111397*^9, 3.75887451966426*^9}, {3.758874730659176*^9, 
   3.758874827639474*^9}, {3.7588748813642063`*^9, 3.7588749244214*^9}, {
   3.7588757452622943`*^9, 3.7588757878527718`*^9}, {3.7588758232510777`*^9, 
   3.758875838781451*^9}, 3.7588810967175503`*^9, {3.7588811668649855`*^9, 
   3.758881191816064*^9}, {3.75888186506286*^9, 3.758881881558365*^9}, 
   3.7589591215984106`*^9, {3.7589680767615013`*^9, 3.758968240950734*^9}, {
   3.7589682798529196`*^9, 3.7589682920991497`*^9}, {3.7589683780031013`*^9, 
   3.758968391863698*^9}, {3.758968592685649*^9, 3.758968597536742*^9}, {
   3.7589686357662582`*^9, 3.758968644612426*^9}, {3.75896887289489*^9, 
   3.758968885105089*^9}, {3.758969010476185*^9, 3.75896901327005*^9}, {
   3.758969055118206*^9, 3.758969162894318*^9}, {3.7589692733970327`*^9, 
   3.7589694061863375`*^9}, {3.7589694886334314`*^9, 
   3.7589696719003687`*^9}, {3.75896971300392*^9, 3.7589697172922764`*^9}, {
   3.758969842645565*^9, 3.758969847845999*^9}, {3.758970267143893*^9, 
   3.7589702672718773`*^9}, {3.7589704474081593`*^9, 
   3.7589705634746437`*^9}, {3.7589705934971466`*^9, 
   3.7589705978040786`*^9}, {3.7589706766042433`*^9, 
   3.7589708199655676`*^9}, {3.7589708931028104`*^9, 3.758970913278686*^9}, {
   3.7589709835442944`*^9, 3.758971028453807*^9}, {3.7589711340792446`*^9, 
   3.758971149511724*^9}, {3.75897157528251*^9, 3.7589717017186327`*^9}, {
   3.75897178741895*^9, 3.7589717905904655`*^9}, {3.7589718625571156`*^9, 
   3.7589719003103614`*^9}, {3.7591521809039164`*^9, 
   3.7591521825565214`*^9}, {3.759226158953079*^9, 3.75922615931178*^9}, {
   3.761897227001663*^9, 3.7618972524465427`*^9}, {3.7618972891436625`*^9, 
   3.7618972914178667`*^9}, {3.76448082693433*^9, 3.7644808529058084`*^9}, {
   3.771225349652772*^9, 3.7712253593318596`*^9}, {3.7712344353335133`*^9, 
   3.7712344423700495`*^9}, {3.7735531666356497`*^9, 3.773553189954975*^9}, {
   3.773553250895048*^9, 3.7735533211405725`*^9}, {3.773553359849555*^9, 
   3.773553597825307*^9}, {3.773553671492922*^9, 3.773553787750779*^9}, {
   3.7735538361724854`*^9, 3.77355384326884*^9}, {3.7735539537247863`*^9, 
   3.7735541426904354`*^9}, {3.7735542368310275`*^9, 
   3.7735542406018195`*^9}, {3.7735543760834994`*^9, 
   3.7735543778997846`*^9}, {3.775199528575457*^9, 3.7751995355895643`*^9}, {
   3.77519971634685*^9, 3.7751997271753144`*^9}, {3.77519975803762*^9, 
   3.7751998047013206`*^9}, {3.775199848086915*^9, 3.7751998741000233`*^9}, {
   3.775200308820795*^9, 3.775200377618258*^9}, {3.775208948205572*^9, 
   3.77520897117735*^9}, {3.7752090736795683`*^9, 3.7752090742106915`*^9}, {
   3.7752096581471853`*^9, 3.775209664960184*^9}},
 CellLabel->"In[94]:=",ExpressionUUID->"9483a750-b7a8-477f-8cef-e1a31d0c58fc"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"GetSign", "[", 
  RowBox[{
   RowBox[{"(", 
    RowBox[{"\"\<Prefactor\>\"", "\[Rule]", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"-", "1"}], ",", 
       RowBox[{"-", "1"}], ",", "1", ",", "1", ",", "1", ",", "1", ",", 
       RowBox[{"{", 
        RowBox[{"cbar", ",", "cbar"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"cbar", ",", "cbar"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"A", ",", "A"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"A", ",", "c"}], "}"}]}], "}"}]}], ")"}], ",", "fields"}], 
  "]"}]], "Input",
 CellChangeTimes->{{3.7735533470599966`*^9, 3.7735533507671995`*^9}, {
  3.7752089538783045`*^9, 3.775208957894343*^9}, {3.775209067569437*^9, 
  3.775209070648052*^9}},
 CellLabel->"In[96]:=",ExpressionUUID->"2486e501-4d2c-4b8a-964c-fac0eaddc2af"],

Cell[BoxData[
 RowBox[{"{", "1", "}"}]], "Output",
 CellChangeTimes->{
  3.773553700783944*^9, {3.7735537522038794`*^9, 3.7735537774841385`*^9}, {
   3.7735541128238773`*^9, 3.7735541441465054`*^9}, 3.773554245313137*^9, 
   3.773554381816424*^9, 3.775199421307314*^9, 3.775199798534415*^9, 
   3.775199878335161*^9, 3.7752003234396935`*^9, {3.77520035788072*^9, 
   3.775200382557288*^9}, {3.775208959081911*^9, 3.7752089734904594`*^9}, 
   3.775209075744048*^9, 3.7752097263238397`*^9, 3.7752797892678957`*^9, 
   3.775364412337209*^9},
 CellLabel->"Out[96]=",ExpressionUUID->"71c2f524-570f-4137-9701-7d593198356c"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", "WHAT", " ", "*)"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"Clear", "[", "ApplyRules", "]"}], "      ", 
   RowBox[{"(*", 
    RowBox[{
    "Apply", " ", "the", " ", "possible", " ", "Index", " ", "Configs", " ", 
     "to", " ", "the", " ", "field", " ", "derivatives"}], "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"ApplyRules", "[", 
     RowBox[{
     "diagram_", ",", "onecombinedIndexConfigs_", ",", "propIndiceszero_", 
      ",", " ", "newPropIndices_", ",", " ", "positionProps_", ",", " ", 
      "regIndiceszero_", ",", "newRegIndices_", ",", " ", "positionReg_", ",",
       "vertexIndiceszero_", ",", "newVertexIndices_", ",", " ", 
      "positionVertex_", ",", "  ", "BRSTIndiceszero_", ",", " ", 
      "newBRSTIndices_", ",", " ", "positionBRST_", ",", "fields_"}], "]"}], 
    " ", ":=", " ", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"newdiagram", " ", "=", " ", "diagram"}], "}"}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"myEcho", "[", 
        RowBox[{"\"\<ApplyRules\>\"", ",", "1"}], "]"}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"myEcho", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"\"\<old diagram: \>\"", ",", " ", "diagram"}], "}"}], ",", 
         "2"}], "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", 
       RowBox[{"(*", " ", 
        RowBox[{"apply", " ", "prop", " ", "rules"}], " ", "*)"}], 
       "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "@", "positionProps"}], ">", "0"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"Length", "@", "positionProps"}], ">", "1"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{"(", "\[IndentingNewLine]", 
                RowBox[{
                 RowBox[{"newdiagram", "[", 
                  RowBox[{"[", 
                   RowBox[{
                    RowBox[{"positionProps", "[", 
                    RowBox[{"[", "#", "]"}], "]"}], ",", "\"\<indices\>\""}], 
                   "]"}], "]"}], " ", "=", " ", 
                 RowBox[{"newPropIndices", "[", 
                  RowBox[{"[", "#", "]"}], "]"}]}], "\[IndentingNewLine]", 
                "\[IndentingNewLine]", ")"}], "&"}], "/@", 
              RowBox[{"Table", "[", 
               RowBox[{"i", ",", 
                RowBox[{"{", 
                 RowBox[{"i", ",", "1", ",", 
                  RowBox[{"Length", "@", "positionProps"}]}], "}"}]}], 
               "]"}]}], ";"}], "\[IndentingNewLine]", ",", 
            "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"newdiagram", "[", 
              RowBox[{"[", 
               RowBox[{"positionProps", ",", "\"\<indices\>\""}], "]"}], 
              "]"}], " ", "=", " ", "newPropIndices"}]}], 
           "\[IndentingNewLine]", "]"}], ";"}]}], "\[IndentingNewLine]", 
        "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"(*", " ", 
        RowBox[{"apply", " ", "reg", " ", "rules"}], " ", "*)"}], 
       "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "@", "positionReg"}], ">", "0"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"Length", "@", "positionReg"}], ">", "1"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{"(", "\[IndentingNewLine]", 
                RowBox[{
                 RowBox[{"newdiagram", "[", 
                  RowBox[{"[", 
                   RowBox[{
                    RowBox[{"positionReg", "[", 
                    RowBox[{"[", "#", "]"}], "]"}], ",", "\"\<indices\>\""}], 
                   "]"}], "]"}], " ", "=", " ", 
                 RowBox[{"newRegIndices", "[", 
                  RowBox[{"[", "#", "]"}], "]"}]}], "\[IndentingNewLine]", 
                "\[IndentingNewLine]", ")"}], "&"}], "/@", 
              RowBox[{"Table", "[", 
               RowBox[{"i", ",", 
                RowBox[{"{", 
                 RowBox[{"i", ",", "1", ",", 
                  RowBox[{"Length", "@", "positionReg"}]}], "}"}]}], "]"}]}], 
             ";"}], "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"newdiagram", "[", 
              RowBox[{"[", 
               RowBox[{"positionReg", ",", "\"\<indices\>\""}], "]"}], "]"}], 
             " ", "=", " ", "newRegIndices"}]}], "\[IndentingNewLine]", "]"}],
           ";"}]}], "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", 
       RowBox[{"(*", " ", 
        RowBox[{"apply", " ", "vertex", " ", "rules"}], " ", "*)"}], 
       "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "@", "positionVertex"}], ">", "0"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"Length", "@", "positionVertex"}], ">", "1"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{"(", "\[IndentingNewLine]", 
                RowBox[{
                 RowBox[{"newdiagram", "[", 
                  RowBox[{"[", 
                   RowBox[{
                    RowBox[{"positionVertex", "[", 
                    RowBox[{"[", "#", "]"}], "]"}], ",", "\"\<indices\>\""}], 
                   "]"}], "]"}], " ", "=", " ", 
                 RowBox[{"newVertexIndices", "[", 
                  RowBox[{"[", "#", "]"}], "]"}]}], "\[IndentingNewLine]", 
                "\[IndentingNewLine]", ")"}], "&"}], "/@", 
              RowBox[{"Table", "[", 
               RowBox[{"i", ",", 
                RowBox[{"{", 
                 RowBox[{"i", ",", "1", ",", 
                  RowBox[{"Length", "@", "positionVertex"}]}], "}"}]}], 
               "]"}]}], ";"}], "\[IndentingNewLine]", ",", 
            "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"newdiagram", "[", 
              RowBox[{"[", 
               RowBox[{"positionVertex", ",", "\"\<indices\>\""}], "]"}], 
              "]"}], " ", "=", " ", "newVertexIndices"}]}], 
           "\[IndentingNewLine]", "]"}], ";"}]}], "\[IndentingNewLine]", 
        "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"(*", " ", 
        RowBox[{"apply", " ", "BRST", " ", "rules"}], " ", "*)"}], 
       "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "@", "positionBRST"}], ">", "0"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"Length", "@", "positionBRST"}], ">", "1"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{"(", "\[IndentingNewLine]", 
                RowBox[{
                 RowBox[{"newdiagram", "[", 
                  RowBox[{"[", 
                   RowBox[{
                    RowBox[{"positionBRST", "[", 
                    RowBox[{"[", "#", "]"}], "]"}], ",", "\"\<indices\>\""}], 
                   "]"}], "]"}], " ", "=", " ", 
                 RowBox[{"newBRSTIndices", "[", 
                  RowBox[{"[", "#", "]"}], "]"}]}], "\[IndentingNewLine]", 
                "\[IndentingNewLine]", ")"}], "&"}], "/@", 
              RowBox[{"Table", "[", 
               RowBox[{"i", ",", 
                RowBox[{"{", 
                 RowBox[{"i", ",", "1", ",", 
                  RowBox[{"Length", "@", "positionBRST"}]}], "}"}]}], "]"}]}],
              ";"}], "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"newdiagram", "[", 
              RowBox[{"[", 
               RowBox[{"positionBRST", ",", "\"\<indices\>\""}], "]"}], "]"}],
              " ", "=", " ", "newBRSTIndices"}]}], "\[IndentingNewLine]", 
           "]"}], ";"}]}], "\[IndentingNewLine]", "]"}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"Return", "[", "newdiagram", "]"}], ";"}]}], 
     "\[IndentingNewLine]", "]"}]}]}]}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.7579279895347185`*^9, 3.7579280405747538`*^9}, {
   3.7579281253985543`*^9, 3.757928139340832*^9}, {3.757932476233992*^9, 
   3.7579325627014437`*^9}, {3.75801984691168*^9, 3.758020057469686*^9}, {
   3.7580202287382174`*^9, 3.758020234696664*^9}, {3.7580202909975452`*^9, 
   3.758020305817202*^9}, {3.758020337048902*^9, 3.758020351635063*^9}, {
   3.7580205377508183`*^9, 3.7580205440351815`*^9}, {3.7580206030672855`*^9, 
   3.758020619948664*^9}, {3.7580207859617023`*^9, 3.7580207885402136`*^9}, {
   3.7580895481091785`*^9, 3.758089573913785*^9}, {3.7580897322682934`*^9, 
   3.758089744017041*^9}, {3.758089822252904*^9, 3.7580898395968485`*^9}, {
   3.7580899454108157`*^9, 3.758089966681225*^9}, {3.758090029728414*^9, 
   3.758090058338979*^9}, {3.7580920449644656`*^9, 3.7580920554072733`*^9}, {
   3.7585459094071836`*^9, 3.7585460304183407`*^9}, {3.758873855233117*^9, 
   3.758873863373866*^9}, {3.7588740311915627`*^9, 3.7588740693145876`*^9}, {
   3.758874182019596*^9, 3.758874182124422*^9}, {3.7588742341096473`*^9, 
   3.758874254708574*^9}, {3.75887431460987*^9, 3.75887434222781*^9}, {
   3.7588744777534075`*^9, 3.758874479824196*^9}, 3.7588746652296753`*^9, 
   3.7588747127836328`*^9, {3.7588808854986486`*^9, 3.758880885592806*^9}, 
   3.7588809345094223`*^9, {3.7588812393461704`*^9, 3.7588812996345415`*^9}, {
   3.758881330064249*^9, 3.758881333000976*^9}, {3.7588813715818396`*^9, 
   3.7588814745635643`*^9}, {3.758881524655511*^9, 3.758881531912136*^9}, {
   3.758881580249858*^9, 3.758881586696391*^9}, {3.758881627944414*^9, 
   3.758881656733126*^9}, {3.7588816915476074`*^9, 3.7588816972424693`*^9}, {
   3.758884104851108*^9, 3.758884142762003*^9}, {3.758885618021134*^9, 
   3.7588856211693196`*^9}, {3.7588856701627307`*^9, 
   3.7588856757752247`*^9}, {3.758885719863949*^9, 3.7588857339618216`*^9}, 
   3.758885798342498*^9, {3.758885865798964*^9, 3.758885908689477*^9}, {
   3.758885957503538*^9, 3.7588859731002684`*^9}, {3.7588860678009605`*^9, 
   3.758886071437583*^9}, {3.75889098521204*^9, 3.7588910208681664`*^9}, {
   3.758891308900888*^9, 3.758891353499667*^9}, {3.758891414247168*^9, 
   3.7588915740110507`*^9}, {3.758891657778453*^9, 3.758891667481648*^9}, {
   3.7588917571556373`*^9, 3.7588917684240885`*^9}, {3.7588918428964024`*^9, 
   3.7588918606452703`*^9}, {3.758891900676673*^9, 3.7588919165776153`*^9}, {
   3.7588920321082397`*^9, 3.758892061447403*^9}, {3.7588921404817*^9, 
   3.758892145493947*^9}, {3.7588922124627047`*^9, 3.7588923355907383`*^9}, {
   3.7588923873664627`*^9, 3.7588923906239324`*^9}, {3.758957954751317*^9, 
   3.758957970173007*^9}, {3.758958069197933*^9, 3.758958071344841*^9}, {
   3.7589581409221463`*^9, 3.7589581429912243`*^9}, {3.7589583984104853`*^9, 
   3.7589584038290253`*^9}, {3.7589587222989793`*^9, 3.7589587383989906`*^9}, 
   3.758959027914274*^9, {3.7589598611771555`*^9, 3.7589598665325055`*^9}, {
   3.758959939988909*^9, 3.758959967933625*^9}, {3.7589608868712125`*^9, 
   3.7589608879939384`*^9}, {3.7589610213799286`*^9, 3.758961041728417*^9}, {
   3.758961193241026*^9, 3.758961204629561*^9}, {3.7589612639359703`*^9, 
   3.758961284554008*^9}, {3.7589613712810793`*^9, 3.758961373723385*^9}, {
   3.758961448370566*^9, 3.7589614753050227`*^9}, {3.7589674551216707`*^9, 
   3.7589674626119547`*^9}, {3.7589719776597767`*^9, 
   3.7589719782814264`*^9}, {3.7589722335967894`*^9, 
   3.7589722353273444`*^9}, {3.758972314359612*^9, 3.7589723247437305`*^9}, {
   3.7589724185659313`*^9, 3.7589724219568934`*^9}, {3.7589724523652515`*^9, 
   3.7589726349538345`*^9}, 3.7589726726759176`*^9, 3.7589727034646463`*^9, {
   3.7589727446441045`*^9, 3.7589727729571185`*^9}, {3.758972855191674*^9, 
   3.758972862146893*^9}, {3.758972915562461*^9, 3.758972920519849*^9}, {
   3.758972970835034*^9, 3.7589729714319353`*^9}, {3.759039781361467*^9, 
   3.759039807357487*^9}, {3.759040106496696*^9, 3.7590401157220745`*^9}, {
   3.7590401525133066`*^9, 3.759040175546139*^9}, {3.7590402325800724`*^9, 
   3.7590402497226877`*^9}, {3.759040344100638*^9, 3.759040360749262*^9}, {
   3.759040414611715*^9, 3.75904041698827*^9}, {3.7590404826432257`*^9, 
   3.759040576491887*^9}, {3.7591513825011377`*^9, 3.7591513851685905`*^9}, {
   3.759151421129436*^9, 3.7591515085381107`*^9}, {3.7591515785302215`*^9, 
   3.759151588203179*^9}, {3.7591516492494836`*^9, 3.759151670152093*^9}, {
   3.7592187808314176`*^9, 3.7592188371437883`*^9}, 3.75921890981572*^9, {
   3.7592260531551094`*^9, 3.7592260611086884`*^9}, {3.759569268310955*^9, 
   3.759569281724896*^9}, {3.7595693365450263`*^9, 3.759569358377407*^9}, {
   3.7595743525668564`*^9, 3.7595743555775666`*^9}, {3.759576590158899*^9, 
   3.7595765957093554`*^9}, {3.759576708980357*^9, 3.7595767783660955`*^9}, {
   3.7595768100426245`*^9, 3.7595768397713513`*^9}, {3.75957689118469*^9, 
   3.759576896815151*^9}, {3.7595769563240356`*^9, 3.759577011468987*^9}, {
   3.7595770865000734`*^9, 3.7595771136188793`*^9}, {3.7595771454137945`*^9, 
   3.7595772499166245`*^9}, {3.7595773119494524`*^9, 
   3.7595773545800304`*^9}, {3.75957740917842*^9, 3.759577446545904*^9}, 
   3.7595775663493185`*^9, {3.7596584790211964`*^9, 3.759658490258806*^9}, {
   3.7596592093194833`*^9, 3.7596592605947113`*^9}, {3.759659326128415*^9, 
   3.7596593393638134`*^9}, {3.7596593733498516`*^9, 
   3.7596593740684786`*^9}, {3.75965949132353*^9, 3.759659503203157*^9}, {
   3.7596595891627984`*^9, 3.7596596735577984`*^9}, {3.759659708747628*^9, 
   3.75965972008154*^9}, {3.7596597855357227`*^9, 3.7596597908328743`*^9}, {
   3.759659905853829*^9, 3.7596599182993236`*^9}, {3.7651826566489334`*^9, 
   3.765182793254945*^9}, {3.7651828329672427`*^9, 3.7651828467341604`*^9}, 
   3.7651829370544643`*^9, {3.765182972997958*^9, 3.765182981600356*^9}, {
   3.765183020728216*^9, 3.76518313289455*^9}, {3.7651832196923685`*^9, 
   3.765183224224612*^9}, {3.7651832663600683`*^9, 3.765183276446523*^9}, {
   3.765533340836582*^9, 3.7655333973307095`*^9}, {3.7656100944281664`*^9, 
   3.7656101258146777`*^9}, {3.765610159281206*^9, 3.7656101740198636`*^9}, {
   3.7656102280551615`*^9, 3.765610256129303*^9}, {3.7656103060916*^9, 
   3.7656103186071396`*^9}, {3.765610360348165*^9, 3.765610369985345*^9}, {
   3.765610438783991*^9, 3.765610446069513*^9}, {3.7657916130212855`*^9, 
   3.7657916282134047`*^9}, {3.7657916623318796`*^9, 3.765791694911871*^9}, {
   3.765793312486684*^9, 3.7657933336924086`*^9}, {3.7657934332556186`*^9, 
   3.7657934491361804`*^9}, {3.7657946233478947`*^9, 3.765794633396196*^9}, {
   3.7661277949327655`*^9, 3.766127837001932*^9}, {3.7661278822365932`*^9, 
   3.7661278883931694`*^9}, {3.7712253382296467`*^9, 
   3.7712253429333844`*^9}, {3.771234669931916*^9, 3.7712346707913933`*^9}, {
   3.7735520150319176`*^9, 3.7735523757113113`*^9}, {3.775199334253986*^9, 
   3.775199340630436*^9}, {3.7751993871035986`*^9, 3.775199406883258*^9}, 
   3.7752082767104445`*^9},
 CellLabel->"In[97]:=",ExpressionUUID->"40930656-c71e-4f51-be22-434bcc7ff1ad"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"Clear", "[", "SortOneDiag", "]"}], " ", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
     RowBox[{
     "Sorts", " ", "indices", " ", "such", " ", "that", " ", "they", " ", 
      "match", " ", "the", " ", "sorted", " ", 
      RowBox[{"vertices", "/", "props"}]}], "..."}], "."}], 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SortOneDiag", "[", 
   RowBox[{
   "diagram_", ",", "onecombinedIndexConfigs_", ",", "propIndiceszero_", ",", 
    " ", "positionProps_", ",", "regIndiceszero_", ",", " ", "positionReg_", 
    ",", " ", "vertexIndiceszero_", ",", " ", "positionVertex_", ",", " ", 
    "BRSTIndiceszero_", ",", " ", "positionBRST_", ",", " ", "fields_"}], 
   "]"}], " ", ":=", " ", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"signProps", " ", "=", " ", "1"}], ",", " ", 
      RowBox[{"signRegs", " ", "=", " ", "1"}], ",", " ", 
      RowBox[{"signVertices", "=", " ", "1"}], ",", " ", 
      RowBox[{"signBRST", " ", "=", " ", "1"}], ",", " ", "dummysign", ",", 
      " ", "totalsign", ",", " ", 
      RowBox[{"newPropIndices", " ", "=", " ", "propIndiceszero"}], ",", " ", 
      RowBox[{"newRegIndices", " ", "=", " ", "regIndiceszero"}], ",", " ", 
      RowBox[{"newVertexIndices", " ", "=", " ", "vertexIndiceszero"}], ",", 
      " ", 
      RowBox[{"newBRSTIndices", " ", "=", " ", "BRSTIndiceszero"}], ",", " ", 
      RowBox[{"sortedDiagram", " ", "=", " ", "diagram"}]}], "}"}], ",", 
    "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"myEcho", "[", 
      RowBox[{"\"\<SortOneDiag\>\"", ",", "1"}], "]"}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{"sort", " ", "multiple", " ", "vertices"}], " ", "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"Length", "@", "vertexIndiceszero"}], ">", "0"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"myEcho", "[", 
         RowBox[{"\"\<sort vertices\>\"", ",", "3"}], "]"}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Length", "@", 
            RowBox[{"vertexIndiceszero", "[", 
             RowBox[{"[", "1", "]"}], "]"}]}], ">", "1"}], ",", 
          "\[IndentingNewLine]", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"myEcho", "[", 
            RowBox[{"\"\<sort multiple vertices in diagram\>\"", ",", "4"}], 
            "]"}], ";", "\[IndentingNewLine]", 
           RowBox[{"signVertices", " ", "=", " ", "1"}], ";", 
           "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{
             RowBox[{"(", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{
                RowBox[{"{", 
                 RowBox[{"dummysign", ",", 
                  RowBox[{"newVertexIndices", "[", 
                   RowBox[{"[", "#", "]"}], "]"}]}], "}"}], " ", "=", " ", 
                RowBox[{"SortObject", "[", 
                 RowBox[{"\"\<nPoint\>\"", ",", 
                  RowBox[{"vertexIndiceszero", "[", 
                   RowBox[{"[", "#", "]"}], "]"}], ",", " ", 
                  "onecombinedIndexConfigs", ",", " ", "fields"}], "]"}]}], 
               ";", "\[IndentingNewLine]", 
               RowBox[{"signVertices", " ", "=", " ", 
                RowBox[{"signVertices", "*", "dummysign"}]}], ";"}], 
              "\[IndentingNewLine]", "\[IndentingNewLine]", ")"}], "&"}], "/@", 
            RowBox[{"Table", "[", 
             RowBox[{"i", ",", 
              RowBox[{"{", 
               RowBox[{"i", ",", "1", ",", 
                RowBox[{"Length", "@", "vertexIndiceszero"}]}], "}"}]}], 
             "]"}]}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
          ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"myEcho", "[", 
            RowBox[{"\"\<sort single vertex in diagram\>\"", ",", "4"}], 
            "]"}], ";", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"signVertices", ",", "newVertexIndices"}], "}"}], " ", 
            "=", " ", 
            RowBox[{"SortObject", "[", 
             RowBox[{
             "\"\<nPoint\>\"", ",", "vertexIndiceszero", ",", 
              "onecombinedIndexConfigs", ",", " ", "fields"}], "]"}]}], 
           ";"}]}], "\[IndentingNewLine]", "\[IndentingNewLine]", "]"}], 
        ";"}], "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"myEcho", "[", 
         RowBox[{"\"\<no vertices to sort\>\"", ",", "3"}], "]"}], ";", 
        "\[IndentingNewLine]", "Nothing"}]}], "\[IndentingNewLine]", "]"}], 
     ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"myEcho", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
        "\"\<new vertices: \>\"", ",", " ", "signVertices", ",", 
         "newVertexIndices"}], "}"}], ",", "3"}], "]"}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{"sort", " ", "multiple", " ", "regs"}], " ", "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"Length", "@", "regIndiceszero"}], ">", "0"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"myEcho", "[", 
         RowBox[{"\"\<sort vertices\>\"", ",", "3"}], "]"}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Length", "@", 
            RowBox[{"regIndiceszero", "[", 
             RowBox[{"[", "1", "]"}], "]"}]}], ">", "1"}], ",", 
          "\[IndentingNewLine]", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"myEcho", "[", 
            RowBox[{"\"\<sort multiple regs in diagram\>\"", ",", "4"}], 
            "]"}], ";", "\[IndentingNewLine]", 
           RowBox[{"signRegs", " ", "=", " ", "1"}], ";", 
           "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{
             RowBox[{"(", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{
                RowBox[{"{", 
                 RowBox[{"dummysign", ",", 
                  RowBox[{"newRegIndices", "[", 
                   RowBox[{"[", "#", "]"}], "]"}]}], "}"}], " ", "=", " ", 
                RowBox[{"SortObject", "[", 
                 RowBox[{"\"\<nPoint\>\"", ",", 
                  RowBox[{"regIndiceszero", "[", 
                   RowBox[{"[", "#", "]"}], "]"}], ",", 
                  "onecombinedIndexConfigs", ",", " ", "fields"}], "]"}]}], 
               ";", "\[IndentingNewLine]", 
               RowBox[{"signRegs", " ", "=", " ", 
                RowBox[{"signRegs", "*", "dummysign"}]}], ";"}], 
              "\[IndentingNewLine]", "\[IndentingNewLine]", ")"}], "&"}], "/@", 
            RowBox[{"Table", "[", 
             RowBox[{"i", ",", 
              RowBox[{"{", 
               RowBox[{"i", ",", "1", ",", 
                RowBox[{"Length", "@", "regIndiceszero"}]}], "}"}]}], "]"}]}],
            ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", ",", 
          "\[IndentingNewLine]", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"myEcho", "[", 
            RowBox[{"\"\<sort single reg in diagram\>\"", ",", "4"}], "]"}], 
           ";", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"signRegs", ",", "newRegIndices"}], "}"}], " ", "=", " ", 
            RowBox[{"SortObject", "[", 
             RowBox[{
             "\"\<nPoint\>\"", ",", "regIndiceszero", ",", 
              "onecombinedIndexConfigs", ",", " ", "fields"}], "]"}]}], 
           ";"}]}], "\[IndentingNewLine]", "\[IndentingNewLine]", "]"}], 
        ";"}], "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"myEcho", "[", 
         RowBox[{"\"\<no regs to sort\>\"", ",", "3"}], "]"}], ";", 
        "\[IndentingNewLine]", "Nothing"}]}], "\[IndentingNewLine]", "]"}], 
     ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"myEcho", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
        "\"\<new regs: \>\"", ",", " ", "signRegs", ",", "newRegIndices"}], 
        "}"}], ",", "3"}], "]"}], ";", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{"sort", " ", "multiple", " ", "BRSTs"}], " ", "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"Length", "@", "BRSTIndiceszero"}], ">", "0"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"myEcho", "[", 
         RowBox[{"\"\<sort vertices\>\"", ",", "3"}], "]"}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Length", "@", 
            RowBox[{"BRSTIndiceszero", "[", 
             RowBox[{"[", "1", "]"}], "]"}]}], ">", "1"}], ",", 
          "\[IndentingNewLine]", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"myEcho", "[", 
            RowBox[{"\"\<sort multiple BRSTs in diagram\>\"", ",", "4"}], 
            "]"}], ";", "\[IndentingNewLine]", 
           RowBox[{"signBRST", " ", "=", " ", "1"}], ";", 
           "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{
             RowBox[{"(", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{
                RowBox[{"{", 
                 RowBox[{"dummysign", ",", 
                  RowBox[{"newBRSTIndices", "[", 
                   RowBox[{"[", "#", "]"}], "]"}]}], "}"}], " ", "=", " ", 
                RowBox[{"SortObject", "[", 
                 RowBox[{"\"\<nPoint\>\"", ",", 
                  RowBox[{"BRSTIndiceszero", "[", 
                   RowBox[{"[", "#", "]"}], "]"}], ",", 
                  "onecombinedIndexConfigs", ",", " ", "fields"}], "]"}]}], 
               ";", "\[IndentingNewLine]", 
               RowBox[{"signBRST", " ", "=", " ", 
                RowBox[{"signBRST", "*", "dummysign"}]}], ";"}], 
              "\[IndentingNewLine]", "\[IndentingNewLine]", ")"}], "&"}], "/@", 
            RowBox[{"Table", "[", 
             RowBox[{"i", ",", 
              RowBox[{"{", 
               RowBox[{"i", ",", "1", ",", 
                RowBox[{"Length", "@", "BRSTIndiceszero"}]}], "}"}]}], 
             "]"}]}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
          ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"myEcho", "[", 
            RowBox[{"\"\<sort single prop in diagram\>\"", ",", "4"}], "]"}], 
           ";", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"signBRST", ",", "newBRSTIndices"}], "}"}], " ", "=", 
            " ", 
            RowBox[{"SortObject", "[", 
             RowBox[{
             "\"\<nPoint\>\"", ",", "BRSTIndiceszero", ",", 
              "onecombinedIndexConfigs", ",", " ", "fields"}], "]"}]}], 
           ";"}]}], "\[IndentingNewLine]", "\[IndentingNewLine]", "]"}], 
        ";"}], "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"myEcho", "[", 
         RowBox[{"\"\<no BRSTs to sort\>\"", ",", "3"}], "]"}], ";", 
        "\[IndentingNewLine]", "Nothing"}]}], "\[IndentingNewLine]", "]"}], 
     ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"myEcho", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
        "\"\<new BRSTs: \>\"", ",", " ", "signBRST", ",", " ", 
         "newBRSTIndices"}], "}"}], ",", "3"}], "]"}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{"sort", " ", "multiple", " ", "props"}], " ", "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"Length", "@", "propIndiceszero"}], ">", "0"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"myEcho", "[", 
         RowBox[{"\"\<sort vertices\>\"", ",", "3"}], "]"}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Length", "@", 
            RowBox[{"propIndiceszero", "[", 
             RowBox[{"[", "1", "]"}], "]"}]}], ">", "1"}], ",", 
          "\[IndentingNewLine]", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"myEcho", "[", 
            RowBox[{"\"\<sort multiple props in diagram\>\"", ",", "4"}], 
            "]"}], ";", "\[IndentingNewLine]", 
           RowBox[{"signProps", " ", "=", " ", "1"}], ";", 
           "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{
             RowBox[{"(", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{
                RowBox[{"{", 
                 RowBox[{"dummysign", ",", 
                  RowBox[{"newPropIndices", "[", 
                   RowBox[{"[", "#", "]"}], "]"}]}], "}"}], " ", "=", " ", 
                RowBox[{"SortObject", "[", 
                 RowBox[{"\"\<Propagator\>\"", ",", 
                  RowBox[{"propIndiceszero", "[", 
                   RowBox[{"[", "#", "]"}], "]"}], ",", 
                  "onecombinedIndexConfigs", ",", " ", "fields"}], "]"}]}], 
               ";", "\[IndentingNewLine]", 
               RowBox[{"signProps", " ", "=", " ", 
                RowBox[{"signProps", "*", "dummysign"}]}], ";"}], 
              "\[IndentingNewLine]", "\[IndentingNewLine]", ")"}], "&"}], "/@", 
            RowBox[{"Table", "[", 
             RowBox[{"i", ",", 
              RowBox[{"{", 
               RowBox[{"i", ",", "1", ",", 
                RowBox[{"Length", "@", "propIndiceszero"}]}], "}"}]}], 
             "]"}]}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
          ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"myEcho", "[", 
            RowBox[{"\"\<sort single prop in diagram\>\"", ",", "4"}], "]"}], 
           ";", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"signProps", ",", "newPropIndices"}], "}"}], " ", "=", 
            " ", 
            RowBox[{"SortObject", "[", 
             RowBox[{
             "\"\<Propagator\>\"", ",", "propIndiceszero", ",", 
              "onecombinedIndexConfigs", ",", " ", "fields"}], "]"}]}], 
           ";"}]}], "\[IndentingNewLine]", "\[IndentingNewLine]", "]"}], 
        ";"}], "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"myEcho", "[", 
         RowBox[{"\"\<no props to sort\>\"", ",", "3"}], "]"}], ";", 
        "\[IndentingNewLine]", "Nothing"}]}], "\[IndentingNewLine]", "]"}], 
     ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"myEcho", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
        "\"\<new props: \>\"", ",", " ", "signProps", ",", " ", 
         "newPropIndices"}], "}"}], ",", "3"}], "]"}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"totalsign", " ", "=", " ", 
      RowBox[{
      "signVertices", "*", "signProps", "*", "signRegs", "*", "signBRST"}]}], 
     ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"myEcho", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"\"\<total sign: \>\"", ",", " ", "totalsign"}], "}"}], ",", 
       "2"}], "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"sortedDiagram", "[", 
       RowBox[{"[", 
        RowBox[{"1", ",", "2"}], "]"}], "]"}], " ", "=", " ", 
      RowBox[{"Sort", "[", 
       RowBox[{"Join", "[", 
        RowBox[{
         RowBox[{"diagram", "[", 
          RowBox[{"[", 
           RowBox[{"1", ",", "2"}], "]"}], "]"}], ",", 
         RowBox[{"{", "totalsign", "}"}]}], "]"}], "]"}]}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"sortedDiagram", " ", "=", " ", 
      RowBox[{"ApplyRules", "[", 
       RowBox[{
       "sortedDiagram", ",", "onecombinedIndexConfigs", ",", 
        "propIndiceszero", ",", " ", "newPropIndices", ",", " ", 
        "positionProps", ",", " ", "regIndiceszero", ",", "newRegIndices", 
        ",", " ", "positionReg", ",", "vertexIndiceszero", ",", 
        "newVertexIndices", ",", " ", "positionVertex", ",", "  ", 
        "BRSTIndiceszero", ",", " ", "newBRSTIndices", ",", " ", 
        "positionBRST", ",", "fields"}], "]"}]}], ";", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"Return", "[", "sortedDiagram", "]"}], ";"}]}], 
   "\[IndentingNewLine]", "]"}], " "}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.7580059091427436`*^9, 3.758005943622452*^9}, {
   3.7580060110165577`*^9, 3.758006022131509*^9}, {3.758006083282144*^9, 
   3.75800608754673*^9}, {3.7580062046954317`*^9, 3.7580062060055866`*^9}, {
   3.758006240775317*^9, 3.7580062651435843`*^9}, {3.7580064268301916`*^9, 
   3.7580065420960007`*^9}, {3.7580066082034416`*^9, 3.758006675442548*^9}, {
   3.7580067322156963`*^9, 3.758006816192916*^9}, {3.758006923202875*^9, 
   3.758006977456459*^9}, {3.75800701624586*^9, 3.7580070217865896`*^9}, {
   3.7580070610467567`*^9, 3.7580071115301275`*^9}, {3.758007239601614*^9, 
   3.758007267649871*^9}, {3.7580073265950894`*^9, 3.7580073383452916`*^9}, {
   3.7580074541765475`*^9, 3.7580074559186745`*^9}, {3.758007532432228*^9, 
   3.7580075509351053`*^9}, {3.758007594283926*^9, 3.7580076271253486`*^9}, {
   3.7580078265680623`*^9, 3.758007836975834*^9}, {3.758007882321764*^9, 
   3.7580079276786346`*^9}, {3.7580080412016172`*^9, 
   3.7580080768041525`*^9}, {3.7580081570392895`*^9, 
   3.7580082363374968`*^9}, {3.7580082762720575`*^9, 
   3.7580083724527383`*^9}, {3.7580084061677103`*^9, 3.758008430742066*^9}, {
   3.7580084930437555`*^9, 3.758008506650202*^9}, {3.7580086312612967`*^9, 
   3.758008696773825*^9}, {3.7580087369886994`*^9, 3.7580087762149153`*^9}, {
   3.758009003741465*^9, 3.7580090204642067`*^9}, {3.758014664220793*^9, 
   3.7580147866072187`*^9}, {3.758015134347046*^9, 3.758015198174034*^9}, {
   3.7580152597857857`*^9, 3.758015320757729*^9}, {3.758016294492928*^9, 
   3.7580164829784036`*^9}, {3.7580165146625166`*^9, 3.758016599282064*^9}, {
   3.758016837889203*^9, 3.7580168433228474`*^9}, {3.7580168747067842`*^9, 
   3.7580169353424177`*^9}, {3.7580169717975616`*^9, 3.758016984050174*^9}, {
   3.7580170815371203`*^9, 3.7580170875661507`*^9}, {3.758017146885581*^9, 
   3.7580171495503654`*^9}, {3.7580172360242395`*^9, 3.758017266520356*^9}, {
   3.7580173023192596`*^9, 3.7580173080041485`*^9}, {3.7580173649859085`*^9, 
   3.758017393774477*^9}, {3.7580174311901913`*^9, 3.758017433115595*^9}, {
   3.7580174963565416`*^9, 3.758017729915028*^9}, {3.7580177842217984`*^9, 
   3.758017791877041*^9}, {3.758017828396607*^9, 3.7580178298878016`*^9}, {
   3.7580178662903295`*^9, 3.7580179694617724`*^9}, {3.758018003145013*^9, 
   3.7580180407460957`*^9}, {3.7580182480657153`*^9, 
   3.7580182574357147`*^9}, {3.758019136810506*^9, 3.7580191592449665`*^9}, {
   3.758019258177224*^9, 3.7580192640265656`*^9}, {3.7580193721560884`*^9, 
   3.7580193772087927`*^9}, {3.7580194484206767`*^9, 3.758019450073004*^9}, {
   3.7580197197199793`*^9, 3.758019745903989*^9}, 3.7580198316758957`*^9, {
   3.7580201167394114`*^9, 3.758020121283394*^9}, {3.7580201609595346`*^9, 
   3.758020161770928*^9}, {3.7580901495892076`*^9, 3.758090246800564*^9}, {
   3.7580902971347613`*^9, 3.7580903044672327`*^9}, {3.7580904465885935`*^9, 
   3.758090482628478*^9}, {3.75809052105635*^9, 3.758090531350961*^9}, {
   3.758091090245044*^9, 3.7580910957085285`*^9}, {3.758091269195159*^9, 
   3.7580912743975143`*^9}, {3.758091770189131*^9, 3.758091805789091*^9}, {
   3.758091962833066*^9, 3.758091977292053*^9}, {3.758092060800458*^9, 
   3.7580920651320534`*^9}, {3.7585189140630407`*^9, 
   3.7585189269665403`*^9}, {3.7585190347957473`*^9, 3.758519247844508*^9}, {
   3.758519287549301*^9, 3.7585193763997183`*^9}, {3.758519793380451*^9, 
   3.758519806380858*^9}, 3.758534853257619*^9, {3.7585362702634745`*^9, 
   3.7585362710274286`*^9}, {3.7585399298728056`*^9, 3.758539954306786*^9}, {
   3.7585400291834555`*^9, 3.7585400397547255`*^9}, {3.7588865640222025`*^9, 
   3.758886600076167*^9}, {3.758886634150237*^9, 3.758886706386278*^9}, 
   3.758886821116184*^9, {3.7588869808075447`*^9, 3.7588870254138436`*^9}, {
   3.758887296972602*^9, 3.758887301408513*^9}, {3.7588873512798367`*^9, 
   3.7588873545737295`*^9}, {3.758889290103691*^9, 3.758889295286618*^9}, {
   3.758889558552761*^9, 3.7588895679380207`*^9}, {3.758889648197013*^9, 
   3.7588897069472094`*^9}, {3.758889758085287*^9, 3.7588897675268044`*^9}, {
   3.7588898178486085`*^9, 3.758889821478201*^9}, {3.7588909202415056`*^9, 
   3.7588909287356243`*^9}, {3.758967877577487*^9, 3.758967878274412*^9}, {
   3.759131526694357*^9, 3.7591315488090687`*^9}, {3.7591321176579657`*^9, 
   3.759132123787202*^9}, {3.7591333783549876`*^9, 3.759133379762179*^9}, {
   3.75913843792101*^9, 3.7591384648865547`*^9}, {3.759151709505865*^9, 
   3.7591517151329727`*^9}, {3.759151904733689*^9, 3.759151910763975*^9}, {
   3.7592172461847334`*^9, 3.759217275498373*^9}, {3.7592173266725225`*^9, 
   3.759217340135519*^9}, {3.759217374444743*^9, 3.7592173814918957`*^9}, {
   3.7592178196023045`*^9, 3.759217838135742*^9}, {3.7592181642760086`*^9, 
   3.7592181772571573`*^9}, {3.759218309308039*^9, 3.7592183497375937`*^9}, {
   3.759218396424872*^9, 3.759218410832056*^9}, {3.7592184524869814`*^9, 
   3.7592184561874495`*^9}, {3.7592185360039463`*^9, 3.7592185668932457`*^9}, 
   3.7592186116422815`*^9, {3.759218699002886*^9, 3.759218714260434*^9}, 
   3.759222079914278*^9, {3.7592270571353045`*^9, 3.7592270834012427`*^9}, {
   3.7592271452511373`*^9, 3.7592271885069284`*^9}, {3.7592272339055953`*^9, 
   3.7592272631986146`*^9}, {3.759227305795884*^9, 3.759227330979487*^9}, {
   3.759227374770662*^9, 3.759227404831029*^9}, {3.7592274450372887`*^9, 
   3.7592274505378475`*^9}, {3.759227488022307*^9, 3.7592275055439343`*^9}, {
   3.759227982987032*^9, 3.7592279944402733`*^9}, {3.7595656463259335`*^9, 
   3.759565653479278*^9}, {3.759571026534537*^9, 3.7595711369901357`*^9}, {
   3.75957117634628*^9, 3.759571221314557*^9}, {3.7595712662984595`*^9, 
   3.759571267382324*^9}, 3.759571325727587*^9, {3.759571361429838*^9, 
   3.75957151228749*^9}, {3.7595715621392345`*^9, 3.75957156230579*^9}, {
   3.759571608148795*^9, 3.7595716179070115`*^9}, {3.759571653119585*^9, 
   3.759571673600479*^9}, {3.759571758934619*^9, 3.7595717599843493`*^9}, {
   3.759571817866128*^9, 3.7595718561844096`*^9}, {3.7595719020149307`*^9, 
   3.7595719186674523`*^9}, {3.7595719557669463`*^9, 3.759571956363447*^9}, {
   3.759572173503681*^9, 3.7595721928379517`*^9}, {3.7595728388103776`*^9, 
   3.759572845929247*^9}, {3.759572958245922*^9, 3.7595729626714635`*^9}, {
   3.7595730121392293`*^9, 3.759573014597387*^9}, {3.759573242620003*^9, 
   3.7595733042862225`*^9}, {3.7595734167748795`*^9, 3.759573420154067*^9}, {
   3.75957355984986*^9, 3.7595735636779556`*^9}, {3.7595737380250607`*^9, 
   3.759573752742165*^9}, {3.7595743797154727`*^9, 3.759574401375067*^9}, {
   3.7595786159869127`*^9, 3.7595787053997164`*^9}, {3.759646598218996*^9, 
   3.7596465987503424`*^9}, {3.7596466664555693`*^9, 
   3.7596471792967415`*^9}, {3.759647220541045*^9, 3.7596472536403656`*^9}, {
   3.7596472842082047`*^9, 3.759647348385938*^9}, {3.7596473865913286`*^9, 
   3.7596474392107377`*^9}, {3.7596474769607053`*^9, 
   3.7596475287763305`*^9}, {3.759647578870869*^9, 3.759647610939676*^9}, {
   3.759647652760577*^9, 3.7596476599497366`*^9}, {3.7596512792857513`*^9, 
   3.7596512951156125`*^9}, {3.7596548868661566`*^9, 
   3.7596549012852488`*^9}, {3.7596573238462877`*^9, 
   3.7596574000169816`*^9}, {3.759657465880747*^9, 3.7596574820651217`*^9}, {
   3.759657568350837*^9, 3.759657590059635*^9}, {3.7596577394500575`*^9, 
   3.7596578972203226`*^9}, {3.7596579338311634`*^9, 
   3.7596580747739544`*^9}, {3.7596581175682306`*^9, 
   3.7596583320566263`*^9}, {3.7596584197309556`*^9, 
   3.7596584596731415`*^9}, {3.759659893243145*^9, 3.759659893977356*^9}, {
   3.7596646404895616`*^9, 3.759664652350274*^9}, {3.7596646974765916`*^9, 
   3.759664702195536*^9}, {3.7596647377609663`*^9, 3.7596647451365385`*^9}, {
   3.759664803303281*^9, 3.759664827334961*^9}, {3.7618977482457714`*^9, 
   3.7618978344394827`*^9}, {3.7618979807965226`*^9, 
   3.7618979840163603`*^9}, {3.765793079896285*^9, 3.765793221747631*^9}, {
   3.766127038888483*^9, 3.7661270699023867`*^9}, {3.766127210745734*^9, 
   3.766127223122698*^9}, {3.766127348534645*^9, 3.766127358397708*^9}, {
   3.7661276300343175`*^9, 3.766127645661068*^9}, {3.7712252980057473`*^9, 
   3.7712253068531094`*^9}, {3.77339835214737*^9, 3.7733983580176725`*^9}, {
   3.7733986354428988`*^9, 3.773398661112295*^9}, 3.773398691636648*^9, {
   3.7733987436036987`*^9, 3.773398871096779*^9}, {3.7733989714335003`*^9, 
   3.7733991158439713`*^9}, 3.773399264992607*^9, {3.773546619488077*^9, 
   3.7735466330357428`*^9}, {3.7735474504518137`*^9, 
   3.7735474687538543`*^9}, {3.773547512491685*^9, 3.7735476932299104`*^9}, {
   3.7735477243884187`*^9, 3.773547762311555*^9}, {3.773547794438678*^9, 
   3.773548062288869*^9}, {3.7735480973738737`*^9, 3.773548254069705*^9}, {
   3.773548293895731*^9, 3.773548414826727*^9}, 3.773548538337446*^9, {
   3.7735506162117014`*^9, 3.7735506377494907`*^9}, {3.7735507442348003`*^9, 
   3.7735507673336267`*^9}, {3.7735508022181635`*^9, 3.77355080933067*^9}, {
   3.773550871067941*^9, 3.7735509679418783`*^9}, {3.7735510732087955`*^9, 
   3.773551079451416*^9}, {3.773551309345006*^9, 3.7735513227753983`*^9}, {
   3.773551585979718*^9, 3.773551590859542*^9}, {3.7735516250148363`*^9, 
   3.7735516437444224`*^9}, {3.7735517027730446`*^9, 3.773551770765156*^9}, {
   3.7735518086325855`*^9, 3.773551824685508*^9}, {3.7735519567574997`*^9, 
   3.773552006990056*^9}, {3.773552403995635*^9, 3.7735524098611264`*^9}, {
   3.77520868690694*^9, 3.7752086899023476`*^9}, {3.775208771000538*^9, 
   3.7752087842967806`*^9}, 3.7752096835706882`*^9},
 CellLabel->"In[99]:=",ExpressionUUID->"11b32252-4c25-4995-8309-7adef2e3d547"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"SortOneDiag", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{"\"\<Prefactor\>\"", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        FractionBox["1", "2"], ",", 
        RowBox[{"{", 
         RowBox[{"i", ",", "iext$188612"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"i", ",", "iext$188623"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"i$188615", ",", "i$188615"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"i$188626", ",", "i$188626"}], "}"}]}], "}"}]}], ",", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<type\>\"", "\[Rule]", "\"\<Propagator\>\""}], ",", 
       RowBox[{"\"\<indices\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"i", ",", "i$188625"}], "}"}]}]}], "\[RightAssociation]"}], 
     ",", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<type\>\"", "\[Rule]", "\"\<nPoint\>\""}], ",", 
       RowBox[{"\"\<indices\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"i$188625", ",", "iext$188623", ",", "i$188626"}], "}"}]}], 
       ",", 
       RowBox[{"\"\<nPoint\>\"", "\[Rule]", "3"}], ",", 
       RowBox[{"\"\<spec\>\"", "\[Rule]", "\"\<none\>\""}]}], 
      "\[RightAssociation]"}], ",", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<type\>\"", "\[Rule]", "\"\<Propagator\>\""}], ",", 
       RowBox[{"\"\<indices\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"i$188626", ",", "i$188614"}], "}"}]}]}], 
      "\[RightAssociation]"}], ",", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<type\>\"", "\[Rule]", "\"\<nPoint\>\""}], ",", 
       RowBox[{"\"\<indices\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"i$188614", ",", "iext$188612", ",", "i$188615"}], "}"}]}], 
       ",", 
       RowBox[{"\"\<nPoint\>\"", "\[Rule]", "3"}], ",", 
       RowBox[{"\"\<spec\>\"", "\[Rule]", "\"\<none\>\""}]}], 
      "\[RightAssociation]"}], ",", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<type\>\"", "\[Rule]", "\"\<Propagator\>\""}], ",", 
       RowBox[{"\"\<indices\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"i$188615", ",", "j"}], "}"}]}]}], "\[RightAssociation]"}], 
     ",", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<type\>\"", "\[Rule]", "\"\<Regulatordot\>\""}], ",", 
       RowBox[{"\"\<indices\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"i", ",", "j"}], "}"}]}]}], "\[RightAssociation]"}]}], "}"}],
    ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"i", "\[Rule]", "A"}], ",", 
     RowBox[{"i$188625", "\[Rule]", "A"}], ",", 
     RowBox[{"i$188615", "\[Rule]", "A"}], ",", 
     RowBox[{"j", "\[Rule]", "A"}], ",", 
     RowBox[{"i$188626", "\[Rule]", "A"}], ",", 
     RowBox[{"i$188614", "\[Rule]", "A"}], ",", 
     RowBox[{"iext$188612", "\[Rule]", "A"}], ",", 
     RowBox[{"iext$188623", "\[Rule]", "A"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"i", ",", "i$188625"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"i$188626", ",", "i$188614"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"i$188615", ",", "j"}], "}"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "4", ",", "6"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"{", 
     RowBox[{"i", ",", "j"}], "}"}], "}"}], ",", 
   RowBox[{"{", "7", "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"i$188625", ",", "iext$188623", ",", "i$188626"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"i$188614", ",", "iext$188612", ",", "i$188615"}], "}"}]}], 
    "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "5"}], "}"}], ",", 
   RowBox[{"{", "}"}], ",", 
   RowBox[{"{", "}"}], ",", 
   RowBox[{"\[LeftAssociation]", 
    RowBox[{
     RowBox[{"\"\<bosonic\>\"", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{"A", "[", 
        RowBox[{"p", ",", 
         RowBox[{"{", 
          RowBox[{"mu", ",", "i"}], "}"}]}], "]"}], "}"}]}], ",", 
     RowBox[{"\"\<fermionic\>\"", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"cbar", "[", 
          RowBox[{"p", ",", "i"}], "]"}], ",", 
         RowBox[{"c", "[", 
          RowBox[{"p", ",", "i"}], "]"}]}], "}"}], "}"}]}], ",", 
     RowBox[{"\"\<BRSTsources\>\"", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Q", "[", "A", "]"}], ",", "\"\<fermionic\>\""}], "}"}], 
        ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Q", "[", "cbar", "]"}], ",", "\"\<bosonic\>\""}], "}"}], 
        ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Q", "[", "c", "]"}], ",", "\"\<bosonic\>\""}], "}"}]}], 
       "}"}]}]}], "\[RightAssociation]"}]}], "]"}]], "Input",
 CellChangeTimes->{{3.7752086334581575`*^9, 3.7752086473967133`*^9}},
 CellLabel->
  "In[101]:=",ExpressionUUID->"e5828fcd-1504-4ca5-9b6e-06260910e31a"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"\<\"Prefactor\"\>", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{
      FractionBox["1", "2"], ",", "1", ",", 
      RowBox[{"{", 
       RowBox[{"i", ",", "iext$188612"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"i", ",", "iext$188623"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"i$188615", ",", "i$188615"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"i$188626", ",", "i$188626"}], "}"}]}], "}"}]}], ",", 
   RowBox[{"\[LeftAssociation]", 
    RowBox[{
     RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Propagator\"\>"}], ",", 
     RowBox[{"\<\"indices\"\>", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"A", ",", "i"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"A", ",", "i$188625"}], "}"}]}], "}"}]}]}], 
    "\[RightAssociation]"}], ",", 
   RowBox[{"\[LeftAssociation]", 
    RowBox[{
     RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"nPoint\"\>"}], ",", 
     RowBox[{"\<\"indices\"\>", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"A", ",", "iext$188623"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"A", ",", "i$188625"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"A", ",", "i$188626"}], "}"}]}], "}"}]}], ",", 
     RowBox[{"\<\"nPoint\"\>", "\[Rule]", "3"}], ",", 
     RowBox[{"\<\"spec\"\>", "\[Rule]", "\<\"none\"\>"}]}], 
    "\[RightAssociation]"}], ",", 
   RowBox[{"\[LeftAssociation]", 
    RowBox[{
     RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Propagator\"\>"}], ",", 
     RowBox[{"\<\"indices\"\>", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"A", ",", "i$188614"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"A", ",", "i$188626"}], "}"}]}], "}"}]}]}], 
    "\[RightAssociation]"}], ",", 
   RowBox[{"\[LeftAssociation]", 
    RowBox[{
     RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"nPoint\"\>"}], ",", 
     RowBox[{"\<\"indices\"\>", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"A", ",", "iext$188612"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"A", ",", "i$188614"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"A", ",", "i$188615"}], "}"}]}], "}"}]}], ",", 
     RowBox[{"\<\"nPoint\"\>", "\[Rule]", "3"}], ",", 
     RowBox[{"\<\"spec\"\>", "\[Rule]", "\<\"none\"\>"}]}], 
    "\[RightAssociation]"}], ",", 
   RowBox[{"\[LeftAssociation]", 
    RowBox[{
     RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Propagator\"\>"}], ",", 
     RowBox[{"\<\"indices\"\>", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"A", ",", "i$188615"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"A", ",", "j"}], "}"}]}], "}"}]}]}], "\[RightAssociation]"}],
    ",", 
   RowBox[{"\[LeftAssociation]", 
    RowBox[{
     RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Regulatordot\"\>"}], ",", 
     RowBox[{"\<\"indices\"\>", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"A", ",", "i"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"A", ",", "j"}], "}"}]}], "}"}]}]}], 
    "\[RightAssociation]"}]}], "}"}]], "Output",
 CellChangeTimes->{
  3.7752086552778387`*^9, 3.7752086950621004`*^9, {3.7752087764542513`*^9, 
   3.7752087915845485`*^9}, 3.7752088998913116`*^9, 3.7752089835788236`*^9, 
   3.775209082828026*^9, 3.775209726480333*^9, 3.775279789470972*^9, 
   3.7753644127589965`*^9},
 CellLabel->
  "Out[101]=",ExpressionUUID->"9c30ac40-46fd-4dfa-8a15-28b454761db3"]
}, Open  ]],

Cell[BoxData[{
 RowBox[{
  RowBox[{"Clear", "[", "SortDiags", "]"}], " ", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
     RowBox[{
     "Sorts", " ", "vertices", " ", "and", " ", "props", " ", "of", " ", 
      "one", " ", "diagram", " ", "type", " ", "for", " ", "multiple", " ", 
      "index", " ", "configs"}], "..."}], "."}], 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SortDiags", "[", 
   RowBox[{
   "diagram_", ",", "combinedIndexConfigs_", ",", "propIndiceszero_", ",", 
    " ", "positionProps_", ",", "regIndiceszero_", ",", " ", "positionReg_", 
    ",", " ", "vertexIndiceszero_", ",", " ", "positionVertex_", ",", " ", 
    "BRSTIndiceszero_", ",", " ", "positionBRST_", ",", " ", "fields_"}], 
   "]"}], " ", ":=", " ", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"sortedDiag", " ", "=", " ", 
       RowBox[{"Table", "[", 
        RowBox[{"Null", ",", 
         RowBox[{"Length", "@", "combinedIndexConfigs"}]}], "]"}]}], ",", " ", 
      RowBox[{"appliedDiag", " ", "=", " ", 
       RowBox[{"Table", "[", 
        RowBox[{"Null", ",", 
         RowBox[{"Length", "@", "combinedIndexConfigs"}]}], "]"}]}]}], "}"}], 
    ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"(", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{
          RowBox[{"sortedDiag", "[", 
           RowBox[{"[", "#", "]"}], "]"}], " ", "=", " ", 
          RowBox[{"SortOneDiag", "[", 
           RowBox[{"diagram", ",", 
            RowBox[{"combinedIndexConfigs", "[", 
             RowBox[{"[", "#", "]"}], "]"}], ",", "propIndiceszero", ",", " ",
             "positionProps", ",", " ", "regIndiceszero", ",", "positionReg", 
            ",", " ", "vertexIndiceszero", ",", " ", "positionVertex", ",", 
            " ", "BRSTIndiceszero", ",", " ", "positionBRST", ",", "fields"}],
            "]"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"appliedDiag", "[", 
           RowBox[{"[", "#", "]"}], "]"}], " ", "=", " ", 
          RowBox[{"sortedDiag", "[", 
           RowBox[{"[", "#", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"appliedDiag", "[", 
           RowBox[{"[", 
            RowBox[{"#", ",", "1", ",", "2"}], "]"}], "]"}], "=", " ", 
          RowBox[{"GetSign", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"appliedDiag", "[", 
              RowBox[{"[", 
               RowBox[{"#", ",", "1"}], "]"}], "]"}], "/.", 
             RowBox[{"combinedIndexConfigs", "[", 
              RowBox[{"[", "#", "]"}], "]"}]}], ",", "fields"}], "]"}]}], 
         ";"}], "\[IndentingNewLine]", ")"}], "&"}], "/@", 
      RowBox[{"Table", "[", 
       RowBox[{"i", ",", 
        RowBox[{"{", 
         RowBox[{"i", ",", "1", ",", 
          RowBox[{"Length", "@", "combinedIndexConfigs"}]}], "}"}]}], "]"}]}],
      ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"Return", "[", 
      RowBox[{"{", 
       RowBox[{"sortedDiag", ",", " ", "appliedDiag"}], "}"}], "]"}], ";"}]}],
    "\[IndentingNewLine]", "]"}], " ", 
  RowBox[{"(*", " ", 
   RowBox[{
   "we", " ", "want", " ", "to", " ", "get", " ", "the", " ", "swapped", " ", 
    "superindices", " ", "as", " ", "well", " ", "as", " ", "the", " ", 
    "possible", " ", "configs", " ", "as", " ", "a", " ", "list"}], " ", 
   "*)"}]}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.7580059091427436`*^9, 3.758005943622452*^9}, {
   3.7580060110165577`*^9, 3.758006022131509*^9}, {3.758006083282144*^9, 
   3.75800608754673*^9}, {3.7580062046954317`*^9, 3.7580062060055866`*^9}, {
   3.758006240775317*^9, 3.7580062651435843`*^9}, {3.7580064268301916`*^9, 
   3.7580065420960007`*^9}, {3.7580066082034416`*^9, 3.758006675442548*^9}, {
   3.7580067322156963`*^9, 3.758006816192916*^9}, {3.758006923202875*^9, 
   3.758006977456459*^9}, {3.75800701624586*^9, 3.7580070217865896`*^9}, {
   3.7580070610467567`*^9, 3.7580071115301275`*^9}, {3.758007239601614*^9, 
   3.758007267649871*^9}, {3.7580073265950894`*^9, 3.7580073383452916`*^9}, {
   3.7580074541765475`*^9, 3.7580074559186745`*^9}, {3.758007532432228*^9, 
   3.7580075509351053`*^9}, {3.758007594283926*^9, 3.7580076271253486`*^9}, {
   3.7580078265680623`*^9, 3.758007836975834*^9}, {3.758007882321764*^9, 
   3.7580079276786346`*^9}, {3.7580080412016172`*^9, 
   3.7580080768041525`*^9}, {3.7580081570392895`*^9, 
   3.7580082363374968`*^9}, {3.7580082762720575`*^9, 
   3.7580083724527383`*^9}, {3.7580084061677103`*^9, 3.758008430742066*^9}, {
   3.7580084930437555`*^9, 3.758008506650202*^9}, {3.7580086312612967`*^9, 
   3.758008696773825*^9}, {3.7580087369886994`*^9, 3.7580087762149153`*^9}, {
   3.758009003741465*^9, 3.7580090204642067`*^9}, {3.758014664220793*^9, 
   3.7580147866072187`*^9}, {3.758015134347046*^9, 3.758015198174034*^9}, {
   3.7580152597857857`*^9, 3.758015320757729*^9}, {3.758016294492928*^9, 
   3.7580164829784036`*^9}, {3.7580165146625166`*^9, 3.758016599282064*^9}, {
   3.758016837889203*^9, 3.7580168433228474`*^9}, {3.7580168747067842`*^9, 
   3.7580169353424177`*^9}, {3.7580169717975616`*^9, 3.758016984050174*^9}, {
   3.7580170815371203`*^9, 3.7580170875661507`*^9}, {3.758017146885581*^9, 
   3.7580171495503654`*^9}, {3.7580172360242395`*^9, 3.758017266520356*^9}, {
   3.7580173023192596`*^9, 3.7580173080041485`*^9}, {3.7580173649859085`*^9, 
   3.758017393774477*^9}, {3.7580174311901913`*^9, 3.758017433115595*^9}, {
   3.7580174963565416`*^9, 3.758017729915028*^9}, {3.7580177842217984`*^9, 
   3.758017791877041*^9}, {3.758017828396607*^9, 3.7580178298878016`*^9}, {
   3.7580178662903295`*^9, 3.7580179694617724`*^9}, {3.758018003145013*^9, 
   3.7580180407460957`*^9}, {3.7580182480657153`*^9, 
   3.7580182574357147`*^9}, {3.758019136810506*^9, 3.7580191592449665`*^9}, {
   3.758019258177224*^9, 3.7580192640265656`*^9}, {3.7580193721560884`*^9, 
   3.7580193772087927`*^9}, {3.7580194484206767`*^9, 3.758019450073004*^9}, {
   3.7580197197199793`*^9, 3.758019745903989*^9}, 3.7580198316758957`*^9, {
   3.7580201167394114`*^9, 3.758020121283394*^9}, {3.7580201609595346`*^9, 
   3.758020161770928*^9}, {3.7580901495892076`*^9, 3.758090246800564*^9}, {
   3.7580902971347613`*^9, 3.7580903044672327`*^9}, {3.7580904465885935`*^9, 
   3.758090482628478*^9}, {3.75809052105635*^9, 3.758090531350961*^9}, {
   3.758091090245044*^9, 3.7580910957085285`*^9}, {3.758091269195159*^9, 
   3.7580912743975143`*^9}, {3.758091770189131*^9, 3.758091805789091*^9}, {
   3.758091962833066*^9, 3.758091977292053*^9}, {3.758092060800458*^9, 
   3.7580920651320534`*^9}, {3.7585189140630407`*^9, 
   3.7585189269665403`*^9}, {3.7585190347957473`*^9, 3.758519247844508*^9}, {
   3.758519287549301*^9, 3.7585193763997183`*^9}, {3.758519793380451*^9, 
   3.758519806380858*^9}, 3.758534853257619*^9, {3.7585362702634745`*^9, 
   3.7585362710274286`*^9}, {3.7585399298728056`*^9, 3.758539954306786*^9}, {
   3.7585400291834555`*^9, 3.7585400397547255`*^9}, {3.7588865640222025`*^9, 
   3.758886600076167*^9}, {3.758886634150237*^9, 3.758886706386278*^9}, 
   3.758886821116184*^9, {3.7588869808075447`*^9, 3.7588870254138436`*^9}, {
   3.758887296972602*^9, 3.758887301408513*^9}, {3.7588873512798367`*^9, 
   3.7588873545737295`*^9}, {3.758889290103691*^9, 3.758889295286618*^9}, {
   3.758889558552761*^9, 3.7588895679380207`*^9}, {3.758889648197013*^9, 
   3.7588897069472094`*^9}, {3.758889758085287*^9, 3.7588897675268044`*^9}, {
   3.7588898178486085`*^9, 3.758889821478201*^9}, {3.7588909202415056`*^9, 
   3.7588909287356243`*^9}, {3.758967877577487*^9, 3.758967878274412*^9}, {
   3.759131526694357*^9, 3.7591315488090687`*^9}, {3.7591321176579657`*^9, 
   3.759132123787202*^9}, {3.7591333783549876`*^9, 3.759133379762179*^9}, {
   3.75913843792101*^9, 3.7591384648865547`*^9}, {3.759151709505865*^9, 
   3.7591517151329727`*^9}, {3.759151904733689*^9, 3.759151910763975*^9}, {
   3.7592172461847334`*^9, 3.759217275498373*^9}, {3.7592173266725225`*^9, 
   3.759217340135519*^9}, {3.759217374444743*^9, 3.7592173814918957`*^9}, {
   3.7592178196023045`*^9, 3.759217838135742*^9}, {3.7592181642760086`*^9, 
   3.7592181772571573`*^9}, {3.759218309308039*^9, 3.7592183497375937`*^9}, {
   3.759218396424872*^9, 3.759218410832056*^9}, {3.7592184524869814`*^9, 
   3.7592184561874495`*^9}, {3.7592185360039463`*^9, 3.7592185668932457`*^9}, 
   3.7592186116422815`*^9, {3.759218699002886*^9, 3.759218714260434*^9}, 
   3.759222079914278*^9, {3.7592270571353045`*^9, 3.7592270834012427`*^9}, {
   3.7592271452511373`*^9, 3.7592271885069284`*^9}, {3.7592272339055953`*^9, 
   3.7592272631986146`*^9}, {3.759227305795884*^9, 3.759227330979487*^9}, {
   3.759227374770662*^9, 3.759227404831029*^9}, {3.7592274450372887`*^9, 
   3.7592274505378475`*^9}, {3.759227488022307*^9, 3.7592275055439343`*^9}, {
   3.759227982987032*^9, 3.7592279944402733`*^9}, {3.7595656463259335`*^9, 
   3.759565653479278*^9}, {3.759571026534537*^9, 3.7595711369901357`*^9}, {
   3.75957117634628*^9, 3.759571221314557*^9}, {3.7595712662984595`*^9, 
   3.759571267382324*^9}, 3.759571325727587*^9, {3.759571361429838*^9, 
   3.75957151228749*^9}, {3.7595715621392345`*^9, 3.75957156230579*^9}, {
   3.759571608148795*^9, 3.7595716179070115`*^9}, {3.759571653119585*^9, 
   3.759571673600479*^9}, {3.759571758934619*^9, 3.7595717599843493`*^9}, {
   3.759571817866128*^9, 3.7595718561844096`*^9}, {3.7595719020149307`*^9, 
   3.7595719186674523`*^9}, {3.7595719557669463`*^9, 3.759571956363447*^9}, {
   3.759572173503681*^9, 3.7595721928379517`*^9}, {3.7595728388103776`*^9, 
   3.759572845929247*^9}, {3.759572958245922*^9, 3.7595729626714635`*^9}, {
   3.7595730121392293`*^9, 3.759573014597387*^9}, {3.759573242620003*^9, 
   3.7595733042862225`*^9}, {3.7595734167748795`*^9, 3.759573420154067*^9}, {
   3.75957355984986*^9, 3.7595735636779556`*^9}, {3.7595737380250607`*^9, 
   3.759573752742165*^9}, {3.7595743797154727`*^9, 3.759574401375067*^9}, {
   3.7595786159869127`*^9, 3.7595787053997164`*^9}, {3.759646598218996*^9, 
   3.7596465987503424`*^9}, {3.7596466664555693`*^9, 
   3.7596471792967415`*^9}, {3.759647220541045*^9, 3.7596472536403656`*^9}, {
   3.7596472842082047`*^9, 3.759647348385938*^9}, {3.7596473865913286`*^9, 
   3.7596474392107377`*^9}, {3.7596474769607053`*^9, 
   3.7596475287763305`*^9}, {3.759647578870869*^9, 3.759647610939676*^9}, {
   3.759647652760577*^9, 3.7596476599497366`*^9}, {3.7596512792857513`*^9, 
   3.7596512951156125`*^9}, {3.7596548868661566`*^9, 
   3.7596549012852488`*^9}, {3.7596573238462877`*^9, 
   3.7596574000169816`*^9}, {3.759657465880747*^9, 3.7596574820651217`*^9}, {
   3.759657568350837*^9, 3.759657590059635*^9}, {3.7596577394500575`*^9, 
   3.7596578972203226`*^9}, {3.7596579338311634`*^9, 
   3.7596580747739544`*^9}, {3.7596581175682306`*^9, 
   3.7596583320566263`*^9}, {3.7596584197309556`*^9, 
   3.7596584596731415`*^9}, {3.759659893243145*^9, 3.759659893977356*^9}, {
   3.7596646404895616`*^9, 3.759664652350274*^9}, {3.7596646974765916`*^9, 
   3.759664702195536*^9}, {3.7596647377609663`*^9, 3.7596647451365385`*^9}, {
   3.759664803303281*^9, 3.759664827334961*^9}, {3.7618977482457714`*^9, 
   3.7618978344394827`*^9}, {3.7618979807965226`*^9, 
   3.7618979840163603`*^9}, {3.765793079896285*^9, 3.765793221747631*^9}, {
   3.766127038888483*^9, 3.7661270699023867`*^9}, {3.766127210745734*^9, 
   3.766127223122698*^9}, {3.766127348534645*^9, 3.766127358397708*^9}, {
   3.7661276300343175`*^9, 3.766127645661068*^9}, {3.7712252980057473`*^9, 
   3.7712253068531094`*^9}, {3.773398328240961*^9, 3.7733985869445734`*^9}, {
   3.773398851949814*^9, 3.7733988573694134`*^9}, {3.7733996978567133`*^9, 
   3.7733997205360727`*^9}, {3.773399844299975*^9, 3.773399844928294*^9}, {
   3.7735465658946395`*^9, 3.7735465662229724`*^9}, {3.7735466391614137`*^9, 
   3.77354664298984*^9}, {3.773548491415297*^9, 3.7735485436972055`*^9}, {
   3.7735517756278667`*^9, 3.773551798000064*^9}, {3.7735518983867073`*^9, 
   3.7735519520617995`*^9}, {3.773552919701144*^9, 3.7735529598364477`*^9}, {
   3.773553197724266*^9, 3.773553226719698*^9}, {3.7735532742182765`*^9, 
   3.773553274794945*^9}, {3.773554348196443*^9, 3.77355435122963*^9}, {
   3.775209174068242*^9, 3.7752091832883425`*^9}, {3.7752092210100126`*^9, 
   3.7752092294329967`*^9}, {3.775209265859803*^9, 3.775209281166897*^9}, {
   3.7752093139537477`*^9, 3.775209314344365*^9}, {3.775209370500332*^9, 
   3.7752093754383955`*^9}, {3.7752096877062325`*^9, 3.775209687875167*^9}},
 CellLabel->
  "In[102]:=",ExpressionUUID->"5a37e707-5430-4c0d-900d-4e31ef2accf2"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"SortDiags", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{"\"\<Prefactor\>\"", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        FractionBox["1", "2"], ",", 
        RowBox[{"{", 
         RowBox[{"i", ",", "iext$188612"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"i", ",", "iext$188623"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"i$188615", ",", "i$188615"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"i$188626", ",", "i$188626"}], "}"}]}], "}"}]}], ",", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<type\>\"", "\[Rule]", "\"\<Propagator\>\""}], ",", 
       RowBox[{"\"\<indices\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"i", ",", "i$188625"}], "}"}]}]}], "\[RightAssociation]"}], 
     ",", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<type\>\"", "\[Rule]", "\"\<nPoint\>\""}], ",", 
       RowBox[{"\"\<indices\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"i$188625", ",", "iext$188623", ",", "i$188626"}], "}"}]}], 
       ",", 
       RowBox[{"\"\<nPoint\>\"", "\[Rule]", "3"}], ",", 
       RowBox[{"\"\<spec\>\"", "\[Rule]", "\"\<none\>\""}]}], 
      "\[RightAssociation]"}], ",", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<type\>\"", "\[Rule]", "\"\<Propagator\>\""}], ",", 
       RowBox[{"\"\<indices\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"i$188626", ",", "i$188614"}], "}"}]}]}], 
      "\[RightAssociation]"}], ",", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<type\>\"", "\[Rule]", "\"\<nPoint\>\""}], ",", 
       RowBox[{"\"\<indices\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"i$188614", ",", "iext$188612", ",", "i$188615"}], "}"}]}], 
       ",", 
       RowBox[{"\"\<nPoint\>\"", "\[Rule]", "3"}], ",", 
       RowBox[{"\"\<spec\>\"", "\[Rule]", "\"\<none\>\""}]}], 
      "\[RightAssociation]"}], ",", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<type\>\"", "\[Rule]", "\"\<Propagator\>\""}], ",", 
       RowBox[{"\"\<indices\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"i$188615", ",", "j"}], "}"}]}]}], "\[RightAssociation]"}], 
     ",", 
     RowBox[{"\[LeftAssociation]", 
      RowBox[{
       RowBox[{"\"\<type\>\"", "\[Rule]", "\"\<Regulatordot\>\""}], ",", 
       RowBox[{"\"\<indices\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"i", ",", "j"}], "}"}]}]}], "\[RightAssociation]"}]}], "}"}],
    ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i", "\[Rule]", "A"}], ",", 
       RowBox[{"i$188625", "\[Rule]", "A"}], ",", 
       RowBox[{"i$188615", "\[Rule]", "A"}], ",", 
       RowBox[{"j", "\[Rule]", "A"}], ",", 
       RowBox[{"i$188626", "\[Rule]", "A"}], ",", 
       RowBox[{"i$188614", "\[Rule]", "A"}], ",", 
       RowBox[{"iext$188612", "\[Rule]", "A"}], ",", 
       RowBox[{"iext$188623", "\[Rule]", "A"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$188625", "\[Rule]", "c"}], ",", 
       RowBox[{"i$188615", "\[Rule]", "cbar"}], ",", 
       RowBox[{"j", "\[Rule]", "c"}], ",", 
       RowBox[{"i$188626", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$188614", "\[Rule]", "c"}], ",", 
       RowBox[{"iext$188612", "\[Rule]", "A"}], ",", 
       RowBox[{"iext$188623", "\[Rule]", "A"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"i", "\[Rule]", "c"}], ",", 
       RowBox[{"i$188625", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$188615", "\[Rule]", "c"}], ",", 
       RowBox[{"j", "\[Rule]", "cbar"}], ",", 
       RowBox[{"i$188626", "\[Rule]", "c"}], ",", 
       RowBox[{"i$188614", "\[Rule]", "cbar"}], ",", 
       RowBox[{"iext$188612", "\[Rule]", "A"}], ",", 
       RowBox[{"iext$188623", "\[Rule]", "A"}]}], "}"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"i", ",", "i$188625"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"i$188626", ",", "i$188614"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"i$188615", ",", "j"}], "}"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "4", ",", "6"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"{", 
     RowBox[{"i", ",", "j"}], "}"}], "}"}], ",", 
   RowBox[{"{", "7", "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"i$188625", ",", "iext$188623", ",", "i$188626"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"i$188614", ",", "iext$188612", ",", "i$188615"}], "}"}]}], 
    "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "5"}], "}"}], ",", 
   RowBox[{"{", "}"}], ",", 
   RowBox[{"{", "}"}], ",", 
   RowBox[{"\[LeftAssociation]", 
    RowBox[{
     RowBox[{"\"\<bosonic\>\"", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{"A", "[", 
        RowBox[{"p", ",", 
         RowBox[{"{", 
          RowBox[{"mu", ",", "i"}], "}"}]}], "]"}], "}"}]}], ",", 
     RowBox[{"\"\<fermionic\>\"", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"cbar", "[", 
          RowBox[{"p", ",", "i"}], "]"}], ",", 
         RowBox[{"c", "[", 
          RowBox[{"p", ",", "i"}], "]"}]}], "}"}], "}"}]}], ",", 
     RowBox[{"\"\<BRSTsources\>\"", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Q", "[", "A", "]"}], ",", "\"\<fermionic\>\""}], "}"}], 
        ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Q", "[", "cbar", "]"}], ",", "\"\<bosonic\>\""}], "}"}], 
        ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Q", "[", "c", "]"}], ",", "\"\<bosonic\>\""}], "}"}]}], 
       "}"}]}]}], "\[RightAssociation]"}]}], "]"}]], "Input",
 CellChangeTimes->{{3.773399833659427*^9, 3.773399839681323*^9}, {
   3.7733998767910995`*^9, 3.7733998778811865`*^9}, {3.773550528707406*^9, 
   3.7735505293411427`*^9}, {3.7735524207289314`*^9, 3.773552421411536*^9}, {
   3.7735526852582655`*^9, 3.7735527573569946`*^9}, {3.7752005393924017`*^9, 
   3.775200553098487*^9}, 3.7752083090750136`*^9, {3.7752083658787813`*^9, 
   3.7752083680664597`*^9}, 3.7752084151346755`*^9, {3.775208502318204*^9, 
   3.7752085046309996`*^9}, {3.7752085740810595`*^9, 3.7752085746589746`*^9}},
 CellLabel->
  "In[104]:=",ExpressionUUID->"b1fb7131-20f6-47ec-bf02-89c4e64c237e"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"\<\"Prefactor\"\>", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{
          FractionBox["1", "2"], ",", "1", ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "iext$188612"}], "}"}], ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "iext$188623"}], "}"}], ",", 
          RowBox[{"{", 
           RowBox[{"i$188615", ",", "i$188615"}], "}"}], ",", 
          RowBox[{"{", 
           RowBox[{"i$188626", ",", "i$188626"}], "}"}]}], "}"}]}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Propagator\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"A", ",", "i"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"A", ",", "i$188625"}], "}"}]}], "}"}]}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"nPoint\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"A", ",", "iext$188623"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"A", ",", "i$188625"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"A", ",", "i$188626"}], "}"}]}], "}"}]}], ",", 
         RowBox[{"\<\"nPoint\"\>", "\[Rule]", "3"}], ",", 
         RowBox[{"\<\"spec\"\>", "\[Rule]", "\<\"none\"\>"}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Propagator\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"A", ",", "i$188614"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"A", ",", "i$188626"}], "}"}]}], "}"}]}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"nPoint\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"A", ",", "iext$188612"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"A", ",", "i$188614"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"A", ",", "i$188615"}], "}"}]}], "}"}]}], ",", 
         RowBox[{"\<\"nPoint\"\>", "\[Rule]", "3"}], ",", 
         RowBox[{"\<\"spec\"\>", "\[Rule]", "\<\"none\"\>"}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Propagator\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"A", ",", "i$188615"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"A", ",", "j"}], "}"}]}], "}"}]}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Regulatordot\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"A", ",", "i"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"A", ",", "j"}], "}"}]}], "}"}]}]}], 
        "\[RightAssociation]"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"\<\"Prefactor\"\>", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"-", "1"}], ",", 
          FractionBox["1", "2"], ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "iext$188612"}], "}"}], ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "iext$188623"}], "}"}], ",", 
          RowBox[{"{", 
           RowBox[{"i$188615", ",", "i$188615"}], "}"}], ",", 
          RowBox[{"{", 
           RowBox[{"i$188626", ",", "i$188626"}], "}"}]}], "}"}]}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Propagator\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"c", ",", "i$188625"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"cbar", ",", "i"}], "}"}]}], "}"}]}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"nPoint\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"A", ",", "iext$188623"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"cbar", ",", "i$188626"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"c", ",", "i$188625"}], "}"}]}], "}"}]}], ",", 
         RowBox[{"\<\"nPoint\"\>", "\[Rule]", "3"}], ",", 
         RowBox[{"\<\"spec\"\>", "\[Rule]", "\<\"none\"\>"}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Propagator\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"c", ",", "i$188614"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"cbar", ",", "i$188626"}], "}"}]}], "}"}]}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"nPoint\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"A", ",", "iext$188612"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"cbar", ",", "i$188615"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"c", ",", "i$188614"}], "}"}]}], "}"}]}], ",", 
         RowBox[{"\<\"nPoint\"\>", "\[Rule]", "3"}], ",", 
         RowBox[{"\<\"spec\"\>", "\[Rule]", "\<\"none\"\>"}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Propagator\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"c", ",", "j"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"cbar", ",", "i$188615"}], "}"}]}], "}"}]}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Regulatordot\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"cbar", ",", "i"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"c", ",", "j"}], "}"}]}], "}"}]}]}], 
        "\[RightAssociation]"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"\<\"Prefactor\"\>", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"-", "1"}], ",", 
          FractionBox["1", "2"], ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "iext$188612"}], "}"}], ",", 
          RowBox[{"{", 
           RowBox[{"i", ",", "iext$188623"}], "}"}], ",", 
          RowBox[{"{", 
           RowBox[{"i$188615", ",", "i$188615"}], "}"}], ",", 
          RowBox[{"{", 
           RowBox[{"i$188626", ",", "i$188626"}], "}"}]}], "}"}]}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Propagator\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"c", ",", "i"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"cbar", ",", "i$188625"}], "}"}]}], "}"}]}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"nPoint\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"A", ",", "iext$188623"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"cbar", ",", "i$188625"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"c", ",", "i$188626"}], "}"}]}], "}"}]}], ",", 
         RowBox[{"\<\"nPoint\"\>", "\[Rule]", "3"}], ",", 
         RowBox[{"\<\"spec\"\>", "\[Rule]", "\<\"none\"\>"}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Propagator\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"c", ",", "i$188626"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"cbar", ",", "i$188614"}], "}"}]}], "}"}]}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"nPoint\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"A", ",", "iext$188612"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"cbar", ",", "i$188614"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"c", ",", "i$188615"}], "}"}]}], "}"}]}], ",", 
         RowBox[{"\<\"nPoint\"\>", "\[Rule]", "3"}], ",", 
         RowBox[{"\<\"spec\"\>", "\[Rule]", "\<\"none\"\>"}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Propagator\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"c", ",", "i$188615"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"cbar", ",", "j"}], "}"}]}], "}"}]}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Regulatordot\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"cbar", ",", "j"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"c", ",", "i"}], "}"}]}], "}"}]}]}], 
        "\[RightAssociation]"}]}], "}"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"\<\"Prefactor\"\>", "\[Rule]", 
        RowBox[{"{", 
         FractionBox["1", "2"], "}"}]}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Propagator\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"A", ",", "i"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"A", ",", "i$188625"}], "}"}]}], "}"}]}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"nPoint\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"A", ",", "iext$188623"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"A", ",", "i$188625"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"A", ",", "i$188626"}], "}"}]}], "}"}]}], ",", 
         RowBox[{"\<\"nPoint\"\>", "\[Rule]", "3"}], ",", 
         RowBox[{"\<\"spec\"\>", "\[Rule]", "\<\"none\"\>"}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Propagator\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"A", ",", "i$188614"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"A", ",", "i$188626"}], "}"}]}], "}"}]}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"nPoint\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"A", ",", "iext$188612"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"A", ",", "i$188614"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"A", ",", "i$188615"}], "}"}]}], "}"}]}], ",", 
         RowBox[{"\<\"nPoint\"\>", "\[Rule]", "3"}], ",", 
         RowBox[{"\<\"spec\"\>", "\[Rule]", "\<\"none\"\>"}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Propagator\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"A", ",", "i$188615"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"A", ",", "j"}], "}"}]}], "}"}]}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Regulatordot\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"A", ",", "i"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"A", ",", "j"}], "}"}]}], "}"}]}]}], 
        "\[RightAssociation]"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"\<\"Prefactor\"\>", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"-", 
          FractionBox["1", "2"]}], "}"}]}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Propagator\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"c", ",", "i$188625"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"cbar", ",", "i"}], "}"}]}], "}"}]}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"nPoint\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"A", ",", "iext$188623"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"cbar", ",", "i$188626"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"c", ",", "i$188625"}], "}"}]}], "}"}]}], ",", 
         RowBox[{"\<\"nPoint\"\>", "\[Rule]", "3"}], ",", 
         RowBox[{"\<\"spec\"\>", "\[Rule]", "\<\"none\"\>"}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Propagator\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"c", ",", "i$188614"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"cbar", ",", "i$188626"}], "}"}]}], "}"}]}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"nPoint\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"A", ",", "iext$188612"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"cbar", ",", "i$188615"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"c", ",", "i$188614"}], "}"}]}], "}"}]}], ",", 
         RowBox[{"\<\"nPoint\"\>", "\[Rule]", "3"}], ",", 
         RowBox[{"\<\"spec\"\>", "\[Rule]", "\<\"none\"\>"}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Propagator\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"c", ",", "j"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"cbar", ",", "i$188615"}], "}"}]}], "}"}]}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Regulatordot\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"cbar", ",", "i"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"c", ",", "j"}], "}"}]}], "}"}]}]}], 
        "\[RightAssociation]"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"\<\"Prefactor\"\>", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"-", 
          FractionBox["1", "2"]}], "}"}]}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Propagator\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"c", ",", "i"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"cbar", ",", "i$188625"}], "}"}]}], "}"}]}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"nPoint\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"A", ",", "iext$188623"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"cbar", ",", "i$188625"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"c", ",", "i$188626"}], "}"}]}], "}"}]}], ",", 
         RowBox[{"\<\"nPoint\"\>", "\[Rule]", "3"}], ",", 
         RowBox[{"\<\"spec\"\>", "\[Rule]", "\<\"none\"\>"}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Propagator\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"c", ",", "i$188626"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"cbar", ",", "i$188614"}], "}"}]}], "}"}]}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"nPoint\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"A", ",", "iext$188612"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"cbar", ",", "i$188614"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"c", ",", "i$188615"}], "}"}]}], "}"}]}], ",", 
         RowBox[{"\<\"nPoint\"\>", "\[Rule]", "3"}], ",", 
         RowBox[{"\<\"spec\"\>", "\[Rule]", "\<\"none\"\>"}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Propagator\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"c", ",", "i$188615"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"cbar", ",", "j"}], "}"}]}], "}"}]}]}], 
        "\[RightAssociation]"}], ",", 
       RowBox[{"\[LeftAssociation]", 
        RowBox[{
         RowBox[{"\<\"type\"\>", "\[Rule]", "\<\"Regulatordot\"\>"}], ",", 
         RowBox[{"\<\"indices\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"cbar", ",", "j"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"c", ",", "i"}], "}"}]}], "}"}]}]}], 
        "\[RightAssociation]"}]}], "}"}]}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{3.7752083696912937`*^9, 3.7752084171661186`*^9, 
  3.7752085052248926`*^9, 3.7752085830648518`*^9, 3.7752088104297757`*^9, 
  3.7752089130483603`*^9, 3.7752089937663937`*^9, 3.77520909790739*^9, 
  3.7752091952741804`*^9, 3.7752092412459917`*^9, 3.7752092953731375`*^9, 
  3.7752093306180735`*^9, 3.7752093882726617`*^9, 3.7752097266677914`*^9, 
  3.7752797896740847`*^9, 3.7753644130557957`*^9},
 CellLabel->
  "Out[104]=",ExpressionUUID->"76b8a5e3-b336-47f5-8e4f-4bb0aabb4185"]
}, Open  ]],

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}]], "Input",
 CellChangeTimes->{{3.7580198271731615`*^9, 3.7580198275107574`*^9}},
 CellLabel->
  "In[105]:=",ExpressionUUID->"372a02a5-f942-4f6a-84aa-881f7d7cf463"],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.7589714804814863`*^9, 3.7589715051645975`*^9}, 
   3.759658551489461*^9},
 CellLabel->
  "In[106]:=",ExpressionUUID->"31dec233-801a-424e-9792-7cbe3e258c69"],

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", "\[IndentingNewLine]"}]], "Input",
 CellChangeTimes->{{3.7580198244916296`*^9, 3.7580198248231525`*^9}, {
   3.759040058162546*^9, 3.7590400676297426`*^9}, 3.7590405797400227`*^9},
 CellLabel->
  "In[107]:=",ExpressionUUID->"4c70f327-8d7a-4e51-9756-d7be373d20a9"],

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}]], "Input",
 CellChangeTimes->{{3.7590400765919065`*^9, 3.7590400768154364`*^9}},
 CellLabel->
  "In[108]:=",ExpressionUUID->"3c330b55-cad9-4f79-a2a7-710ffbd7cc8e"],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.758970651036975*^9, 3.7589706517845387`*^9}},
 CellLabel->
  "In[109]:=",ExpressionUUID->"52bf53b5-179a-43c2-a745-7569fe48b99c"],

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}]], "Input",
 CellChangeTimes->{{3.7580066969611597`*^9, 3.7580066971894474`*^9}},
 CellLabel->
  "In[110]:=",ExpressionUUID->"88973112-7c55-4583-8f70-9b0cef0cdfb0"],

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}]], "Input",
 CellChangeTimes->{{3.757757504087929*^9, 3.757757504305649*^9}},
 CellLabel->
  "In[111]:=",ExpressionUUID->"e0a42ec3-4f2c-46dc-82ce-68d99981f72a"]
}, Closed]],

Cell[CellGroupData[{

Cell["Get Full Diagrams", "Subsection",
 CellChangeTimes->{{3.7570711494889107`*^9, 3.7570711701855297`*^9}, {
   3.757403065278137*^9, 3.7574030754031305`*^9}, {3.7580156044556265`*^9, 
   3.758015629606991*^9}, {3.758092357194866*^9, 3.7580923752568913`*^9}, 
   3.7589721539855156`*^9, {3.759041432871893*^9, 3.759041435844462*^9}, {
   3.773564267167207*^9, 3.7735642713549337`*^9}, {3.774589964803447*^9, 
   3.774589966897177*^9}},ExpressionUUID->"b9b4d2e6-d664-4a72-9e19-\
ae8bb52b5fc8"],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.774600345086111*^9, 3.7746003481307526`*^9}},
 CellLabel->
  "In[112]:=",ExpressionUUID->"3d513961-cd1a-48ef-b8a1-075964c86541"],

Cell[BoxData[{
 RowBox[{"Clear", "[", "GetFullDiagrams", "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"GetFullDiagrams", "[", 
   RowBox[{
   "RHS_", ",", "derivativelist_", ",", "replacementList_", ",", " ", 
    "fields_", ",", "truncation___"}], "]"}], " ", ":=", " ", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "internalreplacementList", ",", "fieldTypes", ",", " ", "possibleProps", 
      ",", 
      RowBox[{"sortedDiags", " ", "=", " ", 
       RowBox[{"Table", "[", 
        RowBox[{"Null", ",", 
         RowBox[{"Length", "@", "RHS"}]}], "]"}]}], ",", " ", 
      RowBox[{"combinedIndexConfigs", " ", "=", " ", 
       RowBox[{"Table", "[", 
        RowBox[{"Null", ",", 
         RowBox[{"Length", "@", "RHS"}]}], "]"}]}], ",", " ", 
      RowBox[{"appliedDiags", " ", "=", " ", 
       RowBox[{"Table", "[", 
        RowBox[{"Null", ",", 
         RowBox[{"Length", "@", "RHS"}]}], "]"}]}]}], "}"}], ",", 
    "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"myEcho", "[", 
      RowBox[{"\"\<GetFullDiagrams\>\"", ",", "1"}], "]"}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{
      "replace", " ", "dummy", " ", "indices", " ", "with", " ", "external", 
       " ", "fields"}], " ", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"internalreplacementList", " ", "=", " ", 
      RowBox[{"MapThread", "[", 
       RowBox[{"IndexProjection", ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"replacementList", "[", 
           RowBox[{"[", 
            RowBox[{"All", ",", "1"}], "]"}], "]"}], ",", 
          RowBox[{"Map", "[", 
           RowBox[{"Head", ",", 
            RowBox[{"replacementList", "[", 
             RowBox[{"[", 
              RowBox[{"All", ",", "2"}], "]"}], "]"}]}], "]"}]}], "}"}]}], 
       "]"}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
      "get", " ", "two", " ", "lists", " ", "with", " ", "bosonic", " ", 
       "and", " ", "fermionic", " ", "fields"}], "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{"fieldTypes", " ", "=", " ", 
      RowBox[{"GetFieldsList", "[", "fields", "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"myEcho", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"\"\<field types: \>\"", ",", " ", "fieldTypes"}], "}"}], ",",
        "4"}], "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
      "define", " ", "the", " ", "possible", " ", "propagators", " ", "for", 
       " ", "fields"}], "*)"}], "\[IndentingNewLine]", 
     RowBox[{"possibleProps", "=", 
      RowBox[{"GetPossibleProps", "[", 
       RowBox[{"fields", ",", "truncation"}], "]"}]}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"{", 
           RowBox[{
            RowBox[{"sortedDiags", "[", 
             RowBox[{"[", "#", "]"}], "]"}], ",", " ", 
            RowBox[{"combinedIndexConfigs", "[", 
             RowBox[{"[", "#", "]"}], "]"}], ",", " ", 
            RowBox[{"appliedDiags", "[", 
             RowBox[{"[", "#", "]"}], "]"}]}], "}"}], " ", "=", 
          RowBox[{"GetSingleDiagram", "[", 
           RowBox[{
            RowBox[{"RHS", "[", 
             RowBox[{"[", "#", "]"}], "]"}], ",", "derivativelist", ",", 
            "internalreplacementList", ",", "fields", ",", " ", "fieldTypes", 
            ",", " ", "possibleProps", ",", "truncation"}], "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"myEcho", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"\"\<Diagramtype number: \>\"", ",", "#"}], "}"}], ",", 
           "1"}], "]"}], ";"}], ")"}], "&"}], "/@", 
      RowBox[{"Table", "[", 
       RowBox[{"i", ",", 
        RowBox[{"{", 
         RowBox[{"i", ",", "1", ",", 
          RowBox[{"Length", "@", "RHS"}]}], "}"}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"Return", "[", 
      RowBox[{"Flatten", "[", 
       RowBox[{
        RowBox[{"appliedDiags", "/.", 
         RowBox[{"\"\<dummyEntry\>\"", "\[Rule]", "Nothing"}]}], ",", "1"}], 
       "]"}], "]"}]}]}], "\[IndentingNewLine]", "]"}]}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.7713124316617365`*^9, 3.7713124330854087`*^9}, {
   3.771312616831592*^9, 3.771312651272864*^9}, {3.7713127314115543`*^9, 
   3.7713127568881807`*^9}, {3.7713128691179895`*^9, 3.771312934217069*^9}, {
   3.7713130841667414`*^9, 3.771313084825262*^9}, {3.771313367838083*^9, 
   3.7713133699903917`*^9}, 3.7713203788468676`*^9, {3.7713205083025756`*^9, 
   3.771320527256234*^9}, {3.7713205860623364`*^9, 3.7713206131256*^9}, {
   3.771320710419339*^9, 3.7713207614065037`*^9}, {3.771321074720393*^9, 
   3.7713210932338057`*^9}, {3.771321132699417*^9, 3.7713211556102476`*^9}, 
   3.772957806891668*^9, {3.7730472918509*^9, 3.7730472923873043`*^9}, {
   3.7735489124520016`*^9, 3.7735489134521255`*^9}, {3.7735530530742316`*^9, 
   3.7735531184066896`*^9}, {3.7735544195373783`*^9, 3.773554423529963*^9}, {
   3.773554503840926*^9, 3.7735545262338886`*^9}, {3.773554930462525*^9, 
   3.7735549405236893`*^9}, {3.773555184585867*^9, 3.773555233391699*^9}, {
   3.773555302021113*^9, 3.7735553262709727`*^9}, {3.77355536799504*^9, 
   3.77355536836217*^9}, {3.774590690862328*^9, 3.7745906918155313`*^9}, {
   3.774591672125086*^9, 3.7745916761410437`*^9}, {3.774592225600184*^9, 
   3.7745922674651613`*^9}, {3.7745923029388933`*^9, 3.774592304072832*^9}, {
   3.774595579850787*^9, 3.7745955843705406`*^9}, {3.7745999022412057`*^9, 
   3.7745999064770403`*^9}, {3.7745999777890716`*^9, 
   3.7746000269121804`*^9}, {3.774600164179346*^9, 3.774600187804551*^9}, {
   3.7746002178462896`*^9, 3.774600230039377*^9}, {3.774600354927863*^9, 
   3.774600388399201*^9}, {3.77460177891945*^9, 3.774601793465997*^9}, 
   3.7752081364945154`*^9, {3.7752096938922415`*^9, 3.7752097011132317`*^9}},
 CellLabel->
  "In[113]:=",ExpressionUUID->"2f19b05e-4f06-403a-a48e-16e1a4245893"],

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
  "\[IndentingNewLine]", "\[IndentingNewLine]"}]], "Input",
 CellChangeTimes->{{3.7713205698592153`*^9, 3.7713205705393953`*^9}, 
   3.7746018705573206`*^9},
 CellLabel->
  "In[115]:=",ExpressionUUID->"14e68441-a250-439c-862d-921bdb50252e"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"Clear", "[", "GetSingleDiagram", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"GetSingleDiagram", "[", 
    RowBox[{
    "RHSDiagram_", ",", "derivativelist_", ",", "replacementList_", ",", 
     "fields_", ",", "fieldTypes_", ",", "possibleProps_", ",", 
     "truncation___"}], "]"}], " ", ":=", " ", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "positionProps", ",", "positionReg", ",", "positionBRST", ",", " ", 
       "positionVertex", ",", " ", "mappingOfIndices", ",", " ", 
       "numberOfProps", ",", "possibleRegulators", ",", "BRSTfieldNames", ",",
        " ", "TotalBRSTIndexSummation", ",", "regIndiceszero", ",", 
       "regIndices", ",", "propIndiceszero", ",", " ", "propIndices", ",", 
       " ", "combinedIndexConfigs", ",", "combinedIndexConfigsNew", ",", " ", 
       "BRSTIndiceszero", ",", " ", "BRSTIndices", ",", "vertexIndiceszero", 
       ",", "vertexIndices", ",", "newPropIndices", ",", " ", "newRegIndices",
        ",", "newVertexIndices", ",", "newBRSTIndices", ",", "sortedDiag", 
       ",", "appliedDiag"}], "}"}], ",", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"myEcho", "[", 
       RowBox[{"\"\<GetSingleDiagram\>\"", ",", "1"}], "]"}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "get", " ", "possible", " ", "index", " ", "configs", " ", "for", " ", 
        "prop", " ", "and", " ", "get", " ", "position", " ", "of", " ", 
        "regulator", " ", "and", " ", "brst", " ", "term"}], "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
        "positionProps", ",", "positionReg", ",", "positionBRST", ",", " ", 
         "positionVertex", ",", " ", "mappingOfIndices", ",", " ", 
         "numberOfProps"}], "}"}], " ", "=", 
       RowBox[{"GetPossPropConfigs", "[", 
        RowBox[{"RHSDiagram", ",", " ", "possibleProps"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"myEcho", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
         "\"\<prop, reg, brst, vertex position: \>\"", ",", "positionProps", 
          ",", "positionReg", ",", "positionBRST", ",", " ", 
          "positionVertex"}], "}"}], ",", "2"}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"possibleRegulators", " ", "=", " ", "possibleProps"}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "define", " ", "the", " ", "BRST", " ", "field", " ", "name", " ", 
        "vector", " ", "and", " ", "the", " ", "possible", " ", "index", " ", 
        "configs", " ", "for", " ", "the", " ", "brst", " ", "index"}], 
       "*)"}], "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Length", "@", "positionBRST"}], ">", "0"}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"TotalBRSTIndexSummation", " ", "=", " ", 
          RowBox[{"GetPossBRSTConfigs", "[", 
           RowBox[{"RHSDiagram", ",", " ", "fields", ",", "positionBRST"}], 
           "]"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"combinedIndexConfigs", " ", "=", " ", 
          RowBox[{"ArrayReshape", "[", 
           RowBox[{
            RowBox[{"Tuples", "[", 
             RowBox[{"{", 
              RowBox[{"mappingOfIndices", ",", "TotalBRSTIndexSummation"}], 
              "}"}], "]"}], ",", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{
               RowBox[{"Length", "@", "mappingOfIndices"}], "*", 
               RowBox[{"Length", "@", "TotalBRSTIndexSummation"}]}], ",", " ", 
              RowBox[{
               RowBox[{"Length", "@", 
                RowBox[{"mappingOfIndices", "[", 
                 RowBox[{"[", "1", "]"}], "]"}]}], "+", 
               RowBox[{"Length", "@", 
                RowBox[{"TotalBRSTIndexSummation", "[", 
                 RowBox[{"[", "1", "]"}], "]"}]}]}]}], "}"}]}], "]"}]}], ";", 
         "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{"(*", " ", 
          RowBox[{
           RowBox[{
            RowBox[{
            "Join", " ", "derivative", " ", "List", " ", "Index", " ", 
             "Configs", " ", "with", " ", "Prop"}], " ", "&"}], " ", "BRST", 
           " ", "Index", " ", "Configs"}], " ", "*)"}], "\[IndentingNewLine]", 
         RowBox[{"combinedIndexConfigs", " ", "=", " ", 
          RowBox[{
           RowBox[{
            RowBox[{"Join", "[", 
             RowBox[{
              RowBox[{"combinedIndexConfigs", "[", 
               RowBox[{"[", "#", "]"}], "]"}], ",", "replacementList"}], 
             "]"}], "&"}], "/@", 
           RowBox[{"Table", "[", 
            RowBox[{"i", ",", 
             RowBox[{"{", 
              RowBox[{"i", ",", "1", ",", 
               RowBox[{"Length", "@", "combinedIndexConfigs"}]}], "}"}]}], 
            "]"}]}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
         "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{"BRSTIndiceszero", " ", "=", " ", 
          RowBox[{
           RowBox[{
            RowBox[{"(", 
             RowBox[{"RHSDiagram", "[", 
              RowBox[{"[", 
               RowBox[{"#", ",", "\"\<indices\>\""}], "]"}], "]"}], ")"}], 
            "&"}], "/@", "positionBRST"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"BRSTIndices", " ", "=", " ", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{"(", 
              RowBox[{
               RowBox[{
                RowBox[{"RHSDiagram", "[", 
                 RowBox[{"[", "#", "]"}], "]"}], "&"}], "/@", 
               "positionBRST"}], ")"}], "/.", "combinedIndexConfigs"}], ")"}],
            "[", 
           RowBox[{"[", 
            RowBox[{"All", ",", "1", ",", "\"\<indices\>\"", ",", "1"}], 
            "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"myEcho", "[", 
          RowBox[{"\"\<BRST indices\>\"", ",", "2"}], "]"}], ";"}], 
        "\[IndentingNewLine]", "\[IndentingNewLine]", ",", 
        "\[IndentingNewLine]", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"combinedIndexConfigs", " ", "=", " ", "mappingOfIndices"}], 
         ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{"combinedIndexConfigs", " ", "=", " ", 
          RowBox[{
           RowBox[{
            RowBox[{"Join", "[", 
             RowBox[{
              RowBox[{"combinedIndexConfigs", "[", 
               RowBox[{"[", "#", "]"}], "]"}], ",", "replacementList"}], 
             "]"}], "&"}], "/@", 
           RowBox[{"Table", "[", 
            RowBox[{"i", ",", 
             RowBox[{"{", 
              RowBox[{"i", ",", "1", ",", 
               RowBox[{"Length", "@", "combinedIndexConfigs"}]}], "}"}]}], 
            "]"}]}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{"BRSTIndiceszero", " ", "=", " ", 
          RowBox[{"(*", 
           RowBox[{"Table", "[", 
            RowBox[{
             RowBox[{"{", "}"}], ",", 
             RowBox[{"Length", "@", "combinedIndexConfigs"}]}], "]"}], "*)"}], 
          RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"BRSTIndices", " ", "=", " ", 
          RowBox[{"Table", "[", 
           RowBox[{
            RowBox[{"{", "}"}], ",", 
            RowBox[{"Length", "@", "combinedIndexConfigs"}]}], "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"myEcho", "[", 
          RowBox[{"\"\<no BRSTs\>\"", ",", "2"}], "]"}]}]}], 
       "\[IndentingNewLine]", "\[IndentingNewLine]", "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"myEcho", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"\"\<BRST indices: \>\"", ",", "BRSTIndices"}], "}"}], ",", 
        "4"}], "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"myEcho", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"\"\<comb indices: \>\"", ",", "combinedIndexConfigs"}], 
         "}"}], ",", "4"}], "]"}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "put", " ", "all", " ", "below", " ", "this", " ", "into", " ", 
        "separate", " ", "function"}], "*)"}], "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "kicks", " ", "out", " ", "impossible", " ", "BRST", " ", "nPoints", 
        " ", "and", " ", "Regulators"}], "*)"}], "\[IndentingNewLine]", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Length", "@", "positionReg"}], ">", "0"}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"regIndiceszero", " ", "=", " ", 
          RowBox[{"RHSDiagram", "[", 
           RowBox[{"[", 
            RowBox[{"positionReg", ",", "\"\<indices\>\""}], "]"}], "]"}]}], 
         ";", "\[IndentingNewLine]", 
         RowBox[{"regIndices", " ", "=", " ", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{"RHSDiagram", "[", 
              RowBox[{"[", "positionReg", "]"}], "]"}], "/.", 
             "combinedIndexConfigs"}], ")"}], "[", 
           RowBox[{"[", 
            RowBox[{"All", ",", "1", ",", "\"\<indices\>\""}], "]"}], "]"}]}],
          ";", "\[IndentingNewLine]", 
         RowBox[{"myEcho", "[", 
          RowBox[{"\"\<Reg indices\>\"", ",", "2"}], "]"}], ";"}], 
        "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"regIndiceszero", " ", "=", " ", 
          RowBox[{"(*", 
           RowBox[{"Table", "[", 
            RowBox[{
             RowBox[{"{", "}"}], ",", 
             RowBox[{"Length", "@", "combinedIndexConfigs"}]}], "]"}], "*)"}], 
          RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"regIndices", " ", "=", " ", 
          RowBox[{"Table", "[", 
           RowBox[{
            RowBox[{"{", "}"}], ",", 
            RowBox[{"Length", "@", "combinedIndexConfigs"}]}], "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"myEcho", "[", 
          RowBox[{"\"\<no Regs\>\"", ",", "2"}], "]"}], ";"}]}], 
       "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"myEcho", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"\"\<Reg indices: \>\"", ",", "regIndices"}], "}"}], ",", 
        "4"}], "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Length", "@", "positionProps"}], ">", "0"}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"propIndiceszero", " ", "=", " ", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{
             RowBox[{"RHSDiagram", "[", 
              RowBox[{"[", 
               RowBox[{"#", ",", "\"\<indices\>\""}], "]"}], "]"}], "&"}], "/@",
             "positionProps"}], ")"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"propIndices", "=", " ", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{"(", 
              RowBox[{
               RowBox[{
                RowBox[{"RHSDiagram", "[", 
                 RowBox[{"[", 
                  RowBox[{"#", ",", "\"\<indices\>\""}], "]"}], "]"}], "&"}], 
               "/@", "positionProps"}], ")"}], "/.", "combinedIndexConfigs"}],
             ")"}], "[", 
           RowBox[{"[", 
            RowBox[{"All", ",", "All"}], "]"}], "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"myEcho", "[", 
          RowBox[{"\"\<Prop indices\>\"", ",", "2"}], "]"}], ";"}], 
        "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"propIndiceszero", " ", "=", " ", 
          RowBox[{"(*", 
           RowBox[{"Table", "[", 
            RowBox[{
             RowBox[{"{", "}"}], ",", 
             RowBox[{"Length", "@", "combinedIndexConfigs"}]}], "]"}], "*)"}], 
          RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"propIndices", " ", "=", " ", 
          RowBox[{"Table", "[", 
           RowBox[{
            RowBox[{"{", "}"}], ",", 
            RowBox[{"Length", "@", "combinedIndexConfigs"}]}], "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"myEcho", "[", 
          RowBox[{"\"\<no Props\>\"", ",", "2"}], "]"}], ";"}]}], 
       "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"myEcho", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"\"\<Prop indices: \>\"", ",", "propIndices"}], "}"}], ",", 
        "4"}], "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"vertexIndiceszero", " ", "=", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"RHSDiagram", "[", 
           RowBox[{"[", 
            RowBox[{"#", ",", "\"\<indices\>\""}], "]"}], "]"}], "&"}], "/@", 
         "positionVertex"}], ")"}]}], ";", "\[IndentingNewLine]", " ", 
      RowBox[{"(*", 
       RowBox[{
       "gets", " ", "the", " ", "indices", " ", "of", " ", "the", " ", 
        "vertices"}], "*)"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"vertexIndices", " ", "=", " ", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"RHSDiagram", "[", 
            RowBox[{"[", 
             RowBox[{"#", ",", "\"\<indices\>\""}], "]"}], "]"}], "&"}], "/@",
           "positionVertex"}], "/.", "combinedIndexConfigs"}], ")"}]}], ";", 
      RowBox[{"(*", "*)"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"myEcho", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"\"\<Vertex indices: \>\"", ",", "vertexIndices"}], "}"}], 
        ",", "4"}], "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "Get", " ", "overall", " ", "combinations", " ", "of", " ", "indices", 
        " ", "from", " ", "BRST", " ", "and", " ", 
        RowBox[{"Reg", "."}]}], "*)"}], "\[IndentingNewLine]", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
        RowBox[{
        "kick", " ", "out", " ", "all", " ", "impossible", " ", "regulator"}],
         ",", " ", 
        RowBox[{"vertex", " ", "and", " ", "BRST", " ", "indices"}]}], "*)"}],
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{
      "combinedIndexConfigsNew", " ", "=", " ", "combinedIndexConfigs"}], ";",
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{
           RowBox[{"combinedIndexConfigsNew", "[", 
            RowBox[{"[", "#", "]"}], "]"}], "=", 
           RowBox[{"CheckVertexConfig", "[", 
            RowBox[{"fields", ",", 
             RowBox[{"regIndices", "[", 
              RowBox[{"[", "#", "]"}], "]"}], ",", " ", 
             RowBox[{"BRSTIndices", "[", 
              RowBox[{"[", "#", "]"}], "]"}], ",", 
             RowBox[{"vertexIndices", "[", 
              RowBox[{"[", "#", "]"}], "]"}], ",", 
             RowBox[{"combinedIndexConfigs", "[", 
              RowBox[{"[", "#", "]"}], "]"}], ",", "possibleRegulators"}], 
            "]"}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"myEcho", "[", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"\"\<config no. \>\"", ",", " ", "#"}], "}"}], ",", 
            "3"}], "]"}], ";"}], ")"}], "&"}], "/@", 
       RowBox[{"Table", "[", 
        RowBox[{"i", ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "1", ",", 
           RowBox[{"Length", "@", "combinedIndexConfigs"}]}], "}"}]}], 
        "]"}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"combinedIndexConfigsNew", " ", "=", " ", 
       RowBox[{"combinedIndexConfigsNew", "/.", 
        RowBox[{"\"\<dummyEntry\>\"", "\[Rule]", "Nothing"}]}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"combinedIndexConfigsNew", " ", "\[Equal]", " ", 
         RowBox[{"{", "}"}]}], ",", " ", 
        RowBox[{"(*", 
         RowBox[{
         "sort", " ", "the", " ", "vertices", " ", "and", " ", "regs", " ", 
          "in", " ", "default", " ", "ordering"}], "*)"}], 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"myEcho", "[", 
          RowBox[{"\"\<no possible configs for this diagram\>\"", ",", "2"}], 
          "]"}], ";", "\[IndentingNewLine]", 
         RowBox[{"Return", "[", 
          RowBox[{"{", 
           RowBox[{
           "\"\<dummyEntry\>\"", ",", "\"\<dummyEntry\>\"", ",", 
            "\"\<dummyEntry\>\""}], "}"}], "]"}], ";"}], 
        "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"myEcho", "[", 
          RowBox[{
          "\"\<sort possible configs for this diagram\>\"", ",", "2"}], "]"}],
          ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"sortedDiag", ",", " ", "appliedDiag"}], "}"}], " ", "=", 
          " ", 
          RowBox[{"SortDiags", "[", 
           RowBox[{
           "RHSDiagram", ",", "combinedIndexConfigsNew", ",", 
            "propIndiceszero", ",", " ", "positionProps", ",", 
            "regIndiceszero", ",", "positionReg", ",", " ", 
            "vertexIndiceszero", ",", " ", "positionVertex", ",", " ", 
            "BRSTIndiceszero", ",", "positionBRST", ",", "fields"}], "]"}]}], 
         ";", "\[IndentingNewLine]", 
         RowBox[{"Return", "[", 
          RowBox[{"{", 
           RowBox[{
           "sortedDiag", ",", " ", "combinedIndexConfigsNew", ",", 
            "appliedDiag"}], "}"}], "]"}], ";"}]}], "\[IndentingNewLine]", 
       "]"}], ";"}]}], "\[IndentingNewLine]", "\[IndentingNewLine]", "]"}]}], 
  ";"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.771320529924098*^9, 3.7713205786581707`*^9}, {
   3.771321101062866*^9, 3.7713211227081404`*^9}, 3.7729585004692545`*^9, {
   3.77303701450029*^9, 3.773037023123743*^9}, {3.7730404851746407`*^9, 
   3.773040510578351*^9}, {3.7730410207054296`*^9, 3.773041022214722*^9}, {
   3.7730410654767923`*^9, 3.77304107399401*^9}, {3.7730461877869143`*^9, 
   3.773046188017314*^9}, {3.7730462267019014`*^9, 3.773046827934461*^9}, {
   3.773047039904888*^9, 3.773047151119226*^9}, {3.773047188465002*^9, 
   3.773047236393633*^9}, {3.7730473067911797`*^9, 3.77304734538173*^9}, {
   3.7730473880592513`*^9, 3.773047397966155*^9}, {3.7730498414199567`*^9, 
   3.7730498430638976`*^9}, {3.773124057904917*^9, 3.7731240828517466`*^9}, {
   3.7731242995125847`*^9, 3.77312430311524*^9}, {3.773124344494413*^9, 
   3.773124385791293*^9}, {3.773124560666318*^9, 3.7731245802646656`*^9}, {
   3.773124632776354*^9, 3.7731246545023527`*^9}, {3.7731251754893575`*^9, 
   3.773125235056131*^9}, {3.7731254530716953`*^9, 3.7731254968393826`*^9}, {
   3.7731256201965766`*^9, 3.773125643191763*^9}, {3.773125819643803*^9, 
   3.7731258198778477`*^9}, {3.773126044770235*^9, 3.7731260481589317`*^9}, {
   3.773126378096027*^9, 3.773126383979585*^9}, {3.7731271134940195`*^9, 
   3.7731271161599007`*^9}, {3.7731271964997053`*^9, 
   3.7731272046386967`*^9}, {3.773128343833809*^9, 3.773128393556587*^9}, {
   3.7733824327373*^9, 3.773382570808605*^9}, {3.7733826507877913`*^9, 
   3.7733826821830363`*^9}, {3.7733827516678295`*^9, 3.773382792944217*^9}, {
   3.773383165494769*^9, 3.7733832319202757`*^9}, {3.7733833196488123`*^9, 
   3.773383337366949*^9}, 3.773384324712736*^9, {3.7733845309281087`*^9, 
   3.7733845680645843`*^9}, {3.7733847982264853`*^9, 
   3.7733848453894053`*^9}, {3.773384903015944*^9, 3.7733850146263475`*^9}, {
   3.773385052858621*^9, 3.773385060312704*^9}, {3.7733856181656303`*^9, 
   3.773385618681134*^9}, {3.773385651512738*^9, 3.7733856660480127`*^9}, {
   3.7733857691158624`*^9, 3.77338576927207*^9}, {3.7733864184893703`*^9, 
   3.7733864398031826`*^9}, {3.773386600646558*^9, 3.77338661558712*^9}, {
   3.7733910915628953`*^9, 3.7733911099241877`*^9}, {3.7733959688849273`*^9, 
   3.7733959981207623`*^9}, {3.773396343366645*^9, 3.773396407966917*^9}, {
   3.77339645127248*^9, 3.773396456932314*^9}, {3.773396491655469*^9, 
   3.773396697423503*^9}, {3.7733967707185273`*^9, 3.7733967820093374`*^9}, 
   3.77339831592064*^9, {3.773398846906296*^9, 3.773398848200839*^9}, 
   3.7733994677562933`*^9, {3.7733994998774076`*^9, 3.773399547646719*^9}, {
   3.773399886834319*^9, 3.7733998889785895`*^9}, {3.7735485470308695`*^9, 
   3.7735485782354436`*^9}, {3.7735488679897065`*^9, 
   3.7735488752799425`*^9}, {3.7735518721444535`*^9, 
   3.7735518905383887`*^9}, {3.773552462238714*^9, 3.7735525135075016`*^9}, {
   3.7735528544922185`*^9, 3.77355291461345*^9}, {3.7735531248431015`*^9, 
   3.7735531445381536`*^9}, {3.7735544666399374`*^9, 3.773554474814639*^9}, {
   3.7735547747647533`*^9, 3.77355484384435*^9}, {3.7735552477506266`*^9, 
   3.7735552487219615`*^9}, {3.774592295910103*^9, 3.7745922975856247`*^9}, {
   3.774593595072666*^9, 3.7745935953706484`*^9}, {3.7745951753058043`*^9, 
   3.774595180025103*^9}, {3.7745954516793165`*^9, 3.7745954532577033`*^9}, {
   3.7745954839304533`*^9, 3.774595535258628*^9}, {3.7745996845527906`*^9, 
   3.7745997043621473`*^9}, {3.7745999104900384`*^9, 3.774599917490864*^9}, {
   3.774600247009281*^9, 3.7746002900700283`*^9}, {3.7746008626585603`*^9, 
   3.7746009057552085`*^9}, {3.774601718038573*^9, 3.774601719425886*^9}, {
   3.7752007115046697`*^9, 3.775200715289214*^9}, {3.7752083215783167`*^9, 
   3.7752083296572285`*^9}, {3.77520844058544*^9, 3.77520845466463*^9}, {
   3.775209453755915*^9, 3.7752094595500436`*^9}},
 CellLabel->
  "In[116]:=",ExpressionUUID->"a64318df-00db-4137-88dd-2e6510e32369"],

Cell[BoxData[{
 RowBox[{"Clear", "[", "SwitchSuperindexReplacementList", 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SwitchSuperindexReplacementList", "[", "replacementList_", "]"}], 
  " ", ":=", " ", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"superindexReplacementList", " ", "=", " ", 
      RowBox[{"Table", "[", 
       RowBox[{"Null", ",", 
        RowBox[{"Length", "@", "replacementList"}]}], "]"}]}], "}"}], ",", 
    "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"(", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{
          RowBox[{"superindexReplacementList", "[", 
           RowBox[{"[", "#", "]"}], "]"}], " ", "=", " ", 
          RowBox[{"IndexProjection", "[", 
           RowBox[{
            RowBox[{"replacementList", "[", 
             RowBox[{"[", 
              RowBox[{"#", ",", "1"}], "]"}], "]"}], ",", 
            RowBox[{"List", "@@", 
             RowBox[{"replacementList", "[", 
              RowBox[{"[", 
               RowBox[{"#", ",", "2"}], "]"}], "]"}]}]}], "]"}]}], ";"}], 
        "\[IndentingNewLine]", ")"}], "&"}], "/@", 
      RowBox[{"Table", "[", 
       RowBox[{"i", ",", 
        RowBox[{"{", 
         RowBox[{"i", ",", "1", ",", 
          RowBox[{"Length", "@", "replacementList"}]}], "}"}]}], "]"}]}], ";",
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"Return", "[", "superindexReplacementList", "]"}]}]}], 
   "\[IndentingNewLine]", "]"}]}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.7713124316617365`*^9, 3.7713124330854087`*^9}, {
   3.771312616831592*^9, 3.771312651272864*^9}, {3.7713127314115543`*^9, 
   3.7713127568881807`*^9}, {3.7713128691179895`*^9, 3.771312934217069*^9}, {
   3.7713130841667414`*^9, 3.771313084825262*^9}, {3.771313367838083*^9, 
   3.7713133699903917`*^9}, 3.7713203788468676`*^9, {3.7713205083025756`*^9, 
   3.771320527256234*^9}, {3.7713205860623364`*^9, 3.7713206131256*^9}, {
   3.771320710419339*^9, 3.7713207614065037`*^9}, {3.771321074720393*^9, 
   3.7713210932338057`*^9}, {3.771321132699417*^9, 3.7713211556102476`*^9}, 
   3.772957806891668*^9, {3.7730472918509*^9, 3.7730472923873043`*^9}, {
   3.7735489124520016`*^9, 3.7735489134521255`*^9}, {3.7735530530742316`*^9, 
   3.7735531184066896`*^9}, {3.7735544195373783`*^9, 3.773554423529963*^9}, {
   3.773554503840926*^9, 3.7735545262338886`*^9}, {3.773554930462525*^9, 
   3.7735549405236893`*^9}, {3.773555184585867*^9, 3.773555233391699*^9}, {
   3.773555302021113*^9, 3.7735553262709727`*^9}, {3.77355536799504*^9, 
   3.77355536836217*^9}, {3.774590690862328*^9, 3.7745906918155313`*^9}, {
   3.774591672125086*^9, 3.7745916761410437`*^9}, {3.774592225600184*^9, 
   3.7745922674651613`*^9}, {3.7745923029388933`*^9, 3.774592304072832*^9}, {
   3.774595579850787*^9, 3.7745955843705406`*^9}, {3.7745999022412057`*^9, 
   3.7745999064770403`*^9}, {3.7745999777890716`*^9, 
   3.7746000269121804`*^9}, {3.774600164179346*^9, 3.774600187804551*^9}, {
   3.7746002178462896`*^9, 3.774600230039377*^9}, {3.774600354927863*^9, 
   3.774600388399201*^9}, {3.77460177891945*^9, 3.774601793465997*^9}, 
   3.7752081364945154`*^9, {3.7752096938922415`*^9, 3.7752097011132317`*^9}, {
   3.7752108125044317`*^9, 3.7752108472301474`*^9}, {3.7752108945154996`*^9, 
   3.7752109358473363`*^9}, {3.7752109919129515`*^9, 
   3.7752110119771767`*^9}, {3.7752112479697676`*^9, 3.775211267065935*^9}},
 CellLabel->
  "In[118]:=",ExpressionUUID->"65c8905a-e2a9-4374-8eb3-bf49e4358595"]
}, Open  ]]
}, Open  ]]
},
WindowSize->{1920, 997},
WindowMargins->{{Automatic, 1272}, {404, Automatic}},
Magnification:>0.9 Inherited,
FrontEndVersion->"12.0 for Microsoft Windows (64-bit) (April 8, 2019)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 702, 10, 62, "Chapter",ExpressionUUID->"b98c3e8f-4eca-40ff-806f-3ea81a0e7196"],
Cell[CellGroupData[{
Cell[1307, 36, 464, 7, 48, "Subsection",ExpressionUUID->"ff81d31d-0933-4ab3-9c86-254d62257156"],
Cell[1774, 45, 4407, 98, 437, "Input",ExpressionUUID->"506542bd-6226-4c34-a8b3-dfa43db88e24"],
Cell[CellGroupData[{
Cell[6206, 147, 345, 5, 26, "Input",ExpressionUUID->"cbfa4478-3a2c-4bd0-980f-858832c39f07"],
Cell[CellGroupData[{
Cell[6576, 156, 155, 3, 22, "Echo",ExpressionUUID->"234bee79-1c1f-43ae-b614-2f0fd3584dc5"],
Cell[6734, 161, 155, 3, 22, "Echo",ExpressionUUID->"a04a8868-595e-48f0-bd81-47f90e025814"],
Cell[6892, 166, 153, 3, 22, "Echo",ExpressionUUID->"4c24b048-7ca1-41b7-8343-3dce9fd08337"],
Cell[7048, 171, 155, 3, 22, "Echo",ExpressionUUID->"6d0d0558-04e9-4074-a0df-94f0c05d914c"],
Cell[7206, 176, 155, 3, 22, "Echo",ExpressionUUID->"1ecc0cee-11a1-434f-987c-489ee9e70022"],
Cell[7364, 181, 155, 3, 22, "Echo",ExpressionUUID->"b1ff7401-6775-48bd-8e65-04736a98ff8c"],
Cell[7522, 186, 155, 3, 22, "Echo",ExpressionUUID->"85ebd1f5-a186-4b71-bbb1-6543afc67231"],
Cell[7680, 191, 155, 3, 22, "Echo",ExpressionUUID->"5c692e84-9c8a-4493-a843-ddddd982d5bf"],
Cell[7838, 196, 155, 3, 22, "Echo",ExpressionUUID->"3616237d-462b-4d40-bdeb-4ec049837f79"],
Cell[7996, 201, 153, 3, 22, "Echo",ExpressionUUID->"e0cd46d3-578c-4d2b-8967-fcb6444ca952"],
Cell[8152, 206, 153, 3, 22, "Echo",ExpressionUUID->"e19c49c9-3773-4d95-974e-163777c8811e"],
Cell[8308, 211, 153, 3, 22, "Echo",ExpressionUUID->"af116a0a-ab06-488d-8345-65c2cd4e4fc4"]
}, Open  ]],
Cell[8476, 217, 1189, 20, 30, "Output",ExpressionUUID->"d0a4d59c-e9ee-47c7-9b5c-800068d7f6c6"]
}, Open  ]],
Cell[9680, 240, 17010, 371, 1265, "Input",ExpressionUUID->"099d0674-c1cf-4a2d-9a40-bf9935dcd066"],
Cell[26693, 613, 12239, 266, 887, "Input",ExpressionUUID->"39be3c02-01d6-440c-ae02-96a7d2b9648e"],
Cell[CellGroupData[{
Cell[38957, 883, 550, 10, 26, "Input",ExpressionUUID->"a73cc2b8-7a25-46f5-9ac9-ad5441920d9f"],
Cell[CellGroupData[{
Cell[39532, 897, 155, 3, 22, "Echo",ExpressionUUID->"b00d1612-a103-4c9f-b5d2-d7879830b949"],
Cell[39690, 902, 183, 5, 22, "Echo",ExpressionUUID->"1cffe5b8-0e11-4993-84bd-ef6f8605a89f"],
Cell[39876, 909, 357, 10, 22, "Echo",ExpressionUUID->"a57c4229-588b-4709-8386-d3fea429b3fd"],
Cell[40236, 921, 488, 15, 22, "Echo",ExpressionUUID->"0291fc72-fa85-4ec4-8488-931bd13a8afa"],
Cell[40727, 938, 185, 5, 22, "Echo",ExpressionUUID->"ae8911e4-4e2d-4ea0-a645-fd87db48dee5"],
Cell[40915, 945, 481, 15, 22, "Echo",ExpressionUUID->"b43886e6-ab6b-466a-a60a-c10561bcf49e"]
}, Open  ]],
Cell[41411, 963, 655, 17, 30, "Output",ExpressionUUID->"34c1e3ca-18d9-4d0d-bf3e-b700f53232e5"]
}, Open  ]],
Cell[42081, 983, 2404, 55, 275, "Input",ExpressionUUID->"2c2b94e8-ca16-4d3e-9d66-0e715494b2ea"],
Cell[44488, 1040, 6500, 135, 491, "Input",ExpressionUUID->"74d864cf-6ccd-4aff-b04b-bc762855f443"],
Cell[CellGroupData[{
Cell[51013, 1179, 423, 9, 26, "Input",ExpressionUUID->"93b4efa5-5c8a-41a6-84fc-f5e5850b2368"],
Cell[51439, 1190, 149, 3, 20, "Echo",ExpressionUUID->"996dc7e4-195b-4bff-9b56-8f4cdbdb8a6e"],
Cell[51591, 1195, 1962, 35, 28, "Output",ExpressionUUID->"6721aa39-28f4-4629-b1df-5b6e4c7b31d9"]
}, Closed]],
Cell[53568, 1233, 1668, 38, 182, "Input",ExpressionUUID->"eb6b065e-1663-42b0-ade1-c4314369aa08"],
Cell[CellGroupData[{
Cell[55261, 1275, 222, 4, 25, "Input",ExpressionUUID->"19c736c7-d160-4113-9429-9ee054ca837a"],
Cell[55486, 1281, 148, 3, 20, "Echo",ExpressionUUID->"3ffd430a-8da4-413c-a320-2ce8ba43fd12"],
Cell[55637, 1286, 1362, 21, 28, "Output",ExpressionUUID->"e4164094-ac8a-4c5f-905c-710fb400883d"]
}, Open  ]],
Cell[57014, 1310, 227, 3, 60, "Input",ExpressionUUID->"35ac357d-41d6-4c8a-ad35-b212bc951c8b"],
Cell[57244, 1315, 11390, 224, 929, "Input",ExpressionUUID->"d9beed58-23ef-46f2-8786-bd232f7ca50b"],
Cell[68637, 1541, 6998, 149, 690, "Input",ExpressionUUID->"fec8847d-9c91-4a70-bf8c-aecd1804fa00"],
Cell[75638, 1692, 15652, 328, 1015, "Input",ExpressionUUID->"b412ee83-8b76-43d3-ab8f-58215d9f45ef"],
Cell[91293, 2022, 9033, 173, 635, "Input",ExpressionUUID->"14c92292-4ba9-4503-b73f-2ac1e1da7c6c"]
}, Closed]],
Cell[CellGroupData[{
Cell[100363, 2200, 455, 7, 34, "Subsection",ExpressionUUID->"05e14ca4-7b78-4f36-9534-7b1fb9fdf540"],
Cell[100821, 2209, 504, 10, 40, "Input",ExpressionUUID->"6d592817-2f3f-4f53-89b7-7b4f2c840ea4",
 InitializationCell->True],
Cell[101328, 2221, 168, 2, 45, "Input",ExpressionUUID->"f0806a16-4b86-4fcb-883d-e679d2f60582"],
Cell[101499, 2225, 4941, 114, 581, "Input",ExpressionUUID->"3c70af3b-c21b-4e6b-aac4-1813fc851a8a",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[106465, 2343, 216, 3, 26, "Input",ExpressionUUID->"936d58b4-a0db-46ec-9413-38b5e343a36f"],
Cell[106684, 2348, 837, 19, 70, "Output",ExpressionUUID->"e6604e20-876e-4ce7-b3c9-fabbb6b34d2c"]
}, Open  ]],
Cell[CellGroupData[{
Cell[107558, 2372, 111, 1, 26, "Input",ExpressionUUID->"e548e78b-d5af-4eca-8492-7b3c5d038298"],
Cell[107672, 2375, 1199, 32, 70, "Output",ExpressionUUID->"9172509e-759c-4e5a-8307-cae960e2d946"]
}, Open  ]],
Cell[108886, 2410, 11052, 237, 941, "Input",ExpressionUUID->"35362821-2334-48fa-9e14-c2da48684ffe",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[119963, 2651, 549, 9, 26, "Input",ExpressionUUID->"cc855bba-c356-4e2f-9918-648967a39e22"],
Cell[120515, 2662, 1101, 20, 70, "Output",ExpressionUUID->"e715fa31-c257-4e9e-bcf8-1a69ba01d1bc"]
}, Open  ]],
Cell[121631, 2685, 165, 2, 45, "Input",ExpressionUUID->"2187b319-0424-43ba-80bc-cce940c9979d"],
Cell[121799, 2689, 14544, 288, 1175, "Input",ExpressionUUID->"e4bbf041-52d8-4555-8ccb-94a4120e2c93",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[136368, 2981, 864, 20, 45, "Input",ExpressionUUID->"300f2718-59a9-4696-9195-828e9f4df6ba"],
Cell[137235, 3003, 10131, 239, 70, "Output",ExpressionUUID->"cf6c1925-02ec-47a5-951d-4a7a4cf9ada7"]
}, Open  ]],
Cell[147381, 3245, 11867, 255, 887, "Input",ExpressionUUID->"a18174f1-58af-4bbc-b154-4abd89eca27e",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[159273, 3504, 773, 16, 26, "Input",ExpressionUUID->"1336cee2-57da-4b61-a21e-cafd8a77d4ac"],
Cell[160049, 3522, 1260, 29, 70, "Output",ExpressionUUID->"b170064c-b3d1-45f1-8a9a-4626cf18b8c3"]
}, Open  ]],
Cell[161324, 3554, 21813, 457, 1805, "Input",ExpressionUUID->"b80a10fd-f844-4510-92c8-adae9c585af9",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[183162, 4015, 1033, 27, 26, "Input",ExpressionUUID->"9e7b7ed0-4223-485e-9bf1-770a93d24def"],
Cell[184198, 4044, 525, 11, 70, "Message",ExpressionUUID->"e3621570-3ec4-48f7-a5e9-bb203f7c4c21"],
Cell[184726, 4057, 329, 4, 70, "Output",ExpressionUUID->"45aea4eb-2716-47fd-9121-bc84dcc40315"]
}, Open  ]],
Cell[185070, 4064, 3600, 83, 275, "Input",ExpressionUUID->"6607ba91-a16e-423e-a158-0390f756e7b1",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[188695, 4151, 597, 15, 26, "Input",ExpressionUUID->"08e53359-a5d9-4e77-b712-1a299f0a74de"],
Cell[189295, 4168, 1849, 34, 70, "Output",ExpressionUUID->"25bb050b-ed48-4bc8-9533-64dbdaf9c258"]
}, Open  ]],
Cell[CellGroupData[{
Cell[191181, 4207, 489, 13, 26, "Input",ExpressionUUID->"2dac4d7f-62c4-4746-950b-672f5bcb9f2e"],
Cell[191673, 4222, 608, 17, 70, "Output",ExpressionUUID->"480b4e55-e4e9-4a24-b707-2b6181ab890e"]
}, Open  ]],
Cell[CellGroupData[{
Cell[192318, 4244, 613, 17, 26, "Input",ExpressionUUID->"85a4f529-606c-428e-a2e5-d57e843a9378"],
Cell[192934, 4263, 753, 22, 70, "Output",ExpressionUUID->"b523805d-1dd0-4507-8bbf-80b33acfed86"]
}, Open  ]],
Cell[193702, 4288, 7152, 156, 599, "Input",ExpressionUUID->"665b7e1d-5b0b-4ba6-9748-d3fd481d973b",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[200879, 4448, 598, 14, 26, "Input",ExpressionUUID->"74ee1aa8-49bf-4ba8-8d49-7b0043a50558"],
Cell[201480, 4464, 1836, 31, 70, "Output",ExpressionUUID->"28317e0a-35be-434d-88f9-a0a68c5bd49c"]
}, Open  ]],
Cell[CellGroupData[{
Cell[203353, 4500, 471, 12, 26, "Input",ExpressionUUID->"51276615-f22c-4bb5-9a8b-27a49a280b81"],
Cell[203827, 4514, 571, 15, 70, "Output",ExpressionUUID->"6a162775-8880-4281-aed9-eb46b39edb48"]
}, Open  ]],
Cell[CellGroupData[{
Cell[204435, 4534, 312, 8, 26, "Input",ExpressionUUID->"168b4c2d-d01a-4595-8d57-268b3e469bf2"],
Cell[204750, 4544, 447, 11, 70, "Output",ExpressionUUID->"dd1ffab6-82d1-4cfe-84c0-172204c59513"]
}, Open  ]],
Cell[205212, 4558, 168, 2, 45, "Input",ExpressionUUID->"84402d02-64b5-436c-95b3-5121496d000b"],
Cell[CellGroupData[{
Cell[205405, 4564, 339, 7, 26, "Input",ExpressionUUID->"c3ba457c-7ea2-49c9-b3b4-465730b05b8b"],
Cell[205747, 4573, 419, 9, 70, "Output",ExpressionUUID->"efeede07-7984-49f9-9c43-1da3eb604344"]
}, Open  ]],
Cell[206181, 4585, 21798, 471, 1301, "Input",ExpressionUUID->"a8064244-ac63-4229-9ee9-5fdd760c68ab",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[228004, 5060, 628, 17, 26, "Input",ExpressionUUID->"ae9628c1-2c1c-48f6-bdf0-de1b2abea181"],
Cell[228635, 5079, 1059, 23, 70, "Output",ExpressionUUID->"b1e43aad-1dd9-4b9a-b89d-a93a107bd260"]
}, Open  ]],
Cell[CellGroupData[{
Cell[229731, 5107, 498, 15, 26, "Input",ExpressionUUID->"708ff577-b53c-4ca4-bf4e-e081d9073419"],
Cell[230232, 5124, 681, 18, 70, "Output",ExpressionUUID->"4f60c437-946e-4210-822e-12b952a59a0b"]
}, Open  ]],
Cell[CellGroupData[{
Cell[230950, 5147, 694, 21, 26, "Input",ExpressionUUID->"f0fe27e4-f3c6-43de-9374-f76467ff39de"],
Cell[231647, 5170, 980, 23, 70, "Output",ExpressionUUID->"21b9a960-995e-47d7-becd-dd47bb019dbc"]
}, Open  ]],
Cell[CellGroupData[{
Cell[232664, 5198, 635, 19, 26, "Input",ExpressionUUID->"4e79a9e9-2758-4b1a-9864-d0bf3c76a99d"],
Cell[233302, 5219, 750, 21, 70, "Output",ExpressionUUID->"290a04dd-00d0-476b-9933-d2a2408083fa"]
}, Open  ]],
Cell[234067, 5243, 6058, 119, 293, "Input",ExpressionUUID->"753a0826-0315-43db-a0e9-5abb755ba7c1",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[240150, 5366, 876, 22, 26, "Input",ExpressionUUID->"c560bd33-7dc0-4228-afd8-d92775f52eb4"],
Cell[241029, 5390, 2141, 37, 70, "Output",ExpressionUUID->"d10fded6-0ded-44e7-af62-ed436442cc4e"]
}, Open  ]],
Cell[CellGroupData[{
Cell[243207, 5432, 648, 19, 26, "Input",ExpressionUUID->"6e12bedf-554c-44cd-a443-33106257a88b"],
Cell[243858, 5453, 554, 15, 70, "Output",ExpressionUUID->"b37ec19c-6907-415f-a124-aaf8aa712990"]
}, Open  ]],
Cell[244427, 5471, 24607, 476, 1553, "Input",ExpressionUUID->"55b488ad-7734-4cea-b0c6-176fdbe05927",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[269059, 5951, 601, 14, 26, "Input",ExpressionUUID->"37b6281b-d65a-47f2-b520-1808c8cee44b"],
Cell[269663, 5967, 878, 19, 70, "Output",ExpressionUUID->"d09d0790-d8ad-4fa2-896d-bd45844ef31b"]
}, Open  ]],
Cell[CellGroupData[{
Cell[270578, 5991, 485, 11, 26, "Input",ExpressionUUID->"b10ec5be-3789-4381-80fa-f8851e1d6073"],
Cell[271066, 6004, 510, 13, 70, "Output",ExpressionUUID->"ea12af79-67cf-4f91-a996-79c107748e16"]
}, Open  ]],
Cell[271591, 6020, 168, 2, 45, "Input",ExpressionUUID->"fe3a5469-111f-4e82-9a2c-5a5200489f2c"],
Cell[CellGroupData[{
Cell[271784, 6026, 499, 12, 26, "Input",ExpressionUUID->"6507e5bb-79a6-4c5c-8412-aa9130dfc077"],
Cell[272286, 6040, 941, 19, 70, "Output",ExpressionUUID->"9247ed82-32fc-4cb1-8d85-1140824625cd"]
}, Open  ]],
Cell[CellGroupData[{
Cell[273264, 6064, 491, 12, 26, "Input",ExpressionUUID->"1ecad94e-7dda-4d14-a6b0-45618f6613ad"],
Cell[273758, 6078, 730, 17, 70, "Output",ExpressionUUID->"8ed56949-51d6-4396-8013-0e9c5c16be65"]
}, Open  ]],
Cell[CellGroupData[{
Cell[274525, 6100, 978, 21, 26, "Input",ExpressionUUID->"8ed2b186-292a-445c-9e42-b7f5b7806972"],
Cell[275506, 6123, 1041, 27, 70, "Output",ExpressionUUID->"6757036e-9251-476c-885a-bd4d62b336e9"]
}, Open  ]],
Cell[CellGroupData[{
Cell[276584, 6155, 2470, 66, 45, "Input",ExpressionUUID->"c3cf2e1b-3973-4e68-ae77-6e72180d4e01"],
Cell[279057, 6223, 446, 6, 70, "Output",ExpressionUUID->"1a1d7b27-db11-48b8-87e6-5da980551e01"]
}, Open  ]],
Cell[279518, 6232, 8705, 184, 779, "Input",ExpressionUUID->"07a2b171-7a56-44e6-8f0f-ff790cfeafa1",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[288248, 6420, 1324, 31, 26, "Input",ExpressionUUID->"1ee9ef49-d41a-4c9b-8471-69d32a839297"],
Cell[289575, 6453, 1233, 34, 70, "Output",ExpressionUUID->"2855cee0-9c63-4c56-b971-7352f2c6ce24"]
}, Open  ]],
Cell[290823, 6490, 11910, 188, 311, "Input",ExpressionUUID->"6b5e807f-3a7b-47e5-b800-7ab498baaf84",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[302758, 6682, 449, 11, 26, "Input",ExpressionUUID->"88c49568-1438-465c-8549-44f7d515b17f"],
Cell[303210, 6695, 668, 15, 70, "Output",ExpressionUUID->"48752bd9-b215-4b19-a3ad-7651fb24c337"]
}, Open  ]],
Cell[CellGroupData[{
Cell[303915, 6715, 737, 15, 26, "Input",ExpressionUUID->"19494227-a302-40ad-9161-cad50a64b0c0"],
Cell[304655, 6732, 710, 16, 70, "Output",ExpressionUUID->"f3133056-cb72-49dd-9a22-06f206a9c5bf"]
}, Open  ]],
Cell[305380, 6751, 9986, 192, 725, "Input",ExpressionUUID->"9483a750-b7a8-477f-8cef-e1a31d0c58fc",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[315391, 6947, 830, 21, 26, "Input",ExpressionUUID->"2486e501-4d2c-4b8a-964c-fac0eaddc2af"],
Cell[316224, 6970, 617, 10, 70, "Output",ExpressionUUID->"71c2f524-570f-4137-9701-7d593198356c"]
}, Open  ]],
Cell[316856, 6983, 15820, 299, 1175, "Input",ExpressionUUID->"40930656-c71e-4f51-be22-434bcc7ff1ad",
 InitializationCell->True],
Cell[332679, 7284, 26369, 508, 2309, "Input",ExpressionUUID->"11b32252-4c25-4995-8309-7adef2e3d547",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[359073, 7796, 4967, 133, 155, "Input",ExpressionUUID->"e5828fcd-1504-4ca5-9b6e-06260910e31a"],
Cell[364043, 7931, 3560, 95, 70, "Output",ExpressionUUID->"9c30ac40-46fd-4dfa-8a15-28b454761db3"]
}, Open  ]],
Cell[367618, 8029, 12692, 209, 293, "Input",ExpressionUUID->"5a37e707-5430-4c0d-900d-4e31ef2accf2",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[380335, 8242, 6388, 161, 191, "Input",ExpressionUUID->"b1fb7131-20f6-47ec-bf02-89c4e64c237e"],
Cell[386726, 8405, 20939, 519, 70, "Output",ExpressionUUID->"76b8a5e3-b336-47f5-8e4f-4bb0aabb4185"]
}, Open  ]],
Cell[407680, 8927, 282, 5, 96, "Input",ExpressionUUID->"372a02a5-f942-4f6a-84aa-881f7d7cf463"],
Cell[407965, 8934, 205, 4, 26, "Input",ExpressionUUID->"31dec233-801a-424e-9792-7cbe3e258c69"],
Cell[408173, 8940, 309, 5, 63, "Input",ExpressionUUID->"4c70f327-8d7a-4e51-9756-d7be373d20a9"],
Cell[408485, 8947, 259, 5, 81, "Input",ExpressionUUID->"3c330b55-cad9-4f79-a2a7-710ffbd7cc8e"],
Cell[408747, 8954, 177, 3, 26, "Input",ExpressionUUID->"52bf53b5-179a-43c2-a745-7569fe48b99c"],
Cell[408927, 8959, 259, 5, 81, "Input",ExpressionUUID->"88973112-7c55-4583-8f70-9b0cef0cdfb0"],
Cell[409189, 8966, 255, 5, 81, "Input",ExpressionUUID->"e0a42ec3-4f2c-46dc-82ce-68d99981f72a"]
}, Closed]],
Cell[CellGroupData[{
Cell[409481, 8976, 494, 7, 34, "Subsection",ExpressionUUID->"b9b4d2e6-d664-4a72-9e19-ae8bb52b5fc8"],
Cell[409978, 8985, 177, 3, 26, "Input",ExpressionUUID->"3d513961-cd1a-48ef-b8a1-075964c86541"],
Cell[410158, 8990, 6297, 133, 509, "Input",ExpressionUUID->"2f19b05e-4f06-403a-a48e-16e1a4245893",
 InitializationCell->True],
Cell[416458, 9125, 333, 6, 117, "Input",ExpressionUUID->"14e68441-a250-439c-862d-921bdb50252e"],
Cell[416794, 9133, 22583, 476, 2291, "Input",ExpressionUUID->"a64318df-00db-4137-88dd-2e6510e32369",
 InitializationCell->True],
Cell[439380, 9611, 3566, 68, 185, "Input",ExpressionUUID->"65c8905a-e2a9-4374-8eb3-bf49e4358595",
 InitializationCell->True]
}, Open  ]]
}, Open  ]]
}
]
*)

